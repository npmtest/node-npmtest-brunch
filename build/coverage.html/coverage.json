{"/home/travis/build/npmtest/node-npmtest-brunch/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":33}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_brunch */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-brunch/lib.npmtest_brunch.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/lib.npmtest_brunch.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":51}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":57}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_brunch */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_brunch = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_brunch = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-brunch/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":50}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":64},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-brunch && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_brunch */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_brunch","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_brunch.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_brunch.rollup.js'] =","            local.assetsDict['/assets.npmtest_brunch.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_brunch.__dirname + '/lib.npmtest_brunch.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":26}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":32}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":45}},"5":{"start":{"line":6,"column":0},"end":{"line":16,"column":2}},"6":{"start":{"line":7,"column":2},"end":{"line":7,"column":41}},"7":{"start":{"line":8,"column":2},"end":{"line":8,"column":60}},"8":{"start":{"line":9,"column":2},"end":{"line":9,"column":62}},"9":{"start":{"line":10,"column":2},"end":{"line":10,"column":25}},"10":{"start":{"line":10,"column":18},"end":{"line":10,"column":25}},"11":{"start":{"line":12,"column":2},"end":{"line":15,"column":5}},"12":{"start":{"line":18,"column":0},"end":{"line":20,"column":2}},"13":{"start":{"line":19,"column":2},"end":{"line":19,"column":53}},"14":{"start":{"line":22,"column":0},"end":{"line":22,"column":64}},"15":{"start":{"line":23,"column":0},"end":{"line":36,"column":2}},"16":{"start":{"line":24,"column":2},"end":{"line":24,"column":32}},"17":{"start":{"line":26,"column":2},"end":{"line":26,"column":53}},"18":{"start":{"line":27,"column":2},"end":{"line":29,"column":20}},"19":{"start":{"line":31,"column":2},"end":{"line":35,"column":5}},"20":{"start":{"line":38,"column":0},"end":{"line":48,"column":2}},"21":{"start":{"line":39,"column":2},"end":{"line":39,"column":51}},"22":{"start":{"line":40,"column":2},"end":{"line":44,"column":3}},"23":{"start":{"line":41,"column":4},"end":{"line":41,"column":57}},"24":{"start":{"line":42,"column":4},"end":{"line":42,"column":44}},"25":{"start":{"line":42,"column":24},"end":{"line":42,"column":44}},"26":{"start":{"line":43,"column":4},"end":{"line":43,"column":27}},"27":{"start":{"line":47,"column":2},"end":{"line":47,"column":52}},"28":{"start":{"line":50,"column":0},"end":{"line":50,"column":40}},"29":{"start":{"line":51,"column":0},"end":{"line":51,"column":39}}},"branchMap":{"1":{"line":9,"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":37}},{"start":{"line":9,"column":41},"end":{"line":9,"column":61}}]},"2":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":2},"end":{"line":10,"column":2}},{"start":{"line":10,"column":2},"end":{"line":10,"column":2}}]},"3":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":9},"end":{"line":19,"column":12}},{"start":{"line":19,"column":16},"end":{"line":19,"column":39}},{"start":{"line":19,"column":43},"end":{"line":19,"column":52}}]},"4":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":19},"end":{"line":27,"column":35}},{"start":{"line":28,"column":4},"end":{"line":28,"column":36}},{"start":{"line":29,"column":4},"end":{"line":29,"column":19}}]},"5":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":18},"end":{"line":39,"column":32}},{"start":{"line":39,"column":36},"end":{"line":39,"column":50}}]},"6":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":40,"column":2}},{"start":{"line":40,"column":2},"end":{"line":40,"column":2}}]},"7":{"line":41,"type":"cond-expr","locations":[{"start":{"line":41,"column":43},"end":{"line":41,"column":50}},{"start":{"line":41,"column":53},"end":{"line":41,"column":56}}]},"8":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":42,"column":4}},{"start":{"line":42,"column":4},"end":{"line":42,"column":4}}]}},"code":["'use strict';","require('micro-es7-shim');","require('promise.prototype.finally').shim();","const logger = require('loggy');","const BrunchError = require('./utils/error');","const checkLegacyNewSyntax = options => {","  const rawArgs = options.parent.rawArgs;","  const newArgs = rawArgs.slice(rawArgs.indexOf('new') + 1);","  const oldSyntax = !options.skeleton && newArgs.length === 2;","  if (!oldSyntax) return;","","  throw new BrunchError('LEGACY_NEW_SYNTAX', {","    skeleton: newArgs[0],","    path: newArgs[1],","  });","};","","const hasDebug = obj => {","  return obj && typeof obj === 'object' && obj.debug;","};","","const defaultSkeleton = 'https://github.com/brunch/dead-simple';","exports.new = (rootPath, options) => {","  checkLegacyNewSyntax(options);","","  const initSkeleton = require('init-skeleton').init;","  const skeleton = options.skeleton ||","    process.env.BRUNCH_INIT_SKELETON ||","    defaultSkeleton;","","  return initSkeleton(skeleton, {","    logger,","    rootPath,","    commandName: 'brunch new',","  });","};","","const start = (persistent, arg2, arg3) => {","  const isDebug = hasDebug(arg2) || hasDebug(arg3);","  if (isDebug) {","    let ns = typeof isDebug === 'string' ? isDebug : '*';","    if (ns !== 'speed') ns = `brunch:${ns}`;","    process.env.DEBUG = ns;","  }","  // We require `watch` after we assigned `process.env.DEBUG` any value.","  // Otherwise it would be `undefined` and debug messages wouldn't be shown.","  return require('./watch')(persistent, arg2, arg3);","};","","exports.build = start.bind(null, false);","exports.watch = start.bind(null, true);",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"12":0,"18":1,"19":0,"22":1,"23":1,"24":0,"26":0,"27":0,"31":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"47":0,"50":1,"51":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/error.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/error.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":15,"loc":{"start":{"line":15,"column":13},"end":{"line":15,"column":28}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":39}},"2":{"start":{"line":3,"column":0},"end":{"line":12,"column":2}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":24}},"4":{"start":{"line":5,"column":2},"end":{"line":8,"column":5}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":42}},"6":{"start":{"line":6,"column":25},"end":{"line":6,"column":42}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":29}},"8":{"start":{"line":10,"column":2},"end":{"line":10,"column":55}},"9":{"start":{"line":10,"column":18},"end":{"line":10,"column":55}},"10":{"start":{"line":11,"column":2},"end":{"line":11,"column":17}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":65}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":19}},"13":{"start":{"line":19,"column":4},"end":{"line":19,"column":30}},"14":{"start":{"line":20,"column":4},"end":{"line":20,"column":21}},"15":{"start":{"line":24,"column":0},"end":{"line":24,"column":29}}},"branchMap":{"1":{"line":6,"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":4}},{"start":{"line":6,"column":4},"end":{"line":6,"column":4}}]},"2":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":11},"end":{"line":7,"column":22}},{"start":{"line":7,"column":26},"end":{"line":7,"column":28}}]},"3":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":2},"end":{"line":10,"column":2}},{"start":{"line":10,"column":2},"end":{"line":10,"column":2}}]},"4":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":34},"end":{"line":10,"column":46}},{"start":{"line":10,"column":50},"end":{"line":10,"column":52}}]},"5":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":27},"end":{"line":16,"column":41}},{"start":{"line":16,"column":45},"end":{"line":16,"column":49}}]},"6":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":51},"end":{"line":16,"column":57}},{"start":{"line":16,"column":61},"end":{"line":16,"column":63}}]}},"code":["'use strict';","const messages = require('./messages');","const format = (template, params) => {","  let withError = false;","  let message = template.replace(/#{\\s*(\\w+)\\s*}/g, (_, key) => {","    if (key === 'error') withError = true;","    return params[key] || '';","  });","","  if (!withError) message += `\\n${params.error || ''}`;","  return message;","};","","class BrunchError extends Error {","  constructor(code, params) {","    const message = format(messages[code] || code, params || {});","    super(message);","","    this.name = 'BrunchError';","    this.code = code;","  }","}","","module.exports = BrunchError;",""],"l":{"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"10":0,"11":0,"16":0,"17":0,"19":0,"20":0,"24":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/cli.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/cli.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":1,"13":1,"14":1,"15":1,"16":2,"17":1,"18":2,"19":1,"20":0,"21":1,"22":0,"23":1,"24":0,"25":1,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":0,"40":0,"41":1,"42":1,"43":3,"44":1,"45":1},"b":{"1":[0,1],"2":[0,1],"3":[0,1],"4":[0,1],"5":[0,1],"6":[0,0],"7":[0,0],"8":[0,1],"9":[3,3],"10":[1,0]},"f":{"1":0,"2":1,"3":1,"4":2,"5":2,"6":0,"7":1,"8":3},"fnMap":{"1":{"name":"(anonymous_1)","line":31,"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":27}}},"2":{"name":"(anonymous_2)","line":60,"loc":{"start":{"line":60,"column":29},"end":{"line":60,"column":53}}},"3":{"name":"(anonymous_3)","line":61,"loc":{"start":{"line":61,"column":15},"end":{"line":61,"column":31}}},"4":{"name":"(anonymous_4)","line":62,"loc":{"start":{"line":62,"column":22},"end":{"line":62,"column":36}}},"5":{"name":"(anonymous_5)","line":66,"loc":{"start":{"line":66,"column":19},"end":{"line":66,"column":35}}},"6":{"name":"(anonymous_6)","line":85,"loc":{"start":{"line":85,"column":37},"end":{"line":85,"column":51}}},"7":{"name":"(anonymous_7)","line":95,"loc":{"start":{"line":95,"column":14},"end":{"line":95,"column":25}}},"8":{"name":"(anonymous_8)","line":111,"loc":{"start":{"line":111,"column":43},"end":{"line":111,"column":57}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"2":{"start":{"line":6,"column":0},"end":{"line":16,"column":1}},"3":{"start":{"line":7,"column":2},"end":{"line":14,"column":4}},"4":{"start":{"line":15,"column":2},"end":{"line":15,"column":18}},"5":{"start":{"line":19,"column":0},"end":{"line":19,"column":35}},"6":{"start":{"line":20,"column":0},"end":{"line":20,"column":30}},"7":{"start":{"line":21,"column":0},"end":{"line":21,"column":28}},"8":{"start":{"line":23,"column":0},"end":{"line":25,"column":32}},"9":{"start":{"line":27,"column":0},"end":{"line":34,"column":24}},"10":{"start":{"line":32,"column":4},"end":{"line":32,"column":58}},"11":{"start":{"line":36,"column":0},"end":{"line":44,"column":26}},"12":{"start":{"line":46,"column":0},"end":{"line":58,"column":26}},"13":{"start":{"line":60,"column":0},"end":{"line":92,"column":2}},"14":{"start":{"line":61,"column":2},"end":{"line":65,"column":4}},"15":{"start":{"line":62,"column":4},"end":{"line":64,"column":7}},"16":{"start":{"line":63,"column":6},"end":{"line":63,"column":32}},"17":{"start":{"line":66,"column":2},"end":{"line":68,"column":4}},"18":{"start":{"line":67,"column":4},"end":{"line":67,"column":35}},"19":{"start":{"line":70,"column":2},"end":{"line":72,"column":3}},"20":{"start":{"line":71,"column":4},"end":{"line":71,"column":66}},"21":{"start":{"line":73,"column":2},"end":{"line":75,"column":3}},"22":{"start":{"line":74,"column":4},"end":{"line":74,"column":260}},"23":{"start":{"line":76,"column":2},"end":{"line":78,"column":3}},"24":{"start":{"line":77,"column":4},"end":{"line":77,"column":231}},"25":{"start":{"line":79,"column":2},"end":{"line":79,"column":34}},"26":{"start":{"line":80,"column":2},"end":{"line":91,"column":3}},"27":{"start":{"line":83,"column":4},"end":{"line":83,"column":33}},"28":{"start":{"line":84,"column":4},"end":{"line":90,"column":5}},"29":{"start":{"line":85,"column":6},"end":{"line":87,"column":9}},"30":{"start":{"line":86,"column":8},"end":{"line":86,"column":41}},"31":{"start":{"line":88,"column":6},"end":{"line":88,"column":58}},"32":{"start":{"line":89,"column":6},"end":{"line":89,"column":113}},"33":{"start":{"line":95,"column":0},"end":{"line":116,"column":2}},"34":{"start":{"line":96,"column":2},"end":{"line":96,"column":34}},"35":{"start":{"line":97,"column":2},"end":{"line":97,"column":24}},"36":{"start":{"line":101,"column":2},"end":{"line":101,"column":21}},"37":{"start":{"line":103,"column":2},"end":{"line":103,"column":52}},"38":{"start":{"line":104,"column":2},"end":{"line":107,"column":3}},"39":{"start":{"line":105,"column":4},"end":{"line":105,"column":24}},"40":{"start":{"line":106,"column":4},"end":{"line":106,"column":11}},"41":{"start":{"line":109,"column":2},"end":{"line":109,"column":22}},"42":{"start":{"line":111,"column":2},"end":{"line":113,"column":5}},"43":{"start":{"line":112,"column":4},"end":{"line":112,"column":61}},"44":{"start":{"line":115,"column":2},"end":{"line":115,"column":36}},"45":{"start":{"line":115,"column":21},"end":{"line":115,"column":36}}},"branchMap":{"1":{"line":6,"type":"if","locations":[{"start":{"line":6,"column":0},"end":{"line":6,"column":0}},{"start":{"line":6,"column":0},"end":{"line":6,"column":0}}]},"2":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":2},"end":{"line":70,"column":2}},{"start":{"line":70,"column":2},"end":{"line":70,"column":2}}]},"3":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":2},"end":{"line":73,"column":2}},{"start":{"line":73,"column":2},"end":{"line":73,"column":2}}]},"4":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":2},"end":{"line":76,"column":2}},{"start":{"line":76,"column":2},"end":{"line":76,"column":2}}]},"5":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":2},"end":{"line":80,"column":2}},{"start":{"line":80,"column":2},"end":{"line":80,"column":2}}]},"6":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"7":{"line":86,"type":"cond-expr","locations":[{"start":{"line":86,"column":30},"end":{"line":86,"column":34}},{"start":{"line":86,"column":37},"end":{"line":86,"column":40}}]},"8":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":2},"end":{"line":104,"column":2}},{"start":{"line":104,"column":2},"end":{"line":104,"column":2}}]},"9":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":11},"end":{"line":112,"column":33}},{"start":{"line":112,"column":37},"end":{"line":112,"column":60}}]},"10":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":2},"end":{"line":115,"column":2}},{"start":{"line":115,"column":2},"end":{"line":115,"column":2}}]}},"code":["'use strict';","","/* eslint-disable prefer-arrow-callback, prefer-template */","/* eslint-env es6:false */","var version = process.versions.node;","if (parseInt(version) < 4) {","  console.error(","    'Your global Brunch installation is trying to load local Brunch v2+, ' +","    'which only supports Node.js v4 or higher (you have ' + version + ').\\n' +","    'You have two choices:\\n' +","    '  a) Update Node.js to v4+. Then update global Brunch: ' +","    '`npm un -g brunch && npm i -g brunch`\\n' +","    '  b) Adjust package.json to use Brunch 1.x (outdated, not recommended).'","  );","  process.exit(1);","}","","// The files use ES2015, which cannot be used with old Brunches.","var program = require('commander');","var logger = require('loggy');","var commands = require('.');","","program","  .version(require('../package.json').version, '-v, --version')","  .usage('[command] [options]');","","program.command('new [path]')","  .alias('n')","  .description('Create new Brunch project in path.')","  .option('-s, --skeleton [name]', 'skeleton name or URL from brunch.io/skeletons')","  .on('--help', function() {","    require('init-skeleton').printBanner('brunch new -s');","  })","  .action(commands.new);","","program.command('build [path]')","  .alias('b')","  .description('Build a Brunch project.')","  .option('-e, --env [setting]', 'specify a set of override settings to apply')","  .option('-p, --production', 'same as `--env production`')","  .option('-d, --debug [pattern]', 'print verbose debug output to stdout')","  .option('-j, --jobs [num]', 'parallelize the build')","  .option('-c, --config [path]', 'specify a path to Brunch config file')","  .action(commands.build);","","program.command('watch [path]')","  .alias('w')","  .description('Watch Brunch directory and rebuild if something changed.')","  .option('-e, --env [setting]', 'specify a set of override settings to apply')","  .option('-p, --production', 'same as `--env production`')","  .option('-s, --server', 'run a simple http server for the public dir on localhost')","  .option('-n, --network', 'if `server` was given, allow access from the network')","  .option('-P, --port [port]', 'if `server` was given, listen on this port')","  .option('-d, --debug [pattern]', 'print verbose debug output to stdout')","  .option('-j, --jobs [num]', 'parallelize the build')","  .option('-c, --config [path]', 'specify a path to Brunch config file')","  .option('--stdin', 'listen to stdin and exit when stdin closes')","  .action(commands.watch);","","var checkForRemovedOptions = function(args, command) {","  var hasArg = function(deprs) {","    return deprs.some(function(arg) {","      return args.includes(arg);","    });","  };","  var hasCommand = function(valid) {","    return valid.includes(command);","  };","  // Deprecations","  if (hasArg(['-o', '--optimize'])) {","    return '--optimize has been removed. Use `-p / --production`';","  }","  if (hasCommand(['g', 'd', 'generate', 'destroy'])) {","    return '`brunch generate / destroy` command has been removed.\\n\\nUse scaffolt (https://github.com/paulmillr/scaffolt)\\nsuccessor or similar:\\n    npm install -g scaffolt\\n    scaffolt <type> <name> [options]\\n    scaffolt <type> <name> [options] --revert';","  }","  if (hasCommand(['t', 'test'])) {","    return '`brunch test` command has been removed.\\n\\nUse mocha-phantomjs (http://metaskills.net/mocha-phantomjs/)\\nsuccessor or similar:\\n    npm install -g mocha-phantomjs\\n    mocha-phantomjs [options] <your-html-file-or-url>';","  }","  var pIndex = args.indexOf('-p');","  if (pIndex !== -1) {","    // if -p is followed by a number, the user probably wants to specify the port","    // the new option name for port is -P","    var port = +args[pIndex + 1];","    if (Number.isInteger(port)) {","      var parsed = args.slice(2).map(function(arg) {","        return arg === '-p' ? '-P' : arg;","      });","      var corrected = ['brunch'].concat(parsed).join(' ');","      return 'The `-p` option is no longer used to specify the port. Use `-P` instead, e.g. `' + corrected + '`';","    }","  }","};","","// The fn would be executed every time user run `bin/brunch`.","exports.run = function() {","  var args = process.argv.slice();","  var command = args[2];","","  // Need this since `brunch` binary will fork and run `run-cli`,","  // but we still want to see `brunch` in help.","  args[1] = 'brunch';","","  var error = checkForRemovedOptions(args, command);","  if (error) {","    logger.error(error);","    return;","  }","","  program.parse(args);","","  var validCommand = program.commands.some(function(cmd) {","    return cmd.name() === command || cmd.alias() === command;","  });","","  if (!validCommand) program.help();","};",""],"l":{"5":1,"6":1,"7":0,"15":0,"19":1,"20":1,"21":1,"23":1,"27":1,"32":0,"36":1,"46":1,"60":1,"61":1,"62":1,"63":2,"66":1,"67":2,"70":1,"71":0,"73":1,"74":0,"76":1,"77":0,"79":1,"80":1,"83":0,"84":0,"85":0,"86":0,"88":0,"89":0,"95":1,"96":1,"97":1,"101":1,"103":1,"104":1,"105":0,"106":0,"109":1,"111":1,"112":3,"115":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/run-cli.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/run-cli.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}}},"branchMap":{},"code":["'use strict';","// For workers.","require('./cli').run();",""],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/watch.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/watch.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":1,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"(anonymous_1)","line":38,"loc":{"start":{"line":38,"column":24},"end":{"line":38,"column":35}}},"2":{"name":"(anonymous_2)","line":88,"loc":{"start":{"line":88,"column":13},"end":{"line":88,"column":46}}},"3":{"name":"(anonymous_3)","line":148,"loc":{"start":{"line":148,"column":17},"end":{"line":148,"column":20}}},"4":{"name":"(anonymous_4)","line":187,"loc":{"start":{"line":187,"column":21},"end":{"line":187,"column":34}}},"5":{"name":"(anonymous_5)","line":192,"loc":{"start":{"line":192,"column":13},"end":{"line":192,"column":28}}},"6":{"name":"(anonymous_6)","line":241,"loc":{"start":{"line":241,"column":15},"end":{"line":241,"column":25}}},"7":{"name":"(anonymous_7)","line":274,"loc":{"start":{"line":274,"column":9},"end":{"line":274,"column":12}}},"8":{"name":"(anonymous_8)","line":335,"loc":{"start":{"line":335,"column":17},"end":{"line":335,"column":20}}},"9":{"name":"(anonymous_9)","line":345,"loc":{"start":{"line":345,"column":18},"end":{"line":345,"column":31}}},"10":{"name":"(anonymous_10)","line":358,"loc":{"start":{"line":358,"column":17},"end":{"line":358,"column":20}}},"11":{"name":"(anonymous_11)","line":364,"loc":{"start":{"line":364,"column":12},"end":{"line":364,"column":15}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":42}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":32}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":47}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":41}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":44}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":41}},"9":{"start":{"line":10,"column":0},"end":{"line":10,"column":35}},"10":{"start":{"line":11,"column":0},"end":{"line":11,"column":40}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":37}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":42}},"13":{"start":{"line":15,"column":0},"end":{"line":15,"column":49}},"14":{"start":{"line":16,"column":0},"end":{"line":16,"column":49}},"15":{"start":{"line":17,"column":0},"end":{"line":17,"column":48}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":46}},"17":{"start":{"line":20,"column":0},"end":{"line":20,"column":43}},"18":{"start":{"line":21,"column":0},"end":{"line":21,"column":43}},"19":{"start":{"line":23,"column":0},"end":{"line":29,"column":2}},"20":{"start":{"line":24,"column":2},"end":{"line":24,"column":33}},"21":{"start":{"line":25,"column":2},"end":{"line":25,"column":27}},"22":{"start":{"line":25,"column":20},"end":{"line":25,"column":27}},"23":{"start":{"line":26,"column":2},"end":{"line":28,"column":5}},"24":{"start":{"line":26,"column":28},"end":{"line":28,"column":4}},"25":{"start":{"line":27,"column":4},"end":{"line":27,"column":31}},"26":{"start":{"line":31,"column":0},"end":{"line":47,"column":2}},"27":{"start":{"line":32,"column":2},"end":{"line":46,"column":9}},"28":{"start":{"line":33,"column":4},"end":{"line":33,"column":50}},"29":{"start":{"line":34,"column":4},"end":{"line":36,"column":5}},"30":{"start":{"line":35,"column":6},"end":{"line":35,"column":38}},"31":{"start":{"line":38,"column":4},"end":{"line":43,"column":6}},"32":{"start":{"line":40,"column":6},"end":{"line":42,"column":9}},"33":{"start":{"line":41,"column":8},"end":{"line":41,"column":53}},"34":{"start":{"line":45,"column":4},"end":{"line":45,"column":23}},"35":{"start":{"line":49,"column":0},"end":{"line":54,"column":2}},"36":{"start":{"line":50,"column":2},"end":{"line":53,"column":5}},"37":{"start":{"line":52,"column":4},"end":{"line":52,"column":56}},"38":{"start":{"line":52,"column":41},"end":{"line":52,"column":54}},"39":{"start":{"line":57,"column":0},"end":{"line":63,"column":2}},"40":{"start":{"line":58,"column":2},"end":{"line":58,"column":46}},"41":{"start":{"line":59,"column":2},"end":{"line":59,"column":33}},"42":{"start":{"line":60,"column":2},"end":{"line":60,"column":78}},"43":{"start":{"line":60,"column":27},"end":{"line":60,"column":77}},"44":{"start":{"line":60,"column":68},"end":{"line":60,"column":75}},"45":{"start":{"line":61,"column":2},"end":{"line":61,"column":95}},"46":{"start":{"line":62,"column":2},"end":{"line":62,"column":41}},"47":{"start":{"line":65,"column":0},"end":{"line":75,"column":2}},"48":{"start":{"line":66,"column":2},"end":{"line":66,"column":22}},"49":{"start":{"line":67,"column":2},"end":{"line":67,"column":38}},"50":{"start":{"line":68,"column":2},"end":{"line":68,"column":45}},"51":{"start":{"line":68,"column":38},"end":{"line":68,"column":45}},"52":{"start":{"line":70,"column":2},"end":{"line":70,"column":38}},"53":{"start":{"line":71,"column":2},"end":{"line":71,"column":30}},"54":{"start":{"line":72,"column":2},"end":{"line":74,"column":29}},"55":{"start":{"line":89,"column":4},"end":{"line":89,"column":43}},"56":{"start":{"line":90,"column":4},"end":{"line":90,"column":41}},"57":{"start":{"line":91,"column":4},"end":{"line":91,"column":52}},"58":{"start":{"line":92,"column":4},"end":{"line":92,"column":28}},"59":{"start":{"line":93,"column":4},"end":{"line":93,"column":39}},"60":{"start":{"line":94,"column":4},"end":{"line":94,"column":53}},"61":{"start":{"line":96,"column":4},"end":{"line":101,"column":5}},"62":{"start":{"line":97,"column":6},"end":{"line":100,"column":9}},"63":{"start":{"line":98,"column":8},"end":{"line":98,"column":68}},"64":{"start":{"line":99,"column":8},"end":{"line":99,"column":34}},"65":{"start":{"line":103,"column":4},"end":{"line":145,"column":9}},"66":{"start":{"line":105,"column":8},"end":{"line":105,"column":26}},"67":{"start":{"line":106,"column":8},"end":{"line":108,"column":9}},"68":{"start":{"line":107,"column":10},"end":{"line":107,"column":37}},"69":{"start":{"line":109,"column":8},"end":{"line":113,"column":11}},"70":{"start":{"line":116,"column":8},"end":{"line":116,"column":32}},"71":{"start":{"line":117,"column":8},"end":{"line":117,"column":36}},"72":{"start":{"line":118,"column":8},"end":{"line":118,"column":29}},"73":{"start":{"line":119,"column":8},"end":{"line":119,"column":35}},"74":{"start":{"line":120,"column":8},"end":{"line":120,"column":42}},"75":{"start":{"line":121,"column":8},"end":{"line":121,"column":50}},"76":{"start":{"line":122,"column":8},"end":{"line":122,"column":54}},"77":{"start":{"line":124,"column":8},"end":{"line":124,"column":41}},"78":{"start":{"line":125,"column":8},"end":{"line":125,"column":52}},"79":{"start":{"line":126,"column":8},"end":{"line":126,"column":55}},"80":{"start":{"line":128,"column":8},"end":{"line":131,"column":11}},"81":{"start":{"line":129,"column":10},"end":{"line":129,"column":41}},"82":{"start":{"line":130,"column":10},"end":{"line":130,"column":33}},"83":{"start":{"line":134,"column":8},"end":{"line":143,"column":9}},"84":{"start":{"line":136,"column":10},"end":{"line":136,"column":30}},"85":{"start":{"line":138,"column":10},"end":{"line":140,"column":61}},"86":{"start":{"line":142,"column":10},"end":{"line":142,"column":36}},"87":{"start":{"line":144,"column":8},"end":{"line":144,"column":24}},"88":{"start":{"line":149,"column":4},"end":{"line":149,"column":28}},"89":{"start":{"line":151,"column":4},"end":{"line":151,"column":38}},"90":{"start":{"line":152,"column":4},"end":{"line":156,"column":7}},"91":{"start":{"line":153,"column":6},"end":{"line":155,"column":7}},"92":{"start":{"line":154,"column":8},"end":{"line":154,"column":23}},"93":{"start":{"line":158,"column":4},"end":{"line":158,"column":36}},"94":{"start":{"line":159,"column":4},"end":{"line":165,"column":7}},"95":{"start":{"line":160,"column":6},"end":{"line":160,"column":54}},"96":{"start":{"line":163,"column":6},"end":{"line":163,"column":47}},"97":{"start":{"line":164,"column":6},"end":{"line":164,"column":35}},"98":{"start":{"line":167,"column":4},"end":{"line":167,"column":34}},"99":{"start":{"line":169,"column":4},"end":{"line":169,"column":32}},"100":{"start":{"line":169,"column":25},"end":{"line":169,"column":32}},"101":{"start":{"line":171,"column":4},"end":{"line":171,"column":39}},"102":{"start":{"line":172,"column":4},"end":{"line":176,"column":6}},"103":{"start":{"line":173,"column":6},"end":{"line":175,"column":7}},"104":{"start":{"line":174,"column":8},"end":{"line":174,"column":133}},"105":{"start":{"line":178,"column":4},"end":{"line":178,"column":45}},"106":{"start":{"line":179,"column":4},"end":{"line":179,"column":90}},"107":{"start":{"line":181,"column":4},"end":{"line":184,"column":5}},"108":{"start":{"line":182,"column":6},"end":{"line":182,"column":53}},"109":{"start":{"line":182,"column":36},"end":{"line":182,"column":51}},"110":{"start":{"line":183,"column":6},"end":{"line":183,"column":29}},"111":{"start":{"line":188,"column":4},"end":{"line":188,"column":63}},"112":{"start":{"line":189,"column":4},"end":{"line":189,"column":20}},"113":{"start":{"line":193,"column":4},"end":{"line":193,"column":40}},"114":{"start":{"line":194,"column":4},"end":{"line":194,"column":43}},"115":{"start":{"line":195,"column":4},"end":{"line":195,"column":31}},"116":{"start":{"line":196,"column":4},"end":{"line":196,"column":65}},"117":{"start":{"line":196,"column":29},"end":{"line":196,"column":64}},"118":{"start":{"line":198,"column":4},"end":{"line":198,"column":36}},"119":{"start":{"line":199,"column":4},"end":{"line":238,"column":9}},"120":{"start":{"line":205,"column":8},"end":{"line":205,"column":28}},"121":{"start":{"line":208,"column":8},"end":{"line":208,"column":45}},"122":{"start":{"line":208,"column":21},"end":{"line":208,"column":45}},"123":{"start":{"line":210,"column":8},"end":{"line":210,"column":58}},"124":{"start":{"line":211,"column":8},"end":{"line":211,"column":35}},"125":{"start":{"line":211,"column":28},"end":{"line":211,"column":35}},"126":{"start":{"line":212,"column":8},"end":{"line":212,"column":46}},"127":{"start":{"line":215,"column":8},"end":{"line":215,"column":48}},"128":{"start":{"line":215,"column":21},"end":{"line":215,"column":48}},"129":{"start":{"line":217,"column":8},"end":{"line":217,"column":58}},"130":{"start":{"line":218,"column":8},"end":{"line":226,"column":9}},"131":{"start":{"line":219,"column":10},"end":{"line":219,"column":40}},"132":{"start":{"line":220,"column":15},"end":{"line":226,"column":9}},"133":{"start":{"line":221,"column":10},"end":{"line":221,"column":38}},"134":{"start":{"line":222,"column":15},"end":{"line":226,"column":9}},"135":{"start":{"line":223,"column":10},"end":{"line":223,"column":31}},"136":{"start":{"line":225,"column":10},"end":{"line":225,"column":48}},"137":{"start":{"line":229,"column":8},"end":{"line":229,"column":48}},"138":{"start":{"line":229,"column":21},"end":{"line":229,"column":48}},"139":{"start":{"line":231,"column":8},"end":{"line":231,"column":58}},"140":{"start":{"line":232,"column":8},"end":{"line":232,"column":66}},"141":{"start":{"line":232,"column":28},"end":{"line":232,"column":66}},"142":{"start":{"line":233,"column":8},"end":{"line":233,"column":46}},"143":{"start":{"line":236,"column":8},"end":{"line":236,"column":42}},"144":{"start":{"line":237,"column":8},"end":{"line":237,"column":35}},"145":{"start":{"line":242,"column":4},"end":{"line":253,"column":6}},"146":{"start":{"line":245,"column":6},"end":{"line":252,"column":7}},"147":{"start":{"line":246,"column":8},"end":{"line":246,"column":31}},"148":{"start":{"line":248,"column":8},"end":{"line":248,"column":46}},"149":{"start":{"line":249,"column":8},"end":{"line":249,"column":72}},"150":{"start":{"line":250,"column":8},"end":{"line":250,"column":55}},"151":{"start":{"line":250,"column":28},"end":{"line":250,"column":55}},"152":{"start":{"line":251,"column":8},"end":{"line":251,"column":26}},"153":{"start":{"line":255,"column":4},"end":{"line":255,"column":44}},"154":{"start":{"line":256,"column":4},"end":{"line":264,"column":6}},"155":{"start":{"line":257,"column":6},"end":{"line":257,"column":42}},"156":{"start":{"line":258,"column":6},"end":{"line":258,"column":28}},"157":{"start":{"line":259,"column":6},"end":{"line":259,"column":33}},"158":{"start":{"line":260,"column":6},"end":{"line":262,"column":7}},"159":{"start":{"line":261,"column":8},"end":{"line":261,"column":37}},"160":{"start":{"line":263,"column":6},"end":{"line":263,"column":23}},"161":{"start":{"line":266,"column":4},"end":{"line":266,"column":45}},"162":{"start":{"line":267,"column":4},"end":{"line":267,"column":28}},"163":{"start":{"line":268,"column":4},"end":{"line":268,"column":25}},"164":{"start":{"line":269,"column":4},"end":{"line":269,"column":20}},"165":{"start":{"line":271,"column":4},"end":{"line":271,"column":63}},"166":{"start":{"line":275,"column":4},"end":{"line":275,"column":45}},"167":{"start":{"line":276,"column":4},"end":{"line":276,"column":31}},"168":{"start":{"line":277,"column":4},"end":{"line":277,"column":47}},"169":{"start":{"line":278,"column":4},"end":{"line":278,"column":35}},"170":{"start":{"line":279,"column":4},"end":{"line":279,"column":33}},"171":{"start":{"line":280,"column":4},"end":{"line":280,"column":47}},"172":{"start":{"line":282,"column":4},"end":{"line":282,"column":45}},"173":{"start":{"line":283,"column":4},"end":{"line":289,"column":5}},"174":{"start":{"line":284,"column":6},"end":{"line":287,"column":9}},"175":{"start":{"line":286,"column":8},"end":{"line":286,"column":28}},"176":{"start":{"line":288,"column":6},"end":{"line":288,"column":13}},"177":{"start":{"line":293,"column":4},"end":{"line":332,"column":27}},"178":{"start":{"line":294,"column":6},"end":{"line":294,"column":42}},"179":{"start":{"line":295,"column":6},"end":{"line":295,"column":37}},"180":{"start":{"line":296,"column":6},"end":{"line":296,"column":37}},"181":{"start":{"line":297,"column":6},"end":{"line":297,"column":24}},"182":{"start":{"line":298,"column":6},"end":{"line":298,"column":53}},"183":{"start":{"line":299,"column":6},"end":{"line":301,"column":9}},"184":{"start":{"line":305,"column":6},"end":{"line":305,"column":51}},"185":{"start":{"line":307,"column":6},"end":{"line":307,"column":24}},"186":{"start":{"line":308,"column":6},"end":{"line":308,"column":48}},"187":{"start":{"line":308,"column":41},"end":{"line":308,"column":48}},"188":{"start":{"line":310,"column":6},"end":{"line":310,"column":49}},"189":{"start":{"line":310,"column":33},"end":{"line":310,"column":49}},"190":{"start":{"line":313,"column":6},"end":{"line":316,"column":9}},"191":{"start":{"line":315,"column":8},"end":{"line":315,"column":31}},"192":{"start":{"line":318,"column":6},"end":{"line":318,"column":83}},"193":{"start":{"line":318,"column":46},"end":{"line":318,"column":81}},"194":{"start":{"line":319,"column":6},"end":{"line":322,"column":7}},"195":{"start":{"line":320,"column":8},"end":{"line":320,"column":98}},"196":{"start":{"line":321,"column":8},"end":{"line":321,"column":38}},"197":{"start":{"line":324,"column":6},"end":{"line":324,"column":39}},"198":{"start":{"line":324,"column":32},"end":{"line":324,"column":39}},"199":{"start":{"line":327,"column":6},"end":{"line":330,"column":7}},"200":{"start":{"line":328,"column":8},"end":{"line":328,"column":24}},"201":{"start":{"line":329,"column":8},"end":{"line":329,"column":24}},"202":{"start":{"line":331,"column":6},"end":{"line":331,"column":31}},"203":{"start":{"line":336,"column":4},"end":{"line":336,"column":69}},"204":{"start":{"line":336,"column":56},"end":{"line":336,"column":69}},"205":{"start":{"line":337,"column":4},"end":{"line":337,"column":60}},"206":{"start":{"line":338,"column":4},"end":{"line":340,"column":6}},"207":{"start":{"line":346,"column":4},"end":{"line":346,"column":35}},"208":{"start":{"line":347,"column":4},"end":{"line":347,"column":27}},"209":{"start":{"line":348,"column":4},"end":{"line":351,"column":5}},"210":{"start":{"line":349,"column":6},"end":{"line":349,"column":44}},"211":{"start":{"line":350,"column":6},"end":{"line":350,"column":31}},"212":{"start":{"line":352,"column":4},"end":{"line":352,"column":55}},"213":{"start":{"line":352,"column":26},"end":{"line":352,"column":55}},"214":{"start":{"line":353,"column":4},"end":{"line":353,"column":27}},"215":{"start":{"line":359,"column":4},"end":{"line":359,"column":34}},"216":{"start":{"line":360,"column":4},"end":{"line":360,"column":27}},"217":{"start":{"line":361,"column":4},"end":{"line":361,"column":17}},"218":{"start":{"line":365,"column":4},"end":{"line":365,"column":43}},"219":{"start":{"line":365,"column":36},"end":{"line":365,"column":43}},"220":{"start":{"line":366,"column":4},"end":{"line":366,"column":32}},"221":{"start":{"line":367,"column":4},"end":{"line":367,"column":37}},"222":{"start":{"line":371,"column":0},"end":{"line":384,"column":2}},"223":{"start":{"line":372,"column":2},"end":{"line":372,"column":39}},"224":{"start":{"line":372,"column":18},"end":{"line":372,"column":39}},"225":{"start":{"line":375,"column":2},"end":{"line":382,"column":3}},"226":{"start":{"line":376,"column":4},"end":{"line":381,"column":5}},"227":{"start":{"line":377,"column":6},"end":{"line":377,"column":26}},"228":{"start":{"line":379,"column":6},"end":{"line":379,"column":61}},"229":{"start":{"line":379,"column":41},"end":{"line":379,"column":61}},"230":{"start":{"line":380,"column":6},"end":{"line":380,"column":21}},"231":{"start":{"line":383,"column":2},"end":{"line":383,"column":59}},"232":{"start":{"line":386,"column":0},"end":{"line":386,"column":23}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":2},"end":{"line":25,"column":2}},{"start":{"line":25,"column":2},"end":{"line":25,"column":2}}]},"2":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"3":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":2},"end":{"line":68,"column":2}},{"start":{"line":68,"column":2},"end":{"line":68,"column":2}}]},"4":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":6},"end":{"line":68,"column":11}},{"start":{"line":68,"column":15},"end":{"line":68,"column":19}},{"start":{"line":68,"column":23},"end":{"line":68,"column":36}}]},"5":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":14},"end":{"line":70,"column":18}},{"start":{"line":70,"column":22},"end":{"line":70,"column":25}},{"start":{"line":70,"column":29},"end":{"line":70,"column":37}}]},"6":{"line":72,"type":"cond-expr","locations":[{"start":{"line":74,"column":21},"end":{"line":74,"column":22}},{"start":{"line":74,"column":25},"end":{"line":74,"column":28}}]},"7":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":9},"end":{"line":72,"column":19}},{"start":{"line":73,"column":4},"end":{"line":73,"column":11}},{"start":{"line":74,"column":4},"end":{"line":74,"column":18}}]},"8":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":96,"column":4}},{"start":{"line":96,"column":4},"end":{"line":96,"column":4}}]},"9":{"line":98,"type":"cond-expr","locations":[{"start":{"line":98,"column":51},"end":{"line":98,"column":52}},{"start":{"line":98,"column":55},"end":{"line":98,"column":67}}]},"10":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"11":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":134,"column":8}},{"start":{"line":134,"column":8},"end":{"line":134,"column":8}}]},"12":{"line":138,"type":"cond-expr","locations":[{"start":{"line":139,"column":12},"end":{"line":139,"column":25}},{"start":{"line":140,"column":12},"end":{"line":140,"column":60}}]},"13":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":6},"end":{"line":153,"column":6}},{"start":{"line":153,"column":6},"end":{"line":153,"column":6}}]},"14":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":4},"end":{"line":169,"column":4}},{"start":{"line":169,"column":4},"end":{"line":169,"column":4}}]},"15":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":6},"end":{"line":173,"column":6}},{"start":{"line":173,"column":6},"end":{"line":173,"column":6}}]},"16":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":4},"end":{"line":181,"column":4}},{"start":{"line":181,"column":4},"end":{"line":181,"column":4}}]},"17":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":8},"end":{"line":208,"column":8}},{"start":{"line":208,"column":8},"end":{"line":208,"column":8}}]},"18":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":8},"end":{"line":211,"column":8}},{"start":{"line":211,"column":8},"end":{"line":211,"column":8}}]},"19":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":8},"end":{"line":215,"column":8}},{"start":{"line":215,"column":8},"end":{"line":215,"column":8}}]},"20":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":8},"end":{"line":218,"column":8}},{"start":{"line":218,"column":8},"end":{"line":218,"column":8}}]},"21":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":15},"end":{"line":220,"column":15}},{"start":{"line":220,"column":15},"end":{"line":220,"column":15}}]},"22":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":15},"end":{"line":222,"column":15}},{"start":{"line":222,"column":15},"end":{"line":222,"column":15}}]},"23":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":8},"end":{"line":229,"column":8}},{"start":{"line":229,"column":8},"end":{"line":229,"column":8}}]},"24":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":8},"end":{"line":232,"column":8}},{"start":{"line":232,"column":8},"end":{"line":232,"column":8}}]},"25":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":6},"end":{"line":245,"column":6}},{"start":{"line":245,"column":6},"end":{"line":245,"column":6}}]},"26":{"line":245,"type":"binary-expr","locations":[{"start":{"line":245,"column":10},"end":{"line":245,"column":22}},{"start":{"line":245,"column":26},"end":{"line":245,"column":70}}]},"27":{"line":250,"type":"if","locations":[{"start":{"line":250,"column":8},"end":{"line":250,"column":8}},{"start":{"line":250,"column":8},"end":{"line":250,"column":8}}]},"28":{"line":260,"type":"if","locations":[{"start":{"line":260,"column":6},"end":{"line":260,"column":6}},{"start":{"line":260,"column":6},"end":{"line":260,"column":6}}]},"29":{"line":260,"type":"binary-expr","locations":[{"start":{"line":260,"column":10},"end":{"line":260,"column":16}},{"start":{"line":260,"column":20},"end":{"line":260,"column":54}}]},"30":{"line":283,"type":"if","locations":[{"start":{"line":283,"column":4},"end":{"line":283,"column":4}},{"start":{"line":283,"column":4},"end":{"line":283,"column":4}}]},"31":{"line":308,"type":"if","locations":[{"start":{"line":308,"column":6},"end":{"line":308,"column":6}},{"start":{"line":308,"column":6},"end":{"line":308,"column":6}}]},"32":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":6},"end":{"line":310,"column":6}},{"start":{"line":310,"column":6},"end":{"line":310,"column":6}}]},"33":{"line":319,"type":"if","locations":[{"start":{"line":319,"column":6},"end":{"line":319,"column":6}},{"start":{"line":319,"column":6},"end":{"line":319,"column":6}}]},"34":{"line":324,"type":"if","locations":[{"start":{"line":324,"column":6},"end":{"line":324,"column":6}},{"start":{"line":324,"column":6},"end":{"line":324,"column":6}}]},"35":{"line":327,"type":"if","locations":[{"start":{"line":327,"column":6},"end":{"line":327,"column":6}},{"start":{"line":327,"column":6},"end":{"line":327,"column":6}}]},"36":{"line":336,"type":"if","locations":[{"start":{"line":336,"column":4},"end":{"line":336,"column":4}},{"start":{"line":336,"column":4},"end":{"line":336,"column":4}}]},"37":{"line":336,"type":"binary-expr","locations":[{"start":{"line":336,"column":8},"end":{"line":336,"column":33}},{"start":{"line":336,"column":37},"end":{"line":336,"column":54}}]},"38":{"line":337,"type":"binary-expr","locations":[{"start":{"line":337,"column":23},"end":{"line":337,"column":39}},{"start":{"line":337,"column":43},"end":{"line":337,"column":59}}]},"39":{"line":348,"type":"if","locations":[{"start":{"line":348,"column":4},"end":{"line":348,"column":4}},{"start":{"line":348,"column":4},"end":{"line":348,"column":4}}]},"40":{"line":352,"type":"if","locations":[{"start":{"line":352,"column":4},"end":{"line":352,"column":4}},{"start":{"line":352,"column":4},"end":{"line":352,"column":4}}]},"41":{"line":365,"type":"if","locations":[{"start":{"line":365,"column":4},"end":{"line":365,"column":4}},{"start":{"line":365,"column":4},"end":{"line":365,"column":4}}]},"42":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":2},"end":{"line":372,"column":2}},{"start":{"line":372,"column":2},"end":{"line":372,"column":2}}]},"43":{"line":375,"type":"if","locations":[{"start":{"line":375,"column":2},"end":{"line":375,"column":2}},{"start":{"line":375,"column":2},"end":{"line":375,"column":2}}]},"44":{"line":376,"type":"if","locations":[{"start":{"line":376,"column":4},"end":{"line":376,"column":4}},{"start":{"line":376,"column":4},"end":{"line":376,"column":4}}]},"45":{"line":379,"type":"if","locations":[{"start":{"line":379,"column":6},"end":{"line":379,"column":6}},{"start":{"line":379,"column":6},"end":{"line":379,"column":6}}]}},"code":["'use strict';","const sysPath = require('universal-path');","const getRelativePath = sysPath.relative;","const logger = require('loggy');","const chokidar = require('chokidar');","const debug = require('debug')('brunch:watch');","const speed = require('since-app-start');","const serveBrunch = require('serve-brunch');","const cpus = require('os').cpus().length;","const deppack = require('deppack');","const install = require('deps-install');","","const workers = require('./workers'); // close, init","const write = require('./fs_utils/write');","const ignored = require('./fs_utils/is_ignored');","const FileList = require('./fs_utils/file_list');","const pipeline = require('./fs_utils/pipeline');","","const application = require('./utils/config'); // loadConfig, install","const plugins = require('./utils/plugins');","const helpers = require('./utils/helpers'); // asyncFilter, flatten, generateCompilationLog, getCompilationProgress","","const promisifyHook = plugin => {","  const hook = plugin.preCompile;","  if (!hook.length) return;","  plugin.preCompile = () => new Promise(resolve => {","    hook.call(plugin, resolve);","  });","};","","const mergeHooks = (plugins, config) => {","  return Object.keys(plugins).reduce((mergedHooks, name) => {","    const allHooks = plugins[name].concat(config);","    if (name === 'preCompile') {","      allHooks.forEach(promisifyHook);","    }","","    mergedHooks[name] = function() {","      // => has lexical `arguments`","      return allHooks.map(plugin => {","        return plugin[name].apply(plugin, arguments);","      });","    };","","    return mergedHooks;","  }, {});","};","","const filterNonExistentPaths = paths => {","  return Promise.all(paths.map(helpers.fsExists)).then(values => {","    // watched files","    return paths.filter((path, index) => values[index]);","  });","};","","// Filter paths that exist and watch them with `chokidar` package.","const getWatchedPaths = config => {","  const configs = config.paths.allConfigFiles;","  const pkg = config.packageInfo;","  const getFiles = pkgs => helpers.flatten(pkgs.components.map(c => c.files));","  const watched = config.paths.watched.concat(configs, getFiles(pkg.npm), getFiles(pkg.bower));","  return filterNonExistentPaths(watched);","};","","const setDefaultJobsCount = jobs => {","  const MAX_JOBS = 32;","  const env = process.env.BRUNCH_JOBS;","  if (!jobs && !env || jobs === true) return;","  // Mitigates Intel Hyperthreading.","  const str = jobs || env || cpus / 2;","  const int = Math.round(str);","  return isNaN(int) ||","    int < 1 ||","    int > MAX_JOBS ? 1 : int;","};","","/* persistent - Boolean: should brunch build the app only once or watch it?"," * options    - Object: {configPath, optimize, server, port}."," *              Only configPath is required."," * onCompile  - Function that will be executed after every successful"," *              compilation. May receive an array of `fs_utils.GeneratedFile`."," *"," * this.config is an application config."," * this._startTime is a mutable timestamp that represents latest compilation"," * start time. It is `null` when there are no compilations."," */","class BrunchWatcher {","  constructor(persistent, options, onCompile) {","    speed.profile('Created BrunchWatcher');","    this._constructorOptions = arguments;","    this._startTime = Date.now() - speed.sinceStart;","    this._isFirstRun = true;","    this._onReload = options._onReload;","    options.jobs = setDefaultJobsCount(options.jobs);","","    if (!persistent) {","      process.on('exit', previousCode => {","        const currentCode = logger.errorHappened ? 1 : previousCode;","        process.exit(currentCode);","      });","    }","","    application.loadConfig(persistent, options)","      .then(cfg => {","        this.config = cfg;","        if (options.jobs > 1) {","          workers.init(options, cfg);","        }","        return Promise.all([","          getWatchedPaths(cfg._normalized),","          serveBrunch.serve(cfg.server),","          plugins(cfg, options.dependencies),","        ]);","      })","      .then(res => {","        const cfg = this.config;","        const watchedPaths = res[0];","        this.server = res[1];","        const hooks = res[2].hooks;","        hooks.onCompile.push({onCompile});","        this.hooks = mergeHooks(hooks, cfg.hooks);","        const plugins = this.plugins = res[2].plugins;","","        pipeline.setPlugins(plugins.all);","        pipeline.setNpmCompilers(cfg.npm.compilers);","        deppack.setPlugins(plugins, cfg.npm.compilers);","","        return Promise.all(this.hooks.preCompile()).then(() => {","          this.initWatcher(watchedPaths);","          this.initCompilation();","        });","      })","      .catch(error => {","        if (typeof error === 'string') {","          // TODO: Title - init error.","          logger.error(error);","        } else {","          const text = error.code === 'CFG_LOAD_FAILED' ?","            error.message :","            `Initialization error - ${error.message.trim()}`;","          // TODO: Title - init error.","          logger.error(text, error);","        }","        process.exit(1);","      });","  }","","  initCompilation() {","    const cfg = this.config;","","    this.fileList = new FileList(cfg);","    this.fileList.on('ready', () => {","      if (this._startTime) {","        this.compile();","      }","    });","","    const rootPath = cfg.paths.root;","    this.plugins.includes.forEach(path => {","      const relPath = getRelativePath(rootPath, path);","","      // Emit `change` event for each file that is included with plugins.","      this.startCompilation('change', relPath);","      cfg.npm.static.push(relPath);","    });","","    Object.freeze(cfg.npm.static);","","    if (!cfg.persistent) return;","","    const emptyFileListInterval = 1000;","    const checkNothingToCompile = () => {","      if (!this.fileList.hasFiles) {","        logger.warn(`Nothing to compile. Most likely you don't have any source files yet, in which case, go ahead and create some!`);","      }","    };","","    clearTimeout(this.nothingToCompileTimer);","    this.nothingToCompileTimer = setTimeout(checkNothingToCompile, emptyFileListInterval);","","    if (cfg.stdin) {","      process.stdin.on('end', () => process.exit(0));","      process.stdin.resume();","    }","  }","","  exitProcessFromFile(reasonFile) {","    logger.info(`Detected removal of ${reasonFile}\\nExiting.`);","    process.exit(0);","  }","","  initWatcher(watchedPaths) {","    const isDebug = !!process.env.DEBUG;","    const config = this.config._normalized;","    const paths = config.paths;","    const isConfig = path => paths.allConfigFiles.includes(path);","","    speed.profile('Loaded watcher');","    this.watcher = chokidar.watch(watchedPaths, Object.assign({","      ignored,","      persistent: config.persistent,","    }, config.watcher))","      .on('error', error => {","        // TODO: Watch error.","        logger.error(error);","      })","      .on('add', absPath => {","        if (isDebug) debug(`add ${absPath}`);","","        const path = getRelativePath(paths.root, absPath);","        if (isConfig(path)) return; // Pass for the initial files.","        this.startCompilation('change', path);","      })","      .on('change', absPath => {","        if (isDebug) debug(`change ${absPath}`);","","        const path = getRelativePath(paths.root, absPath);","        if (path === paths.packageConfig) {","          this.restartBrunch('package');","        } else if (path === paths.bowerConfig) {","          this.restartBrunch('bower');","        } else if (isConfig(path)) {","          this.restartBrunch();","        } else {","          this.startCompilation('change', path);","        }","      })","      .on('unlink', absPath => {","        if (isDebug) debug(`unlink ${absPath}`);","","        const path = getRelativePath(paths.root, absPath);","        if (isConfig(path)) return this.exitProcessFromFile(path);","        this.startCompilation('unlink', path);","      })","      .once('ready', () => {","        speed.profile('Watcher is ready');","        this.watcherIsReady = true;","      });","  }","","  restartBrunch(pkgType) {","    const restart = () => {","      // we need this to keep compatibility with global `brunch` binaries","      // from older versions which didn't create a child process","      if (process.send && process.env.BRUNCH_FORKED_PROCESS === 'true') {","        process.send('reload');","      } else {","        const opts = this._constructorOptions;","        const newWatcher = new BrunchWatcher(opts[0], opts[1], opts[2]);","        if (this._onReload) this._onReload(newWatcher);","        return newWatcher;","      }","    };","","    const rootPath = this.config.paths.root;","    const reWatch = () => {","      logger.info('Reloading watcher...');","      this.hooks.teardown();","      const server = this.server;","      if (server && typeof server.close === 'function') {","        return server.close(restart);","      }","      return restart();","    };","","    clearTimeout(this.nothingToCompileTimer);","    this.fileList.dispose();","    this.watcher.close();","    workers.close();","","    return install({rootPath, pkgType}).then(reWatch, reWatch);","  }","","  compile() {","    const startTime = this._endCompilation();","    const config = this.config;","    const joinConfig = config._normalized.join;","    const fileList = this.fileList;","    const watcher = this.watcher;","    const optimizers = this.plugins.optimizers;","","    const assetErrors = fileList.assetErrors;","    if (assetErrors.length) {","      assetErrors.forEach(error => {","        // TODO: Title - asset processing error","        logger.error(error);","      });","      return;","    }","","    // Determine which files has been changed,","    // create new `fs_utils.GeneratedFile` instances and write them.","    write(fileList, config, joinConfig, optimizers, startTime).then(data => {","      const generatedFiles = data.changed;","      const disposed = data.disposed;","      fileList.removeDisposedFiles();","      this._endBundle();","      const assets = fileList.copiedAfter(startTime);","      logger.info(helpers.generateCompilationLog(","        startTime, assets, generatedFiles, disposed","      ));","","      // Pass `fs_utils.GeneratedFile` instances to callbacks.","      // Does not block the execution.","      this.hooks.onCompile(generatedFiles, assets);","    }, error => {","      this._endBundle();","      if (error.code === 'WRITE_FAILED') return; // Ignore write errors as they are logged already","","      if (!Array.isArray(error)) error = [error];","","      // Compilation, optimization, linting errors are logged here.","      error.forEach(subError => {","        // TODO: Title - pipeline error.","        logger.error(subError);","      });","","      const canTryRecover = error.find(err => err.code === 'DEPS_RESOLVE_INSTALL');","      if (canTryRecover) {","        logger.warn('Attempting to recover from failed NPM requires by running `npm install`...');","        this.restartBrunch('package');","      }","    }).then(() => {","      if (!this.watcherIsReady) return;","      // If its single non-continuous build, close file watcher and","      // exit process with correct exit code.","      if (!config.persistent) {","        watcher.close();","        workers.close();","      }","      fileList.initial = false;","    }).catch(logger.error);","  }","","  _createProgress() {","    if (this._compilationProgress || process.env.DEBUG) return false;","    const passedTime = this._isFirstRun && speed.sinceStart;","    this._compilationProgress = helpers.getCompilationProgress(","      passedTime, logger.info","    );","  }","","  // Set start time of last compilation to current time.","  // Returns number.","  startCompilation(type, path) {","    this.fileList.emit(type, path);","    this._createProgress();","    if (this._isFirstRun) {","      speed.profile('Starting compilation');","      this._isFirstRun = false;","    }","    if (!this._startTime) this._startTime = Date.now();","    return this._startTime;","  }","","  // Get last compilation start time and reset the state.","  // Returns number.","  _endCompilation() {","    const start = this._startTime;","    this._startTime = null;","    return start;","  }","","  _endBundle() {","    if (!this._compilationProgress) return;","    this._compilationProgress();","    this._compilationProgress = null;","  }","}","","const watch = (persistent, path, options, onCompile) => {","  if (!onCompile) onCompile = () => {};","","  // If path isn't provided (by CLI).","  if (path) {","    if (typeof path === 'string') {","      process.chdir(path);","    } else {","      if (typeof options === 'function') onCompile = options;","      options = path;","    }","  }","  return new BrunchWatcher(persistent, options, onCompile);","};","","module.exports = watch;",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"13":1,"14":1,"15":1,"16":1,"17":1,"19":1,"20":1,"21":1,"23":1,"24":0,"25":0,"26":0,"27":0,"31":1,"32":0,"33":0,"34":0,"35":0,"38":0,"40":0,"41":0,"45":0,"49":1,"50":0,"52":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"65":1,"66":0,"67":0,"68":0,"70":0,"71":0,"72":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"96":0,"97":0,"98":0,"99":0,"103":0,"105":0,"106":0,"107":0,"109":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"124":0,"125":0,"126":0,"128":0,"129":0,"130":0,"134":0,"136":0,"138":0,"142":0,"144":0,"149":0,"151":0,"152":0,"153":0,"154":0,"158":0,"159":0,"160":0,"163":0,"164":0,"167":0,"169":0,"171":0,"172":0,"173":0,"174":0,"178":0,"179":0,"181":0,"182":0,"183":0,"188":0,"189":0,"193":0,"194":0,"195":0,"196":0,"198":0,"199":0,"205":0,"208":0,"210":0,"211":0,"212":0,"215":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"225":0,"229":0,"231":0,"232":0,"233":0,"236":0,"237":0,"242":0,"245":0,"246":0,"248":0,"249":0,"250":0,"251":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"263":0,"266":0,"267":0,"268":0,"269":0,"271":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"282":0,"283":0,"284":0,"286":0,"288":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"305":0,"307":0,"308":0,"310":0,"313":0,"315":0,"318":0,"319":0,"320":0,"321":0,"324":0,"327":0,"328":0,"329":0,"331":0,"336":0,"337":0,"338":0,"346":0,"347":0,"348":0,"349":0,"350":0,"352":0,"353":0,"359":0,"360":0,"361":0,"365":0,"366":0,"367":0,"371":1,"372":0,"375":0,"376":0,"377":0,"379":0,"380":0,"383":0,"386":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/workers/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/workers/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":1,"20":0,"21":0,"22":0,"23":1,"24":2},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":43}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":12}},"4":{"start":{"line":7,"column":0},"end":{"line":13,"column":2}},"5":{"start":{"line":8,"column":2},"end":{"line":8,"column":67}},"6":{"start":{"line":9,"column":2},"end":{"line":9,"column":70}},"7":{"start":{"line":10,"column":2},"end":{"line":10,"column":17}},"8":{"start":{"line":11,"column":2},"end":{"line":11,"column":25}},"9":{"start":{"line":12,"column":2},"end":{"line":12,"column":14}},"10":{"start":{"line":25,"column":0},"end":{"line":33,"column":2}},"11":{"start":{"line":26,"column":2},"end":{"line":26,"column":47}},"12":{"start":{"line":26,"column":31},"end":{"line":26,"column":47}},"13":{"start":{"line":27,"column":2},"end":{"line":29,"column":3}},"14":{"start":{"line":28,"column":4},"end":{"line":28,"column":67}},"15":{"start":{"line":30,"column":2},"end":{"line":32,"column":5}},"16":{"start":{"line":31,"column":4},"end":{"line":31,"column":28}},"17":{"start":{"line":35,"column":0},"end":{"line":37,"column":2}},"18":{"start":{"line":36,"column":2},"end":{"line":36,"column":44}},"19":{"start":{"line":39,"column":0},"end":{"line":44,"column":2}},"20":{"start":{"line":40,"column":2},"end":{"line":43,"column":3}},"21":{"start":{"line":41,"column":4},"end":{"line":41,"column":20}},"22":{"start":{"line":42,"column":4},"end":{"line":42,"column":19}},"23":{"start":{"line":46,"column":0},"end":{"line":48,"column":2}},"24":{"start":{"line":47,"column":2},"end":{"line":47,"column":12}}},"branchMap":{"1":{"line":8,"type":"cond-expr","locations":[{"start":{"line":8,"column":42},"end":{"line":8,"column":58}},{"start":{"line":8,"column":61},"end":{"line":8,"column":66}}]},"2":{"line":9,"type":"cond-expr","locations":[{"start":{"line":9,"column":24},"end":{"line":9,"column":44}},{"start":{"line":9,"column":47},"end":{"line":9,"column":69}}]},"3":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":26,"column":2}},{"start":{"line":26,"column":2},"end":{"line":26,"column":2}}]},"4":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":2},"end":{"line":27,"column":2}},{"start":{"line":27,"column":2},"end":{"line":27,"column":2}}]},"5":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":40,"column":2}},{"start":{"line":40,"column":2},"end":{"line":40,"column":2}}]}},"code":["'use strict';","const WorkerManager = require('./manager');","const jobs = require('./jobs');","","let manager;","","const cleanError = (error, coerce) => {","  const err = typeof error === 'string' ? new Error(error) : error;","  const data = coerce ? {error: err.message} : new Error(err.message);","  data.name = '';","  data.stack = err.stack;","  return data;","};","","/*"," * A job is described by:"," *"," * - `serialize`, which takes some hash and produces a hash to be sent as JSON (always executed in main process);"," * - `deserialize`, which takes the hash from the step above and should produce the original hash passed to serialize (always executed in worker process). To aid reconstructing original hash, ctx is passed (which contains all loaded plugins; we needed it to select appropriate plugins for a given file to compile)"," * - `work`: actually perform the work, can be called in both master and worker."," */","","// Schedule a job for processing. If workers are enabled, will schedule that.","// Otherwise, just run the work function.","exports.processJob = (job, hash) => {","  if (typeof job === 'string') job = jobs[job];","  if (manager) {","    return manager.schedule(job.path, {hash: job.serialize(hash)});","  }","  return job.work(hash).then(null, error => {","    throw cleanError(error);","  });","};","","exports.init = (options, cfg) => {","  manager = new WorkerManager(options, cfg);","};","","exports.close = () => {","  if (manager) {","    manager.close();","    manager = null;","  }","};","","exports.parallel = (id, fn) => {","  return fn;","};",""],"l":{"2":1,"3":1,"5":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"25":1,"26":0,"27":0,"28":0,"30":0,"31":0,"35":1,"36":0,"39":1,"40":0,"41":0,"42":0,"46":1,"47":2}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/workers/manager.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/workers/manager.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":15,"loc":{"start":{"line":15,"column":13},"end":{"line":15,"column":31}}},"2":{"name":"(anonymous_2)","line":29,"loc":{"start":{"line":29,"column":6},"end":{"line":29,"column":9}}},"3":{"name":"(anonymous_3)","line":54,"loc":{"start":{"line":54,"column":7},"end":{"line":54,"column":10}}},"4":{"name":"(anonymous_4)","line":62,"loc":{"start":{"line":62,"column":10},"end":{"line":62,"column":23}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":19},"end":{"line":82,"column":22}}},"6":{"name":"(anonymous_6)","line":86,"loc":{"start":{"line":86,"column":13},"end":{"line":86,"column":16}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":43}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":49}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":51}},"5":{"start":{"line":8,"column":0},"end":{"line":12,"column":5}},"6":{"start":{"line":9,"column":2},"end":{"line":9,"column":18}},"7":{"start":{"line":11,"column":2},"end":{"line":11,"column":25}},"8":{"start":{"line":11,"column":15},"end":{"line":11,"column":24}},"9":{"start":{"line":16,"column":4},"end":{"line":16,"column":19}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":22}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":22}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":37}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":27}},"14":{"start":{"line":21,"column":4},"end":{"line":21,"column":25}},"15":{"start":{"line":23,"column":4},"end":{"line":23,"column":28}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":38}},"17":{"start":{"line":25,"column":4},"end":{"line":25,"column":31}},"18":{"start":{"line":25,"column":19},"end":{"line":25,"column":31}},"19":{"start":{"line":26,"column":4},"end":{"line":26,"column":58}},"20":{"start":{"line":26,"column":38},"end":{"line":26,"column":56}},"21":{"start":{"line":30,"column":4},"end":{"line":30,"column":30}},"22":{"start":{"line":31,"column":4},"end":{"line":31,"column":33}},"23":{"start":{"line":33,"column":4},"end":{"line":33,"column":68}},"24":{"start":{"line":35,"column":4},"end":{"line":35,"column":64}},"25":{"start":{"line":36,"column":4},"end":{"line":36,"column":58}},"26":{"start":{"line":37,"column":4},"end":{"line":37,"column":43}},"27":{"start":{"line":38,"column":4},"end":{"line":38,"column":31}},"28":{"start":{"line":39,"column":4},"end":{"line":39,"column":12}},"29":{"start":{"line":40,"column":4},"end":{"line":51,"column":7}},"30":{"start":{"line":41,"column":6},"end":{"line":50,"column":7}},"31":{"start":{"line":42,"column":8},"end":{"line":42,"column":26}},"32":{"start":{"line":43,"column":8},"end":{"line":43,"column":35}},"33":{"start":{"line":44,"column":8},"end":{"line":44,"column":39}},"34":{"start":{"line":45,"column":8},"end":{"line":45,"column":29}},"35":{"start":{"line":47,"column":8},"end":{"line":47,"column":32}},"36":{"start":{"line":48,"column":8},"end":{"line":48,"column":29}},"37":{"start":{"line":49,"column":8},"end":{"line":49,"column":29}},"38":{"start":{"line":55,"column":4},"end":{"line":55,"column":29}},"39":{"start":{"line":56,"column":4},"end":{"line":56,"column":33}},"40":{"start":{"line":57,"column":4},"end":{"line":57,"column":58}},"41":{"start":{"line":57,"column":35},"end":{"line":57,"column":56}},"42":{"start":{"line":63,"column":4},"end":{"line":63,"column":23}},"43":{"start":{"line":64,"column":4},"end":{"line":64,"column":39}},"44":{"start":{"line":66,"column":4},"end":{"line":79,"column":7}},"45":{"start":{"line":67,"column":6},"end":{"line":78,"column":9}},"46":{"start":{"line":68,"column":8},"end":{"line":77,"column":9}},"47":{"start":{"line":69,"column":10},"end":{"line":69,"column":35}},"48":{"start":{"line":71,"column":10},"end":{"line":71,"column":50}},"49":{"start":{"line":72,"column":10},"end":{"line":72,"column":26}},"50":{"start":{"line":73,"column":10},"end":{"line":75,"column":11}},"51":{"start":{"line":74,"column":12},"end":{"line":74,"column":85}},"52":{"start":{"line":76,"column":10},"end":{"line":76,"column":24}},"53":{"start":{"line":83,"column":4},"end":{"line":83,"column":78}},"54":{"start":{"line":83,"column":49},"end":{"line":83,"column":76}},"55":{"start":{"line":87,"column":4},"end":{"line":87,"column":41}},"56":{"start":{"line":88,"column":4},"end":{"line":88,"column":27}},"57":{"start":{"line":88,"column":20},"end":{"line":88,"column":27}},"58":{"start":{"line":89,"column":4},"end":{"line":89,"column":32}},"59":{"start":{"line":90,"column":4},"end":{"line":90,"column":21}},"60":{"start":{"line":90,"column":14},"end":{"line":90,"column":21}},"61":{"start":{"line":91,"column":4},"end":{"line":91,"column":43}},"62":{"start":{"line":93,"column":4},"end":{"line":93,"column":22}},"63":{"start":{"line":94,"column":4},"end":{"line":94,"column":24}},"64":{"start":{"line":96,"column":4},"end":{"line":96,"column":33}},"65":{"start":{"line":97,"column":4},"end":{"line":97,"column":22}},"66":{"start":{"line":101,"column":0},"end":{"line":101,"column":31}}},"branchMap":{"1":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":6},"end":{"line":41,"column":6}},{"start":{"line":41,"column":6},"end":{"line":41,"column":6}}]},"2":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":68,"column":8}},{"start":{"line":68,"column":8},"end":{"line":68,"column":8}}]},"3":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":10},"end":{"line":73,"column":10}},{"start":{"line":73,"column":10},"end":{"line":73,"column":10}}]},"4":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":4},"end":{"line":88,"column":4}},{"start":{"line":88,"column":4},"end":{"line":88,"column":4}}]},"5":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":4},"end":{"line":90,"column":4}},{"start":{"line":90,"column":4},"end":{"line":90,"column":4}}]}},"code":["'use strict';","const fork = require('child_process').fork;","const EventEmitter = require('events');","const debug = require('debug')('brunch:workers');","","const workerFile = `${__dirname}/job-processor.js`;","","const genId = (() => {","  let counter = 0;","","  return () => counter++;","})();","","class WorkerManager {","  constructor(options, config) {","    this.jobs = [];","    this.workers = [];","    this.pending = {};","    this.events = new EventEmitter();","    this.options = options;","    this.config = config;","","    let jobs = options.jobs;","    debug(`Spinning ${jobs} workers`);","    while (jobs--) this.fork();","    this._checker = setInterval(() => this.sendMessage());","  }","","  fork() {","    const list = this.workers;","    const pending = this.pending;","    // remove the circular reference in parsed options","    const options = Object.assign({}, this.options, {parent: null});","    // pass parsed options to not make each worker parse the options","    const workerEnv = {BRUNCH_OPTIONS: JSON.stringify(options)};","    const env = Object.assign({}, process.env, workerEnv);","    const worker = fork(workerFile, {env});","    const events = this.events;","    let idx;","    worker.on('message', msg => {","      if (msg === 'ready') {","        list.push(worker);","        idx = list.indexOf(worker);","        debug(`Worker ${idx} spawned`);","        pending[idx] = false;","      } else {","        const id = pending[idx];","        pending[idx] = false;","        events.emit(id, msg);","      }","    });","  }","","  close() {","    debug('Killing workers');","    clearInterval(this._checker);","    this.workers.forEach(worker => worker.kill('SIGINT'));","  }","","  // schedule a `type` operation with `data` for processing","  // returns a promise which will yield the results of the computation","  schedule(type, data) {","    const id = genId();","    this.jobs.push([id, {type, data}]);","","    return new Promise((resolve, reject) => {","      this.events.once(id, response => {","        if ('result' in response) {","          resolve(response.result);","        } else {","          const error = new Error(response.error);","          error.name = '';","          if (response.stack) {","            error.stack = `\\nWorker ${response.stack}\\n\\nMain thread ${error.stack}`;","          }","          reject(error);","        }","      });","    });","  }","","  get freeWorkerIdx() {","    return Object.keys(this.workers).find(idx => this.pending[idx] === false);","  }","","  sendMessage() {","    const workerIdx = this.freeWorkerIdx;","    if (!workerIdx) return;","    const job = this.jobs.pop();","    if (!job) return;","    const worker = this.workers[workerIdx];","","    const id = job[0];","    const data = job[1];","","    this.pending[workerIdx] = id;","    worker.send(data);","  }","}","","module.exports = WorkerManager;",""],"l":{"2":1,"3":1,"4":1,"6":1,"8":1,"9":1,"11":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"23":0,"24":0,"25":0,"26":0,"30":0,"31":0,"33":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"47":0,"48":0,"49":0,"55":0,"56":0,"57":0,"63":0,"64":0,"66":0,"67":0,"68":0,"69":0,"71":0,"72":0,"73":0,"74":0,"76":0,"83":0,"87":0,"88":0,"89":0,"90":0,"91":0,"93":0,"94":0,"96":0,"97":0,"101":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/workers/jobs.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/workers/jobs.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":10,"loc":{"start":{"line":10,"column":11},"end":{"line":10,"column":18}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":13},"end":{"line":16,"column":25}}},"3":{"name":"(anonymous_3)","line":29,"loc":{"start":{"line":29,"column":6},"end":{"line":29,"column":13}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":49}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":51}},"4":{"start":{"line":7,"column":0},"end":{"line":35,"column":2}},"5":{"start":{"line":11,"column":4},"end":{"line":11,"column":54}},"6":{"start":{"line":12,"column":4},"end":{"line":12,"column":31}},"7":{"start":{"line":13,"column":4},"end":{"line":13,"column":88}},"8":{"start":{"line":17,"column":4},"end":{"line":17,"column":94}},"9":{"start":{"line":17,"column":55},"end":{"line":17,"column":92}},"10":{"start":{"line":19,"column":4},"end":{"line":21,"column":6}},"11":{"start":{"line":20,"column":6},"end":{"line":20,"column":84}},"12":{"start":{"line":23,"column":4},"end":{"line":23,"column":31}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":50}},"14":{"start":{"line":26,"column":4},"end":{"line":26,"column":31}},"15":{"start":{"line":30,"column":4},"end":{"line":30,"column":37}},"16":{"start":{"line":31,"column":4},"end":{"line":31,"column":29}},"17":{"start":{"line":33,"column":4},"end":{"line":33,"column":36}}},"branchMap":{},"code":["'use strict';","","const smap = require('source-map');","const SourceMapConsumer = smap.SourceMapConsumer;","const SourceMapGenerator = smap.SourceMapGenerator;","","exports.OptimizeJob = {","  path: 'OptimizeJob',","","  serialize(hash) {","    const optimizer = hash.optimizer.brunchPluginName;","    const params = hash.params;","    return {optimizer, params: {data: params.data, map: params.map, path: params.path}};","  },","","  deserialize(ctx, hash) {","    const optimizer = ctx.plugins.optimizers.find(p => p.brunchPluginName === hash.optimizer);","","    const deserializeSourceMap = serializedMap => {","      return SourceMapGenerator.fromSourceMap(new SourceMapConsumer(serializedMap));","    };","","    const params = hash.params;","    params.map = deserializeSourceMap(params.map);","","    return {optimizer, params};","  },","","  work(hash) {","    const optimizer = hash.optimizer;","    const file = hash.params;","","    return optimizer.optimize(file);","  },","};",""],"l":{"3":1,"4":1,"5":1,"7":1,"11":0,"12":0,"13":0,"17":0,"19":0,"20":0,"23":0,"24":0,"26":0,"30":0,"31":0,"33":0}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/write.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/write.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":47}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":32}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":35}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":60}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":39}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":46}},"8":{"start":{"line":12,"column":0},"end":{"line":14,"column":2}},"9":{"start":{"line":12,"column":34},"end":{"line":14,"column":1}},"10":{"start":{"line":13,"column":2},"end":{"line":13,"column":89}},"11":{"start":{"line":13,"column":44},"end":{"line":13,"column":87}},"12":{"start":{"line":16,"column":0},"end":{"line":26,"column":2}},"13":{"start":{"line":17,"column":2},"end":{"line":17,"column":53}},"14":{"start":{"line":18,"column":2},"end":{"line":25,"column":7}},"15":{"start":{"line":20,"column":6},"end":{"line":20,"column":42}},"16":{"start":{"line":20,"column":35},"end":{"line":20,"column":42}},"17":{"start":{"line":21,"column":6},"end":{"line":21,"column":49}},"18":{"start":{"line":21,"column":20},"end":{"line":21,"column":49}},"19":{"start":{"line":23,"column":6},"end":{"line":23,"column":48}},"20":{"start":{"line":24,"column":6},"end":{"line":24,"column":27}},"21":{"start":{"line":28,"column":0},"end":{"line":56,"column":2}},"22":{"start":{"line":29,"column":2},"end":{"line":41,"column":4}},"23":{"start":{"line":30,"column":4},"end":{"line":30,"column":58}},"24":{"start":{"line":30,"column":51},"end":{"line":30,"column":58}},"25":{"start":{"line":31,"column":4},"end":{"line":31,"column":42}},"26":{"start":{"line":32,"column":4},"end":{"line":40,"column":6}},"27":{"start":{"line":43,"column":2},"end":{"line":49,"column":9}},"28":{"start":{"line":44,"column":4},"end":{"line":44,"column":41}},"29":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"30":{"start":{"line":46,"column":6},"end":{"line":46,"column":48}},"31":{"start":{"line":48,"column":4},"end":{"line":48,"column":19}},"32":{"start":{"line":52,"column":2},"end":{"line":52,"column":36}},"33":{"start":{"line":52,"column":21},"end":{"line":52,"column":36}},"34":{"start":{"line":54,"column":2},"end":{"line":54,"column":51}},"35":{"start":{"line":55,"column":2},"end":{"line":55,"column":56}},"36":{"start":{"line":55,"column":29},"end":{"line":55,"column":54}},"37":{"start":{"line":58,"column":0},"end":{"line":91,"column":2}},"38":{"start":{"line":59,"column":2},"end":{"line":59,"column":24}},"39":{"start":{"line":61,"column":2},"end":{"line":78,"column":5}},"40":{"start":{"line":62,"column":4},"end":{"line":62,"column":41}},"41":{"start":{"line":64,"column":4},"end":{"line":77,"column":7}},"42":{"start":{"line":65,"column":6},"end":{"line":65,"column":40}},"43":{"start":{"line":67,"column":6},"end":{"line":67,"column":38}},"44":{"start":{"line":68,"column":6},"end":{"line":68,"column":59}},"45":{"start":{"line":69,"column":6},"end":{"line":69,"column":68}},"46":{"start":{"line":70,"column":6},"end":{"line":76,"column":9}},"47":{"start":{"line":71,"column":8},"end":{"line":71,"column":82}},"48":{"start":{"line":72,"column":8},"end":{"line":75,"column":11}},"49":{"start":{"line":73,"column":10},"end":{"line":73,"column":62}},"50":{"start":{"line":73,"column":40},"end":{"line":73,"column":62}},"51":{"start":{"line":74,"column":10},"end":{"line":74,"column":40}},"52":{"start":{"line":80,"column":2},"end":{"line":90,"column":5}},"53":{"start":{"line":81,"column":4},"end":{"line":81,"column":50}},"54":{"start":{"line":82,"column":4},"end":{"line":82,"column":62}},"55":{"start":{"line":82,"column":49},"end":{"line":82,"column":60}},"56":{"start":{"line":83,"column":4},"end":{"line":83,"column":47}},"57":{"start":{"line":84,"column":4},"end":{"line":84,"column":70}},"58":{"start":{"line":84,"column":25},"end":{"line":84,"column":69}},"59":{"start":{"line":85,"column":4},"end":{"line":87,"column":9}},"60":{"start":{"line":86,"column":33},"end":{"line":86,"column":78}},"61":{"start":{"line":88,"column":4},"end":{"line":88,"column":70}},"62":{"start":{"line":89,"column":4},"end":{"line":89,"column":62}},"63":{"start":{"line":93,"column":0},"end":{"line":115,"column":2}},"64":{"start":{"line":94,"column":2},"end":{"line":94,"column":31}},"65":{"start":{"line":95,"column":2},"end":{"line":100,"column":5}},"66":{"start":{"line":96,"column":4},"end":{"line":99,"column":7}},"67":{"start":{"line":97,"column":6},"end":{"line":97,"column":79}},"68":{"start":{"line":97,"column":43},"end":{"line":97,"column":79}},"69":{"start":{"line":98,"column":6},"end":{"line":98,"column":55}},"70":{"start":{"line":102,"column":2},"end":{"line":114,"column":5}},"71":{"start":{"line":103,"column":4},"end":{"line":103,"column":52}},"72":{"start":{"line":103,"column":20},"end":{"line":103,"column":52}},"73":{"start":{"line":104,"column":4},"end":{"line":113,"column":5}},"74":{"start":{"line":105,"column":6},"end":{"line":112,"column":9}},"75":{"start":{"line":106,"column":8},"end":{"line":106,"column":26}},"76":{"start":{"line":106,"column":19},"end":{"line":106,"column":26}},"77":{"start":{"line":107,"column":8},"end":{"line":107,"column":42}},"78":{"start":{"line":108,"column":8},"end":{"line":108,"column":57}},"79":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"80":{"start":{"line":110,"column":10},"end":{"line":110,"column":99}},"81":{"start":{"line":117,"column":0},"end":{"line":129,"column":2}},"82":{"start":{"line":118,"column":2},"end":{"line":118,"column":43}},"83":{"start":{"line":119,"column":2},"end":{"line":119,"column":56}},"84":{"start":{"line":119,"column":26},"end":{"line":119,"column":56}},"85":{"start":{"line":121,"column":2},"end":{"line":121,"column":54}},"86":{"start":{"line":122,"column":2},"end":{"line":122,"column":82}},"87":{"start":{"line":122,"column":37},"end":{"line":122,"column":80}},"88":{"start":{"line":123,"column":2},"end":{"line":123,"column":50}},"89":{"start":{"line":123,"column":39},"end":{"line":123,"column":48}},"90":{"start":{"line":124,"column":2},"end":{"line":124,"column":50}},"91":{"start":{"line":124,"column":38},"end":{"line":124,"column":48}},"92":{"start":{"line":126,"column":2},"end":{"line":126,"column":90}},"93":{"start":{"line":128,"column":2},"end":{"line":128,"column":50}},"94":{"start":{"line":131,"column":0},"end":{"line":172,"column":2}},"95":{"start":{"line":132,"column":2},"end":{"line":132,"column":55}},"96":{"start":{"line":133,"column":2},"end":{"line":133,"column":43}},"97":{"start":{"line":134,"column":2},"end":{"line":140,"column":39}},"98":{"start":{"line":136,"column":6},"end":{"line":138,"column":26}},"99":{"start":{"line":137,"column":21},"end":{"line":137,"column":36}},"100":{"start":{"line":140,"column":22},"end":{"line":140,"column":33}},"101":{"start":{"line":142,"column":2},"end":{"line":145,"column":3}},"102":{"start":{"line":143,"column":4},"end":{"line":143,"column":37}},"103":{"start":{"line":144,"column":4},"end":{"line":144,"column":68}},"104":{"start":{"line":147,"column":2},"end":{"line":147,"column":56}},"105":{"start":{"line":148,"column":2},"end":{"line":148,"column":59}},"106":{"start":{"line":151,"column":2},"end":{"line":151,"column":52}},"107":{"start":{"line":152,"column":2},"end":{"line":163,"column":5}},"108":{"start":{"line":153,"column":4},"end":{"line":153,"column":49}},"109":{"start":{"line":154,"column":4},"end":{"line":160,"column":9}},"110":{"start":{"line":155,"column":22},"end":{"line":155,"column":34}},"111":{"start":{"line":157,"column":8},"end":{"line":157,"column":43}},"112":{"start":{"line":158,"column":8},"end":{"line":158,"column":63}},"113":{"start":{"line":159,"column":8},"end":{"line":159,"column":23}},"114":{"start":{"line":162,"column":4},"end":{"line":162,"column":72}},"115":{"start":{"line":162,"column":54},"end":{"line":162,"column":70}},"116":{"start":{"line":165,"column":2},"end":{"line":171,"column":5}},"117":{"start":{"line":166,"column":4},"end":{"line":166,"column":65}},"118":{"start":{"line":168,"column":4},"end":{"line":168,"column":52}},"119":{"start":{"line":170,"column":4},"end":{"line":170,"column":31}},"120":{"start":{"line":174,"column":0},"end":{"line":174,"column":23}}},"branchMap":{"1":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":44},"end":{"line":13,"column":74}},{"start":{"line":13,"column":78},"end":{"line":13,"column":87}}]},"2":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":6}},{"start":{"line":20,"column":6},"end":{"line":20,"column":6}}]},"3":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":6},"end":{"line":21,"column":6}},{"start":{"line":21,"column":6},"end":{"line":21,"column":6}}]},"4":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"5":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":26}},{"start":{"line":30,"column":30},"end":{"line":30,"column":49}}]},"6":{"line":38,"type":"cond-expr","locations":[{"start":{"line":38,"column":27},"end":{"line":38,"column":38}},{"start":{"line":38,"column":41},"end":{"line":38,"column":52}}]},"7":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"8":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":2},"end":{"line":52,"column":2}},{"start":{"line":52,"column":2},"end":{"line":52,"column":2}}]},"9":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":10},"end":{"line":73,"column":10}},{"start":{"line":73,"column":10},"end":{"line":73,"column":10}}]},"10":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":17},"end":{"line":83,"column":27}},{"start":{"line":83,"column":31},"end":{"line":83,"column":46}}]},"11":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":25},"end":{"line":84,"column":46}},{"start":{"line":84,"column":50},"end":{"line":84,"column":69}}]},"12":{"line":85,"type":"cond-expr","locations":[{"start":{"line":86,"column":6},"end":{"line":86,"column":79}},{"start":{"line":87,"column":6},"end":{"line":87,"column":8}}]},"13":{"line":86,"type":"binary-expr","locations":[{"start":{"line":86,"column":33},"end":{"line":86,"column":48}},{"start":{"line":86,"column":52},"end":{"line":86,"column":64}},{"start":{"line":86,"column":68},"end":{"line":86,"column":78}}]},"14":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":6},"end":{"line":97,"column":6}},{"start":{"line":97,"column":6},"end":{"line":97,"column":6}}]},"15":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"16":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":104,"column":4}},{"start":{"line":104,"column":4},"end":{"line":104,"column":4}}]},"17":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"18":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":27},"end":{"line":108,"column":50}},{"start":{"line":108,"column":54},"end":{"line":108,"column":56}}]},"19":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":109,"column":8}},{"start":{"line":109,"column":8},"end":{"line":109,"column":8}}]},"20":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":12},"end":{"line":109,"column":43}},{"start":{"line":109,"column":47},"end":{"line":109,"column":58}}]},"21":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":2},"end":{"line":119,"column":2}},{"start":{"line":119,"column":2},"end":{"line":119,"column":2}}]},"22":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":37},"end":{"line":122,"column":67}},{"start":{"line":122,"column":71},"end":{"line":122,"column":80}}]},"23":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":2},"end":{"line":142,"column":2}},{"start":{"line":142,"column":2},"end":{"line":142,"column":2}}]}},"code":["'use strict';","const debug = require('debug')('brunch:write');","const sysPath = require('universal-path');","const logger = require('loggy');","","const deppack = require('deppack'); // getAllDependents","const formatError = require('../utils/helpers').formatError;","const generate = require('./generate');","const BrunchError = require('../utils/error');","","// For use in `.filter()`.","const changedSince = startTime => generated => {","  return generated.allSourceFiles.some(f => f.compilationTime >= startTime || f.removed);","};","","const getPaths = (type, isHelper, path, sourceFileJoinConfig) => {","  const helpers = sourceFileJoinConfig.pluginHelpers;","  return Object.keys(sourceFileJoinConfig)","    .filter(key /* generatedFilePath */ => {","      if (key === 'pluginHelpers') return;","      if (isHelper) return helpers.includes(key);","","      const checker = sourceFileJoinConfig[key];","      return checker(path);","    });","};","","const filterTargetsForEntry = (files, type, entry) => {","  const makeTarget = (file, target) => {","    if (file.error == null && target.data == null) return;","    const mainTarget = file.type === type;","    return {","      path: file.path,","      data: target.data,","      node: target.node,","      type,","      isHelper: file.isHelper,","      source: mainTarget ? file.source : target.data,","      file,","    };","  };","","  const targets = files.reduce((targets, file) => {","    const rawTarget = file.targets[type];","    if (rawTarget) {","      targets.push(makeTarget(file, rawTarget));","    }","    return targets;","  }, []);","","  // special entry point for joinTo - return all targets of matching type","  if (entry === '*') return targets;","  // otherwise, if normal entry point, gather its deps","  const depPaths = deppack.getAllDependents(entry);","  return targets.filter(t => depPaths.includes(t.path));","};","","const getFiles = (fileList, config, joinConfig) => {","  const _targetMap = {};","","  Object.keys(joinConfig).forEach(type => {","    const entryPoints = joinConfig[type];","","    Object.keys(entryPoints).map(entry => {","      const subCfg = entryPoints[entry];","","      const ftype = type.slice(0, -1); // javascripts -> javascript","      const allFiles = Array.from(fileList.files.values());","      const targets = filterTargetsForEntry(allFiles, ftype, entry);","      targets.forEach(target => {","        const paths = getPaths(target.type, target.isHelper, target.path, subCfg);","        paths.forEach(path => {","          if (_targetMap[path] == null) _targetMap[path] = [];","          _targetMap[path].push(target);","        });","      });","    });","  });","","  return Object.keys(_targetMap).map(generatedFilePath => {","    const targets = _targetMap[generatedFilePath];","    const allSourceFiles = targets.map(target => target.file);","    const type = targets[0] && targets[0].type;","    const isJs = type => type === 'javascript' || type === 'template';","    const sourceFiles = type ?","      allSourceFiles.filter(f => f.type === type || isJs(f.type) && isJs(type)) :","      [];","    const path = sysPath.join(config.paths.public, generatedFilePath);","    return {allSourceFiles, sourceFiles, path, targets, type};","  });","};","","const checkWritten = (fileList, files, startTime) => {","  const allWrittenTargets = {};","  files.map(file => {","    file.targets.forEach(target => {","      if (!allWrittenTargets[target.type]) allWrittenTargets[target.type] = [];","      allWrittenTargets[target.type].push(target.path);","    });","  });","","  fileList.files.forEach(file => {","    if (file.error) logger.error(formatError(file));","    if (file.compilationTime >= startTime) {","      Object.keys(file.targets).forEach(type => {","        if (!type) return;","        const target = file.targets[type];","        const allTargets = allWrittenTargets[type] || [];","        if (!allTargets.includes(file.path) && target.data) {","          logger.warn(`${file.path} compiled, but not written. Check your ${type}s.joinTo config`);","        }","      });","    }","  });","};","","const writeStatic = (fileList, config, startTime) => {","  const assetErrors = fileList.assetErrors;","  if (assetErrors.length) throw assetErrors.join(' ; ');","","  const assets = Array.from(fileList.assets.values());","  const changed = assets.filter(f => f.compilationTime >= startTime || f.removed);","  const toRemove = changed.filter(f => f.removed);","  const toWrite = changed.filter(f => !f.removed);","","  debug(`Writing ${toWrite.length}/${assets.length} assets, removing ${toRemove.length}`);","","  return generate.writeStatics(toRemove, toWrite);","};","","const write = (fileList, config, joinConfig, optimizers, startTime) => {","  const files = getFiles(fileList, config, joinConfig);","  checkWritten(fileList, files, startTime);","  const errors = files","    .map(generated => {","      return generated.sourceFiles","        .filter(f => f.error != null)","        .map(formatError);","    })","    .reduce((a, b) => a.concat(b), []);","","  if (errors.length) {","    const error = errors.join(' ; ');","    return Promise.reject(new BrunchError('WRITE_FAILED', {error}));","  }","","  const changed = files.filter(changedSince(startTime));","  debug(`Writing ${changed.length}/${files.length} files`);","","  // Remove files marked as such and dispose them, clean memory.","  const disposed = {generated: [], sourcePaths: []};","  changed.forEach(generated => {","    const sourceFiles = generated.allSourceFiles;","    sourceFiles","      .filter(file => file.removed)","      .forEach(file => {","        disposed.generated.push(generated);","        disposed.sourcePaths.push(sysPath.basename(file.path));","        file.dispose();","      });","","    generated.targets = generated.targets.filter(x => !x.file.disposed);","  });","","  return Promise.all(changed.map(file => {","    return generate(file.path, file.targets, config, optimizers);","  })).then(() => {","    return writeStatic(fileList, config, startTime);","  }).then(() => {","    return {changed, disposed};","  });","};","","module.exports = write;",""],"l":{"2":1,"3":1,"4":1,"6":1,"7":1,"8":1,"9":1,"12":1,"13":0,"16":1,"17":0,"18":0,"20":0,"21":0,"23":0,"24":0,"28":1,"29":0,"30":0,"31":0,"32":0,"43":0,"44":0,"45":0,"46":0,"48":0,"52":0,"54":0,"55":0,"58":1,"59":0,"61":0,"62":0,"64":0,"65":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"88":0,"89":0,"93":1,"94":0,"95":0,"96":0,"97":0,"98":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"117":1,"118":0,"119":0,"121":0,"122":0,"123":0,"124":0,"126":0,"128":0,"131":1,"132":0,"133":0,"134":0,"136":0,"137":0,"140":0,"142":0,"143":0,"144":0,"147":0,"148":0,"151":0,"152":0,"153":0,"154":0,"155":0,"157":0,"158":0,"159":0,"162":0,"165":0,"166":0,"168":0,"170":0,"174":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/helpers.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/helpers.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":1,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":1,"105":1,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":1,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":1,"134":0,"135":0,"136":0,"137":1,"138":0,"139":0,"140":0,"141":1,"142":0,"143":0,"144":0,"145":0,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":1},"b":{"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":216,"loc":{"start":{"line":216,"column":5},"end":{"line":216,"column":11}}},"2":{"name":"(anonymous_2)","line":222,"loc":{"start":{"line":222,"column":5},"end":{"line":222,"column":13}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":52}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":45}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":47}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":49}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":52}},"6":{"start":{"line":8,"column":25},"end":{"line":8,"column":51}},"7":{"start":{"line":10,"column":0},"end":{"line":28,"column":2}},"8":{"start":{"line":11,"column":2},"end":{"line":13,"column":17}},"9":{"start":{"line":13,"column":11},"end":{"line":13,"column":15}},"10":{"start":{"line":15,"column":2},"end":{"line":25,"column":5}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":30}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":64}},"13":{"start":{"line":18,"column":4},"end":{"line":24,"column":5}},"14":{"start":{"line":19,"column":6},"end":{"line":19,"column":31}},"15":{"start":{"line":20,"column":6},"end":{"line":20,"column":52}},"16":{"start":{"line":20,"column":26},"end":{"line":20,"column":52}},"17":{"start":{"line":21,"column":6},"end":{"line":21,"column":40}},"18":{"start":{"line":23,"column":6},"end":{"line":23,"column":26}},"19":{"start":{"line":27,"column":2},"end":{"line":27,"column":16}},"20":{"start":{"line":30,"column":0},"end":{"line":35,"column":2}},"21":{"start":{"line":31,"column":2},"end":{"line":31,"column":76}},"22":{"start":{"line":31,"column":35},"end":{"line":31,"column":74}},"23":{"start":{"line":31,"column":59},"end":{"line":31,"column":73}},"24":{"start":{"line":32,"column":2},"end":{"line":34,"column":5}},"25":{"start":{"line":33,"column":4},"end":{"line":33,"column":49}},"26":{"start":{"line":33,"column":28},"end":{"line":33,"column":32}},"27":{"start":{"line":33,"column":43},"end":{"line":33,"column":47}},"28":{"start":{"line":37,"column":0},"end":{"line":39,"column":2}},"29":{"start":{"line":38,"column":2},"end":{"line":38,"column":70}},"30":{"start":{"line":38,"column":44},"end":{"line":38,"column":58}},"31":{"start":{"line":41,"column":0},"end":{"line":54,"column":2}},"32":{"start":{"line":42,"column":2},"end":{"line":42,"column":12}},"33":{"start":{"line":43,"column":2},"end":{"line":48,"column":3}},"34":{"start":{"line":44,"column":4},"end":{"line":44,"column":27}},"35":{"start":{"line":46,"column":4},"end":{"line":46,"column":38}},"36":{"start":{"line":47,"column":4},"end":{"line":47,"column":28}},"37":{"start":{"line":49,"column":2},"end":{"line":49,"column":18}},"38":{"start":{"line":50,"column":2},"end":{"line":50,"column":68}},"39":{"start":{"line":52,"column":2},"end":{"line":52,"column":74}},"40":{"start":{"line":53,"column":2},"end":{"line":53,"column":15}},"41":{"start":{"line":56,"column":0},"end":{"line":58,"column":2}},"42":{"start":{"line":57,"column":2},"end":{"line":57,"column":75}},"43":{"start":{"line":60,"column":0},"end":{"line":62,"column":2}},"44":{"start":{"line":61,"column":2},"end":{"line":61,"column":54}},"45":{"start":{"line":81,"column":0},"end":{"line":160,"column":2}},"46":{"start":{"line":82,"column":2},"end":{"line":82,"column":46}},"47":{"start":{"line":82,"column":26},"end":{"line":82,"column":45}},"48":{"start":{"line":83,"column":2},"end":{"line":83,"column":43}},"49":{"start":{"line":84,"column":2},"end":{"line":84,"column":23}},"50":{"start":{"line":85,"column":2},"end":{"line":85,"column":22}},"51":{"start":{"line":86,"column":2},"end":{"line":86,"column":22}},"52":{"start":{"line":87,"column":2},"end":{"line":87,"column":39}},"53":{"start":{"line":88,"column":2},"end":{"line":107,"column":5}},"54":{"start":{"line":89,"column":4},"end":{"line":89,"column":26}},"55":{"start":{"line":90,"column":4},"end":{"line":90,"column":33}},"56":{"start":{"line":91,"column":4},"end":{"line":91,"column":49}},"57":{"start":{"line":92,"column":4},"end":{"line":102,"column":7}},"58":{"start":{"line":93,"column":6},"end":{"line":100,"column":7}},"59":{"start":{"line":94,"column":8},"end":{"line":94,"column":25}},"60":{"start":{"line":95,"column":8},"end":{"line":95,"column":31}},"61":{"start":{"line":96,"column":8},"end":{"line":96,"column":47}},"62":{"start":{"line":97,"column":8},"end":{"line":99,"column":9}},"63":{"start":{"line":98,"column":10},"end":{"line":98,"column":36}},"64":{"start":{"line":101,"column":6},"end":{"line":101,"column":71}},"65":{"start":{"line":101,"column":54},"end":{"line":101,"column":71}},"66":{"start":{"line":103,"column":4},"end":{"line":106,"column":5}},"67":{"start":{"line":104,"column":6},"end":{"line":104,"column":45}},"68":{"start":{"line":105,"column":6},"end":{"line":105,"column":48}},"69":{"start":{"line":108,"column":2},"end":{"line":108,"column":45}},"70":{"start":{"line":109,"column":2},"end":{"line":115,"column":7}},"71":{"start":{"line":110,"column":4},"end":{"line":113,"column":5}},"72":{"start":{"line":111,"column":14},"end":{"line":111,"column":24}},"73":{"start":{"line":112,"column":14},"end":{"line":112,"column":42}},"74":{"start":{"line":114,"column":4},"end":{"line":114,"column":45}},"75":{"start":{"line":116,"column":2},"end":{"line":128,"column":7}},"76":{"start":{"line":117,"column":4},"end":{"line":126,"column":5}},"77":{"start":{"line":119,"column":8},"end":{"line":122,"column":9}},"78":{"start":{"line":120,"column":18},"end":{"line":120,"column":28}},"79":{"start":{"line":121,"column":18},"end":{"line":121,"column":47}},"80":{"start":{"line":123,"column":8},"end":{"line":123,"column":44}},"81":{"start":{"line":125,"column":8},"end":{"line":125,"column":38}},"82":{"start":{"line":127,"column":4},"end":{"line":127,"column":41}},"83":{"start":{"line":129,"column":2},"end":{"line":141,"column":7}},"84":{"start":{"line":130,"column":4},"end":{"line":130,"column":71}},"85":{"start":{"line":130,"column":27},"end":{"line":130,"column":71}},"86":{"start":{"line":132,"column":4},"end":{"line":139,"column":5}},"87":{"start":{"line":134,"column":8},"end":{"line":134,"column":58}},"88":{"start":{"line":135,"column":8},"end":{"line":135,"column":57}},"89":{"start":{"line":137,"column":8},"end":{"line":137,"column":70}},"90":{"start":{"line":138,"column":8},"end":{"line":138,"column":63}},"91":{"start":{"line":140,"column":4},"end":{"line":140,"column":46}},"92":{"start":{"line":142,"column":2},"end":{"line":142,"column":62}},"93":{"start":{"line":143,"column":2},"end":{"line":143,"column":56}},"94":{"start":{"line":144,"column":2},"end":{"line":152,"column":7}},"95":{"start":{"line":145,"column":4},"end":{"line":148,"column":5}},"96":{"start":{"line":146,"column":14},"end":{"line":146,"column":24}},"97":{"start":{"line":147,"column":14},"end":{"line":147,"column":40}},"98":{"start":{"line":149,"column":4},"end":{"line":151,"column":38}},"99":{"start":{"line":153,"column":2},"end":{"line":153,"column":46}},"100":{"start":{"line":154,"column":2},"end":{"line":154,"column":38}},"101":{"start":{"line":155,"column":2},"end":{"line":155,"column":25}},"102":{"start":{"line":156,"column":2},"end":{"line":158,"column":17}},"103":{"start":{"line":159,"column":2},"end":{"line":159,"column":48}},"104":{"start":{"line":162,"column":0},"end":{"line":162,"column":34}},"105":{"start":{"line":164,"column":0},"end":{"line":183,"column":2}},"106":{"start":{"line":165,"column":2},"end":{"line":165,"column":34}},"107":{"start":{"line":165,"column":19},"end":{"line":165,"column":34}},"108":{"start":{"line":166,"column":2},"end":{"line":166,"column":21}},"109":{"start":{"line":167,"column":2},"end":{"line":167,"column":14}},"110":{"start":{"line":168,"column":2},"end":{"line":170,"column":25}},"111":{"start":{"line":171,"column":2},"end":{"line":171,"column":35}},"112":{"start":{"line":171,"column":21},"end":{"line":171,"column":35}},"113":{"start":{"line":173,"column":2},"end":{"line":179,"column":4}},"114":{"start":{"line":174,"column":4},"end":{"line":174,"column":67}},"115":{"start":{"line":175,"column":4},"end":{"line":175,"column":50}},"116":{"start":{"line":176,"column":4},"end":{"line":176,"column":17}},"117":{"start":{"line":177,"column":4},"end":{"line":177,"column":17}},"118":{"start":{"line":178,"column":4},"end":{"line":178,"column":62}},"119":{"start":{"line":181,"column":2},"end":{"line":181,"column":49}},"120":{"start":{"line":182,"column":2},"end":{"line":182,"column":37}},"121":{"start":{"line":182,"column":15},"end":{"line":182,"column":36}},"122":{"start":{"line":185,"column":0},"end":{"line":199,"column":2}},"123":{"start":{"line":186,"column":2},"end":{"line":186,"column":24}},"124":{"start":{"line":188,"column":2},"end":{"line":196,"column":3}},"125":{"start":{"line":189,"column":4},"end":{"line":189,"column":49}},"126":{"start":{"line":189,"column":40},"end":{"line":189,"column":49}},"127":{"start":{"line":191,"column":4},"end":{"line":191,"column":30}},"128":{"start":{"line":192,"column":4},"end":{"line":192,"column":42}},"129":{"start":{"line":192,"column":33},"end":{"line":192,"column":42}},"130":{"start":{"line":193,"column":4},"end":{"line":195,"column":5}},"131":{"start":{"line":194,"column":6},"end":{"line":194,"column":32}},"132":{"start":{"line":198,"column":2},"end":{"line":198,"column":16}},"133":{"start":{"line":201,"column":0},"end":{"line":203,"column":2}},"134":{"start":{"line":202,"column":2},"end":{"line":202,"column":54}},"135":{"start":{"line":202,"column":35},"end":{"line":202,"column":39}},"136":{"start":{"line":202,"column":47},"end":{"line":202,"column":52}},"137":{"start":{"line":205,"column":0},"end":{"line":207,"column":2}},"138":{"start":{"line":206,"column":2},"end":{"line":206,"column":72}},"139":{"start":{"line":206,"column":36},"end":{"line":206,"column":57}},"140":{"start":{"line":206,"column":65},"end":{"line":206,"column":70}},"141":{"start":{"line":209,"column":0},"end":{"line":213,"column":2}},"142":{"start":{"line":210,"column":2},"end":{"line":212,"column":31}},"143":{"start":{"line":211,"column":4},"end":{"line":211,"column":40}},"144":{"start":{"line":217,"column":4},"end":{"line":217,"column":78}},"145":{"start":{"line":223,"column":4},"end":{"line":223,"column":77}},"146":{"start":{"line":227,"column":0},"end":{"line":234,"column":2}},"147":{"start":{"line":228,"column":2},"end":{"line":228,"column":36}},"148":{"start":{"line":229,"column":2},"end":{"line":229,"column":27}},"149":{"start":{"line":229,"column":20},"end":{"line":229,"column":27}},"150":{"start":{"line":231,"column":2},"end":{"line":231,"column":28}},"151":{"start":{"line":232,"column":2},"end":{"line":232,"column":25}},"152":{"start":{"line":233,"column":2},"end":{"line":233,"column":14}},"153":{"start":{"line":236,"column":0},"end":{"line":252,"column":2}}},"branchMap":{"1":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":22},"end":{"line":11,"column":50}},{"start":{"line":12,"column":4},"end":{"line":12,"column":26}},{"start":{"line":13,"column":5},"end":{"line":13,"column":15}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"3":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":16}},{"start":{"line":18,"column":20},"end":{"line":18,"column":43}}]},"4":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":6}},{"start":{"line":20,"column":6},"end":{"line":20,"column":6}}]},"5":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":2},"end":{"line":43,"column":2}},{"start":{"line":43,"column":2},"end":{"line":43,"column":2}}]},"6":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":21},"end":{"line":52,"column":25}},{"start":{"line":52,"column":29},"end":{"line":52,"column":41}}]},"7":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":6},"end":{"line":93,"column":6}},{"start":{"line":93,"column":6},"end":{"line":93,"column":6}}]},"8":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":8},"end":{"line":97,"column":8}},{"start":{"line":97,"column":8},"end":{"line":97,"column":8}}]},"9":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":6},"end":{"line":101,"column":6}},{"start":{"line":101,"column":6},"end":{"line":101,"column":6}}]},"10":{"line":101,"type":"binary-expr","locations":[{"start":{"line":101,"column":10},"end":{"line":101,"column":20}},{"start":{"line":101,"column":24},"end":{"line":101,"column":52}}]},"11":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"12":{"line":110,"type":"switch","locations":[{"start":{"line":111,"column":6},"end":{"line":111,"column":24}},{"start":{"line":112,"column":6},"end":{"line":112,"column":42}}]},"13":{"line":117,"type":"switch","locations":[{"start":{"line":118,"column":6},"end":{"line":123,"column":44}},{"start":{"line":124,"column":6},"end":{"line":125,"column":38}}]},"14":{"line":119,"type":"switch","locations":[{"start":{"line":120,"column":10},"end":{"line":120,"column":28}},{"start":{"line":121,"column":10},"end":{"line":121,"column":47}}]},"15":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":4},"end":{"line":130,"column":4}},{"start":{"line":130,"column":4},"end":{"line":130,"column":4}}]},"16":{"line":130,"type":"cond-expr","locations":[{"start":{"line":130,"column":57},"end":{"line":130,"column":59}},{"start":{"line":130,"column":62},"end":{"line":130,"column":70}}]},"17":{"line":132,"type":"switch","locations":[{"start":{"line":133,"column":6},"end":{"line":135,"column":57}},{"start":{"line":136,"column":6},"end":{"line":138,"column":63}}]},"18":{"line":134,"type":"cond-expr","locations":[{"start":{"line":134,"column":44},"end":{"line":134,"column":46}},{"start":{"line":134,"column":49},"end":{"line":134,"column":57}}]},"19":{"line":137,"type":"cond-expr","locations":[{"start":{"line":137,"column":59},"end":{"line":137,"column":61}},{"start":{"line":137,"column":64},"end":{"line":137,"column":67}}]},"20":{"line":143,"type":"cond-expr","locations":[{"start":{"line":143,"column":46},"end":{"line":143,"column":50}},{"start":{"line":143,"column":53},"end":{"line":143,"column":55}}]},"21":{"line":143,"type":"binary-expr","locations":[{"start":{"line":143,"column":14},"end":{"line":143,"column":26}},{"start":{"line":143,"column":30},"end":{"line":143,"column":43}}]},"22":{"line":145,"type":"switch","locations":[{"start":{"line":146,"column":6},"end":{"line":146,"column":24}},{"start":{"line":147,"column":6},"end":{"line":147,"column":40}}]},"23":{"line":149,"type":"cond-expr","locations":[{"start":{"line":150,"column":6},"end":{"line":150,"column":31}},{"start":{"line":151,"column":6},"end":{"line":151,"column":37}}]},"24":{"line":156,"type":"cond-expr","locations":[{"start":{"line":157,"column":4},"end":{"line":157,"column":42}},{"start":{"line":158,"column":4},"end":{"line":158,"column":16}}]},"25":{"line":159,"type":"binary-expr","locations":[{"start":{"line":159,"column":12},"end":{"line":159,"column":16}},{"start":{"line":159,"column":20},"end":{"line":159,"column":30}}]},"26":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":2},"end":{"line":165,"column":2}},{"start":{"line":165,"column":2},"end":{"line":165,"column":2}}]},"27":{"line":168,"type":"cond-expr","locations":[{"start":{"line":169,"column":4},"end":{"line":169,"column":37}},{"start":{"line":170,"column":4},"end":{"line":170,"column":24}}]},"28":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":2},"end":{"line":171,"column":2}},{"start":{"line":171,"column":2},"end":{"line":171,"column":2}}]},"29":{"line":174,"type":"cond-expr","locations":[{"start":{"line":174,"column":35},"end":{"line":174,"column":52}},{"start":{"line":174,"column":55},"end":{"line":174,"column":66}}]},"30":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":4},"end":{"line":189,"column":4}},{"start":{"line":189,"column":4},"end":{"line":189,"column":4}}]},"31":{"line":189,"type":"binary-expr","locations":[{"start":{"line":189,"column":8},"end":{"line":189,"column":14}},{"start":{"line":189,"column":18},"end":{"line":189,"column":38}}]},"32":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":4},"end":{"line":192,"column":4}},{"start":{"line":192,"column":4},"end":{"line":192,"column":4}}]},"33":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":4},"end":{"line":193,"column":4}},{"start":{"line":193,"column":4},"end":{"line":193,"column":4}}]},"34":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":2},"end":{"line":229,"column":2}},{"start":{"line":229,"column":2},"end":{"line":229,"column":2}}]}},"code":["'use strict';","const basename = require('universal-path').basename;","const promisify = require('micro-promisify');","const fslstat = promisify(require('fs').lstat);","const fsaccess = promisify(require('fs').access);","","// Single-level flatten.","const flatten = array => [].concat.apply([], array);","","const deepAssign = (target, source, filter) => {","  const shouldMerge = typeof filter === 'function' &&","    filter(target, source) ||","    (() => true);","","  Object.keys(source).forEach(key => {","    const value = source[key];","    const isObject = toString.call(value) === '[object Object]';","    if (isObject && shouldMerge(key, value)) {","      let nested = target[key];","      if (nested == null) nested = target[key] = {};","      deepAssign(nested, value, filter);","    } else {","      target[key] = value;","    }","  });","","  return target;","};","","const asyncFilter = (arr, fn) => {","  const promises = arr.map(item => fn(item).then(result => [item, result]));","  return Promise.all(promises).then(data => {","    return data.filter(x => x[1]).map(x => x[0]);","  });","};","","const prettify = object => {","  return Object.entries(object).map(pair => pair.join('=')).join(' ');","};","","const getFormattedError = (err, code, path) => {","  let error;","  if (typeof err === 'string') {","    error = new Error(err);","  } else {","    error = new Error(err.toString());","    error.stack = err.stack;","  }","  error.name = '';","  const message = error.message.trim().replace(/^/gm, '   ').trim();","","  error.message = `${code || 'Processing'} of ${path} failed. ${message}`;","  return error;","};","","const formatError = file => {","  return getFormattedError(file.error, file.error.pipelineCode, file.path);","};","","const formatOptimizerError = (error, path) => {","  return getFormattedError(error, 'Optimizing', path);","};","","/* compiled 4 files and 145 cached files into app.js"," * compiled app.js and 10 cached files into app.js, copied 2 files"," * `compiled 106 into 3 and copied 47 files` - initial compilation"," * `copied img.png` - 1 new/changed asset"," * `copied 6 files` - >1 new/changed asset"," * `compiled controller.coffee and 32 cached files into app.js`"," * `compiled _partial.styl and 22 cached into 2 files` - 1 partial affecting"," *                                                      >1 compiled file"," * `compiled init.ls into init.js` - 1 source file that doesn't"," *                                   concat with any other files"," * `compiled 5 files into ie7.css` - source files that go into 1 compiled"," * `compiled 2 and 3 cached files into ie7.css` - change some source files"," *                                                that go into 1 compiled"," * `compiled 4 files and 1 cached into ie7.css` - one cached should not"," *                                                switch to filename"," * `compiled 5 and 101 cached into 3 files` - change >1 affecting >1 compiled"," */","const generateCompilationLog = (startTime, copiedAssets, generatedFiles, disposedFiles) => {","  const getName = file => basename(file.path);","  const copied = copiedAssets.map(getName);","  const generated = [];","  const compiled = [];","  let cachedCount = 0;","  const dgen = disposedFiles.generated;","  generatedFiles.forEach(generatedFile => {","    let isChanged = false;","    let locallyCompiledCount = 0;","    const len = generatedFile.sourceFiles.length;","    generatedFile.sourceFiles.forEach(sourceFile => {","      if (sourceFile.compilationTime >= startTime) {","        isChanged = true;","        locallyCompiledCount++;","        const sourceName = getName(sourceFile);","        if (!compiled.includes(sourceName)) {","          compiled.push(sourceName);","        }","      }","      if (!isChanged && dgen.includes(generatedFile)) isChanged = true;","    });","    if (isChanged) {","      generated.push(getName(generatedFile));","      cachedCount += len - locallyCompiledCount;","    }","  });","  const disposed = disposedFiles.sourcePaths;","  const generatedLog = (() => {","    switch (generated.length) {","      case 0: return '';","      case 1: return ` into ${generated}`;","    }","    return ` into ${generated.length} files`;","  })();","  const compiledLog = (() => {","    switch (compiled.length) {","      case 0:","        switch (disposed.length) {","          case 0: return '';","          case 1: return `removed ${disposed}`;","        }","        return `removed ${disposed.length}`;","      case 1:","        return `compiled ${compiled}`;","    }","    return `compiled ${compiled.length}`;","  })();","  const cachedLog = (() => {","    if (cachedCount === 0) return compiled.length <= 1 ? '' : ' files';","","    switch (compiled.length) {","      case 0:","        const noun = generated.length > 1 ? '' : ' files';","        return ` and wrote ${cachedCount} cached${noun}`;","      case 1:","        const cachedCountName = `file${cachedCount === 1 ? '' : 's'}`;","        return ` and ${cachedCount} cached ${cachedCountName}`;","    }","    return ` files and ${cachedCount} cached`;","  })();","  const nonAssetsLog = compiledLog + cachedLog + generatedLog;","  const sep = nonAssetsLog && copied.length ? ', ' : '';","  const assetsLog = (() => {","    switch (copied.length) {","      case 0: return '';","      case 1: return `copied ${copied}`;","    }","    return compiled.length ?","      `copied ${copied.length}` :","      `copied ${copied.length} files`;","  })();","  const main = nonAssetsLog + sep + assetsLog;","  const diff = Date.now() - startTime;","  const oneSecond = 1000;","  const diffText = diff > oneSecond ?","    `${(diff / oneSecond).toFixed(1)} sec` :","    `${diff} ms`;","  return `${main || 'compiled'} in ${diffText}`;","};","","const animationLogInterval = 4000;","","const getCompilationProgress = (timePassed, logger) => {","  if (!timePassed) timePassed = 0;","  let iterations = 0;","  let timeout;","  let initRunIn = timePassed ?","    animationLogInterval - timePassed :","    animationLogInterval;","  if (initRunIn < 0) initRunIn = 0;","","  const writeWithDots = () => {","    const msg = iterations === 7 ? 'still compiling' : 'compiling';","    const line = msg + '.'.repeat(iterations % 4);","    logger(line);","    iterations++;","    timeout = setTimeout(writeWithDots, animationLogInterval);","  };","","  timeout = setTimeout(writeWithDots, initRunIn);","  return () => clearTimeout(timeout);","};","","const deepFreeze = (object, except) => {","  Object.freeze(object);","","  for (const key of Object.keys(object)) {","    if (except && except.includes(key)) continue;","","    const value = object[key];","    if (value instanceof RegExp) continue;","    if (!Object.isFrozen(value)) {","      deepFreeze(value, except);","    }","  }","","  return object;","};","","const fsExists = path => {","  return fsaccess(path).then(() => true, () => false);","};","","const isSymlink = path => {","  return fslstat(path).then(stat => stat.isSymbolicLink(), () => false);","};","","const promiseReduce = (array, callback, initial) => {","  return array.reduce((promise, item) => {","    return promise.then(callback(item));","  }, Promise.resolve(initial));","};","","class FrozenMap extends Map {","  set(key) {","    throw new TypeError(`Can't set property '${key}', map is not extensible`);","  }","}","","class FrozenSet extends Set {","  add(value) {","    throw new TypeError(`Can't add value '${value}', set is not extensible`);","  }","}","","const pull = (array, is) => {","  const index = array.findIndex(is);","  if (index === -1) return;","","  const item = array[index];","  array.splice(index, 1);","  return item;","};","","module.exports = {","  flatten,","  deepAssign,","  asyncFilter,","  prettify,","  formatError,","  formatOptimizerError,","  generateCompilationLog,","  getCompilationProgress,","  deepFreeze,","  fsExists,","  isSymlink,","  promiseReduce,","  FrozenMap,","  FrozenSet,","  pull,","};",""],"l":{"2":1,"3":1,"4":1,"5":1,"8":1,"10":1,"11":0,"13":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"23":0,"27":0,"30":1,"31":0,"32":0,"33":0,"37":1,"38":0,"41":1,"42":0,"43":0,"44":0,"46":0,"47":0,"49":0,"50":0,"52":0,"53":0,"56":1,"57":0,"60":1,"61":0,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"101":0,"103":0,"104":0,"105":0,"108":0,"109":0,"110":0,"111":0,"112":0,"114":0,"116":0,"117":0,"119":0,"120":0,"121":0,"123":0,"125":0,"127":0,"129":0,"130":0,"132":0,"134":0,"135":0,"137":0,"138":0,"140":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"149":0,"153":0,"154":0,"155":0,"156":0,"159":0,"162":1,"164":1,"165":0,"166":0,"167":0,"168":0,"171":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"181":0,"182":0,"185":1,"186":0,"188":0,"189":0,"191":0,"192":0,"193":0,"194":0,"198":0,"201":1,"202":0,"205":1,"206":0,"209":1,"210":0,"211":0,"217":0,"223":0,"227":1,"228":0,"229":0,"231":0,"232":0,"233":0,"236":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/generate.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/generate.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":1,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":1,"121":0,"122":0,"123":1,"124":0,"125":0,"126":1,"127":1,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":1,"153":1,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":1,"164":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":50}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":45}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":55}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":44}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":47}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":35}},"9":{"start":{"line":10,"column":0},"end":{"line":10,"column":44}},"10":{"start":{"line":11,"column":0},"end":{"line":11,"column":32}},"11":{"start":{"line":12,"column":0},"end":{"line":12,"column":44}},"12":{"start":{"line":13,"column":0},"end":{"line":13,"column":58}},"13":{"start":{"line":14,"column":0},"end":{"line":14,"column":52}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"15":{"start":{"line":16,"column":0},"end":{"line":16,"column":46}},"16":{"start":{"line":18,"column":0},"end":{"line":18,"column":35}},"17":{"start":{"line":19,"column":0},"end":{"line":19,"column":49}},"18":{"start":{"line":20,"column":0},"end":{"line":20,"column":51}},"19":{"start":{"line":21,"column":0},"end":{"line":21,"column":35}},"20":{"start":{"line":29,"column":0},"end":{"line":37,"column":2}},"21":{"start":{"line":30,"column":2},"end":{"line":30,"column":27}},"22":{"start":{"line":31,"column":2},"end":{"line":31,"column":46}},"23":{"start":{"line":31,"column":22},"end":{"line":31,"column":45}},"24":{"start":{"line":32,"column":2},"end":{"line":32,"column":24}},"25":{"start":{"line":34,"column":2},"end":{"line":36,"column":5}},"26":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"27":{"start":{"line":43,"column":0},"end":{"line":53,"column":2}},"28":{"start":{"line":44,"column":2},"end":{"line":44,"column":64}},"29":{"start":{"line":44,"column":51},"end":{"line":44,"column":64}},"30":{"start":{"line":45,"column":2},"end":{"line":51,"column":4}},"31":{"start":{"line":50,"column":38},"end":{"line":50,"column":43}},"32":{"start":{"line":52,"column":2},"end":{"line":52,"column":62}},"33":{"start":{"line":55,"column":0},"end":{"line":66,"column":2}},"34":{"start":{"line":56,"column":2},"end":{"line":56,"column":51}},"35":{"start":{"line":56,"column":34},"end":{"line":56,"column":49}},"36":{"start":{"line":57,"column":2},"end":{"line":59,"column":47}},"37":{"start":{"line":58,"column":19},"end":{"line":58,"column":38}},"38":{"start":{"line":59,"column":16},"end":{"line":59,"column":45}},"39":{"start":{"line":60,"column":2},"end":{"line":60,"column":64}},"40":{"start":{"line":60,"column":44},"end":{"line":60,"column":61}},"41":{"start":{"line":61,"column":2},"end":{"line":61,"column":62}},"42":{"start":{"line":61,"column":43},"end":{"line":61,"column":59}},"43":{"start":{"line":62,"column":2},"end":{"line":62,"column":34}},"44":{"start":{"line":63,"column":2},"end":{"line":63,"column":51}},"45":{"start":{"line":64,"column":2},"end":{"line":64,"column":45}},"46":{"start":{"line":65,"column":2},"end":{"line":65,"column":50}},"47":{"start":{"line":68,"column":0},"end":{"line":77,"column":2}},"48":{"start":{"line":69,"column":2},"end":{"line":69,"column":45}},"49":{"start":{"line":69,"column":34},"end":{"line":69,"column":43}},"50":{"start":{"line":70,"column":2},"end":{"line":70,"column":38}},"51":{"start":{"line":71,"column":2},"end":{"line":73,"column":5}},"52":{"start":{"line":72,"column":4},"end":{"line":72,"column":30}},"53":{"start":{"line":74,"column":2},"end":{"line":74,"column":44}},"54":{"start":{"line":75,"column":2},"end":{"line":75,"column":66}},"55":{"start":{"line":75,"column":34},"end":{"line":75,"column":66}},"56":{"start":{"line":76,"column":2},"end":{"line":76,"column":63}},"57":{"start":{"line":76,"column":48},"end":{"line":76,"column":61}},"58":{"start":{"line":79,"column":0},"end":{"line":126,"column":2}},"59":{"start":{"line":80,"column":2},"end":{"line":80,"column":44}},"60":{"start":{"line":80,"column":27},"end":{"line":80,"column":44}},"61":{"start":{"line":81,"column":2},"end":{"line":81,"column":30}},"62":{"start":{"line":83,"column":2},"end":{"line":83,"column":32}},"63":{"start":{"line":84,"column":2},"end":{"line":84,"column":48}},"64":{"start":{"line":84,"column":29},"end":{"line":84,"column":35}},"65":{"start":{"line":85,"column":2},"end":{"line":85,"column":45}},"66":{"start":{"line":87,"column":2},"end":{"line":92,"column":4}},"67":{"start":{"line":88,"column":4},"end":{"line":88,"column":24}},"68":{"start":{"line":89,"column":4},"end":{"line":89,"column":64}},"69":{"start":{"line":90,"column":4},"end":{"line":90,"column":51}},"70":{"start":{"line":90,"column":37},"end":{"line":90,"column":51}},"71":{"start":{"line":91,"column":4},"end":{"line":91,"column":57}},"72":{"start":{"line":94,"column":2},"end":{"line":124,"column":3}},"73":{"start":{"line":95,"column":4},"end":{"line":95,"column":61}},"74":{"start":{"line":95,"column":30},"end":{"line":95,"column":60}},"75":{"start":{"line":97,"column":4},"end":{"line":97,"column":77}},"76":{"start":{"line":97,"column":71},"end":{"line":97,"column":76}},"77":{"start":{"line":98,"column":4},"end":{"line":98,"column":40}},"78":{"start":{"line":100,"column":4},"end":{"line":100,"column":71}},"79":{"start":{"line":100,"column":42},"end":{"line":100,"column":69}},"80":{"start":{"line":101,"column":4},"end":{"line":101,"column":71}},"81":{"start":{"line":101,"column":45},"end":{"line":101,"column":69}},"82":{"start":{"line":103,"column":4},"end":{"line":103,"column":63}},"83":{"start":{"line":104,"column":4},"end":{"line":110,"column":6}},"84":{"start":{"line":105,"column":6},"end":{"line":109,"column":7}},"85":{"start":{"line":106,"column":8},"end":{"line":106,"column":59}},"86":{"start":{"line":108,"column":8},"end":{"line":108,"column":39}},"87":{"start":{"line":112,"column":4},"end":{"line":116,"column":6}},"88":{"start":{"line":113,"column":6},"end":{"line":113,"column":27}},"89":{"start":{"line":114,"column":6},"end":{"line":114,"column":28}},"90":{"start":{"line":115,"column":6},"end":{"line":115,"column":40}},"91":{"start":{"line":118,"column":4},"end":{"line":118,"column":59}},"92":{"start":{"line":119,"column":4},"end":{"line":119,"column":95}},"93":{"start":{"line":121,"column":4},"end":{"line":121,"column":36}},"94":{"start":{"line":123,"column":4},"end":{"line":123,"column":29}},"95":{"start":{"line":125,"column":2},"end":{"line":125,"column":50}},"96":{"start":{"line":128,"column":0},"end":{"line":138,"column":2}},"97":{"start":{"line":129,"column":2},"end":{"line":129,"column":35}},"98":{"start":{"line":129,"column":28},"end":{"line":129,"column":35}},"99":{"start":{"line":130,"column":2},"end":{"line":130,"column":84}},"100":{"start":{"line":131,"column":2},"end":{"line":131,"column":62}},"101":{"start":{"line":131,"column":36},"end":{"line":131,"column":62}},"102":{"start":{"line":132,"column":2},"end":{"line":136,"column":5}},"103":{"start":{"line":133,"column":4},"end":{"line":133,"column":26}},"104":{"start":{"line":134,"column":4},"end":{"line":134,"column":30}},"105":{"start":{"line":135,"column":4},"end":{"line":135,"column":40}},"106":{"start":{"line":137,"column":2},"end":{"line":137,"column":13}},"107":{"start":{"line":140,"column":0},"end":{"line":156,"column":2}},"108":{"start":{"line":140,"column":34},"end":{"line":156,"column":1}},"109":{"start":{"line":141,"column":2},"end":{"line":143,"column":3}},"110":{"start":{"line":142,"column":4},"end":{"line":142,"column":60}},"111":{"start":{"line":144,"column":2},"end":{"line":144,"column":30}},"112":{"start":{"line":145,"column":2},"end":{"line":145,"column":27}},"113":{"start":{"line":146,"column":2},"end":{"line":146,"column":41}},"114":{"start":{"line":147,"column":2},"end":{"line":147,"column":62}},"115":{"start":{"line":149,"column":2},"end":{"line":155,"column":5}},"116":{"start":{"line":150,"column":4},"end":{"line":150,"column":32}},"117":{"start":{"line":151,"column":4},"end":{"line":151,"column":73}},"118":{"start":{"line":152,"column":4},"end":{"line":152,"column":54}},"119":{"start":{"line":154,"column":4},"end":{"line":154,"column":44}},"120":{"start":{"line":158,"column":0},"end":{"line":161,"column":2}},"121":{"start":{"line":159,"column":2},"end":{"line":159,"column":61}},"122":{"start":{"line":160,"column":2},"end":{"line":160,"column":58}},"123":{"start":{"line":163,"column":0},"end":{"line":166,"column":2}},"124":{"start":{"line":164,"column":2},"end":{"line":164,"column":74}},"125":{"start":{"line":165,"column":2},"end":{"line":165,"column":70}},"126":{"start":{"line":168,"column":0},"end":{"line":168,"column":43}},"127":{"start":{"line":170,"column":0},"end":{"line":210,"column":2}},"128":{"start":{"line":171,"column":2},"end":{"line":172,"column":32}},"129":{"start":{"line":171,"column":36},"end":{"line":171,"column":63}},"130":{"start":{"line":174,"column":2},"end":{"line":174,"column":73}},"131":{"start":{"line":174,"column":48},"end":{"line":174,"column":71}},"132":{"start":{"line":175,"column":2},"end":{"line":175,"column":61}},"133":{"start":{"line":176,"column":2},"end":{"line":176,"column":52}},"134":{"start":{"line":177,"column":2},"end":{"line":177,"column":76}},"135":{"start":{"line":178,"column":2},"end":{"line":178,"column":52}},"136":{"start":{"line":179,"column":2},"end":{"line":179,"column":34}},"137":{"start":{"line":180,"column":2},"end":{"line":180,"column":76}},"138":{"start":{"line":181,"column":2},"end":{"line":185,"column":4}},"139":{"start":{"line":186,"column":2},"end":{"line":186,"column":23}},"140":{"start":{"line":187,"column":2},"end":{"line":187,"column":21}},"141":{"start":{"line":188,"column":2},"end":{"line":188,"column":44}},"142":{"start":{"line":189,"column":2},"end":{"line":189,"column":32}},"143":{"start":{"line":190,"column":2},"end":{"line":209,"column":7}},"144":{"start":{"line":192,"column":6},"end":{"line":201,"column":7}},"145":{"start":{"line":193,"column":8},"end":{"line":197,"column":36}},"146":{"start":{"line":198,"column":8},"end":{"line":198,"column":68}},"147":{"start":{"line":199,"column":8},"end":{"line":199,"column":66}},"148":{"start":{"line":200,"column":8},"end":{"line":200,"column":75}},"149":{"start":{"line":202,"column":6},"end":{"line":202,"column":18}},"150":{"start":{"line":205,"column":6},"end":{"line":208,"column":26}},"151":{"start":{"line":208,"column":20},"end":{"line":208,"column":24}},"152":{"start":{"line":212,"column":0},"end":{"line":212,"column":31}},"153":{"start":{"line":214,"column":0},"end":{"line":225,"column":2}},"154":{"start":{"line":215,"column":2},"end":{"line":218,"column":5}},"155":{"start":{"line":216,"column":4},"end":{"line":216,"column":19}},"156":{"start":{"line":217,"column":4},"end":{"line":217,"column":46}},"157":{"start":{"line":217,"column":17},"end":{"line":217,"column":45}},"158":{"start":{"line":220,"column":2},"end":{"line":222,"column":5}},"159":{"start":{"line":221,"column":4},"end":{"line":221,"column":64}},"160":{"start":{"line":221,"column":17},"end":{"line":221,"column":63}},"161":{"start":{"line":224,"column":2},"end":{"line":224,"column":48}},"162":{"start":{"line":224,"column":34},"end":{"line":224,"column":46}},"163":{"start":{"line":227,"column":0},"end":{"line":227,"column":37}},"164":{"start":{"line":229,"column":0},"end":{"line":229,"column":26}}},"branchMap":{"1":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":2},"end":{"line":44,"column":2}},{"start":{"line":44,"column":2},"end":{"line":44,"column":2}}]},"2":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":17}},{"start":{"line":46,"column":21},"end":{"line":46,"column":23}}]},"3":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":16}},{"start":{"line":47,"column":20},"end":{"line":47,"column":22}}]},"4":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":4},"end":{"line":48,"column":22}},{"start":{"line":48,"column":26},"end":{"line":48,"column":28}}]},"5":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":4},"end":{"line":49,"column":16}},{"start":{"line":49,"column":20},"end":{"line":49,"column":22}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":27}},{"start":{"line":50,"column":32},"end":{"line":50,"column":43}}]},"7":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":16},"end":{"line":59,"column":39}},{"start":{"line":59,"column":43},"end":{"line":59,"column":45}}]},"8":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":44},"end":{"line":60,"column":55}},{"start":{"line":60,"column":59},"end":{"line":60,"column":61}}]},"9":{"line":61,"type":"binary-expr","locations":[{"start":{"line":61,"column":43},"end":{"line":61,"column":53}},{"start":{"line":61,"column":57},"end":{"line":61,"column":59}}]},"10":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":2},"end":{"line":75,"column":2}},{"start":{"line":75,"column":2},"end":{"line":75,"column":2}}]},"11":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":2},"end":{"line":80,"column":2}},{"start":{"line":80,"column":2},"end":{"line":80,"column":2}}]},"12":{"line":89,"type":"cond-expr","locations":[{"start":{"line":89,"column":40},"end":{"line":89,"column":49}},{"start":{"line":89,"column":52},"end":{"line":89,"column":63}}]},"13":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":4},"end":{"line":90,"column":4}},{"start":{"line":90,"column":4},"end":{"line":90,"column":4}}]},"14":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":8},"end":{"line":90,"column":12}},{"start":{"line":90,"column":16},"end":{"line":90,"column":35}}]},"15":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":2},"end":{"line":94,"column":2}},{"start":{"line":94,"column":2},"end":{"line":94,"column":2}}]},"16":{"line":97,"type":"cond-expr","locations":[{"start":{"line":97,"column":39},"end":{"line":97,"column":62}},{"start":{"line":97,"column":65},"end":{"line":97,"column":76}}]},"17":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":42},"end":{"line":100,"column":50}},{"start":{"line":100,"column":54},"end":{"line":100,"column":69}}]},"18":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":6},"end":{"line":105,"column":6}},{"start":{"line":105,"column":6},"end":{"line":105,"column":6}}]},"19":{"line":105,"type":"binary-expr","locations":[{"start":{"line":105,"column":10},"end":{"line":105,"column":28}},{"start":{"line":105,"column":32},"end":{"line":105,"column":50}}]},"20":{"line":118,"type":"cond-expr","locations":[{"start":{"line":118,"column":30},"end":{"line":118,"column":42}},{"start":{"line":118,"column":45},"end":{"line":118,"column":58}}]},"21":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":2},"end":{"line":129,"column":2}},{"start":{"line":129,"column":2},"end":{"line":129,"column":2}}]},"22":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":2},"end":{"line":131,"column":2}},{"start":{"line":131,"column":2},"end":{"line":131,"column":2}}]},"23":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":2},"end":{"line":141,"column":2}},{"start":{"line":141,"column":2},"end":{"line":141,"column":2}}]},"24":{"line":151,"type":"binary-expr","locations":[{"start":{"line":151,"column":16},"end":{"line":151,"column":60}},{"start":{"line":151,"column":64},"end":{"line":151,"column":72}}]},"25":{"line":171,"type":"cond-expr","locations":[{"start":{"line":172,"column":4},"end":{"line":172,"column":16}},{"start":{"line":172,"column":19},"end":{"line":172,"column":31}}]},"26":{"line":176,"type":"binary-expr","locations":[{"start":{"line":176,"column":21},"end":{"line":176,"column":45}},{"start":{"line":176,"column":49},"end":{"line":176,"column":51}}]},"27":{"line":177,"type":"binary-expr","locations":[{"start":{"line":177,"column":22},"end":{"line":177,"column":39}},{"start":{"line":177,"column":43},"end":{"line":177,"column":69}},{"start":{"line":177,"column":73},"end":{"line":177,"column":75}}]},"28":{"line":180,"type":"cond-expr","locations":[{"start":{"line":180,"column":45},"end":{"line":180,"column":68}},{"start":{"line":180,"column":71},"end":{"line":180,"column":75}}]},"29":{"line":188,"type":"binary-expr","locations":[{"start":{"line":188,"column":19},"end":{"line":188,"column":22}},{"start":{"line":188,"column":26},"end":{"line":188,"column":43}}]},"30":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":6},"end":{"line":192,"column":6}},{"start":{"line":192,"column":6},"end":{"line":192,"column":6}}]},"31":{"line":193,"type":"cond-expr","locations":[{"start":{"line":194,"column":10},"end":{"line":194,"column":41}},{"start":{"line":195,"column":10},"end":{"line":197,"column":35}}]},"32":{"line":195,"type":"cond-expr","locations":[{"start":{"line":196,"column":10},"end":{"line":196,"column":50}},{"start":{"line":197,"column":10},"end":{"line":197,"column":35}}]},"33":{"line":198,"type":"cond-expr","locations":[{"start":{"line":198,"column":58},"end":{"line":198,"column":61}},{"start":{"line":198,"column":64},"end":{"line":198,"column":67}}]},"34":{"line":200,"type":"cond-expr","locations":[{"start":{"line":200,"column":45},"end":{"line":200,"column":57}},{"start":{"line":200,"column":60},"end":{"line":200,"column":74}}]},"35":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":8},"end":{"line":207,"column":16}},{"start":{"line":207,"column":20},"end":{"line":207,"column":50}},{"start":{"line":207,"column":54},"end":{"line":207,"column":93}}]}},"code":["'use strict';","const debug = require('debug')('brunch:generate');","const sysPath = require('universal-path');","const anysort = require('anysort');","const promisify = require('micro-promisify');","const fsWriteFile = promisify(require('fs').writeFile);","const mkdirp = promisify(require('mkdirp'));","const unlink = promisify(require('fs').unlink);","const deppack = require('deppack'); // needsProcessing, processFiles","const helpers = require('../utils/helpers');","const flatten = helpers.flatten;","const promiseReduce = helpers.promiseReduce;","const formatOptimizerError = helpers.formatOptimizerError;","const processJob = require('../workers').processJob;","const hmr = require('../utils/hmr'); // isEnabled, generate","const BrunchError = require('../utils/error');","","const smap = require('source-map');","const SourceMapConsumer = smap.SourceMapConsumer;","const SourceMapGenerator = smap.SourceMapGenerator;","const SourceNode = smap.SourceNode;","","// Generate: [File] -> File.","// Takes a list of files (FileList) and makes one output from it.","","// Writes data into a file.","// Creates the file and/or all parent directories if they don't exist.","// Returns a promise (not valued if success).","const writeFile = (path, data) => {","  debug(`Writing ${path}`);","  const write = () => fsWriteFile(path, data);","  const rwxrxrx = 0o755;","","  return write().catch(() => {","    return mkdirp(sysPath.dirname(path), rwxrxrx).then(write);","  });","};","","// Sorts by pattern.","// sort(['b.coffee', 'c.coffee', 'a.coffee'], {before: ['a.coffee'], after: ['b.coffee']})","// => ['a.coffee', 'c.coffee', 'b.coffee']","// Returns new sorted array.","const sortByConfig = (files, config) => {","  if (toString.call(config) !== '[object Object]') return files;","  const criteria = [","    config.before || [],","    config.after || [],","    config.joinToValue || [],","    config.bower || [],","    config.vendorConvention || (() => false),","  ];","  return anysort.grouped(files, criteria, [0, 2, 3, 4, 5, 1]);","};","","const extractOrder = (files, config) => {","  const types = files.map(file => `${file.type}s`);","  const orders = Object.keys(config.files)","    .filter(key => types.includes(key))","    .map(key => config.files[key].order || {});","  const before = flatten(orders.map(type => type.before || []));","  const after = flatten(orders.map(type => type.after || []));","  const norm = config._normalized;","  const vendorConvention = norm.conventions.vendor;","  const bower = norm.packageInfo.bower.order;","  return {before, after, vendorConvention, bower};","};","","const sort = (files, config, joinToValue) => {","  const paths = files.map(file => file.path);","  const indexes = Object.create(null);","  files.forEach(file => {","    indexes[file.path] = file;","  });","  const order = extractOrder(files, config);","  if (Array.isArray(joinToValue)) order.joinToValue = joinToValue;","  return sortByConfig(paths, order).map(path => indexes[path]);","};","","const concat = (files, path, definitionFn, autoRequire, config) => {","  if (autoRequire == null) autoRequire = [];","  const isJs = !!definitionFn;","","  const root = new SourceNode();","  const str = files.map(f => f.path).join(', ');","  debug(`Concatenating [${str}] => ${path}`);","","  const processor = file => {","    root.add(file.node);","    const data = file.node.isIdentity ? file.data : file.source;","    if (isJs && !/;\\s*$/.test(data)) root.add(';');","    return root.setSourceContent(file.node.source, data);","  };","","  if (isJs) {","    const addRequire = req => root.add(`require('${req}');`);","","    const isNpm = config.npm.enabled ? deppack.needsProcessing : () => false;","    const isHmr = hmr.isEnabled(config);","","    const moduleFiles = files.filter(f => isNpm(f) || f.file.isModule);","    const nonModuleFiles = files.filter(f => !moduleFiles.includes(f));","","    const definition = definitionFn(path, root.sourceContents);","    const generateModuleFiles = () => {","      if (config.npm.enabled && moduleFiles.length) {","        deppack.processFiles(root, moduleFiles, processor);","      } else {","        moduleFiles.forEach(processor);","      }","    };","","    const basicGenerate = (generateModuleFiles, nonModuleFiles, processor, deppack, definition, path, root) => {","      root.add(definition);","      generateModuleFiles();","      nonModuleFiles.forEach(processor);","    };","","    const generator = isHmr ? hmr.generate : basicGenerate;","    generator(generateModuleFiles, nonModuleFiles, processor, deppack, definition, path, root);","","    autoRequire.forEach(addRequire);","  } else {","    files.forEach(processor);","  }","  return root.toStringWithSourceMap({file: path});","};","","const prepareSourceMap = (optimizedMap, sourceFiles) => {","  if (optimizedMap == null) return;","  const map = SourceMapGenerator.fromSourceMap(new SourceMapConsumer(optimizedMap));","  if (map._sourcesContents == null) map._sourcesContents = {};","  sourceFiles.forEach(arg => {","    const path = arg.path;","    const source = arg.source;","    map._sourcesContents[path] = source;","  });","  return map;","};","","const runOptimizer = optimizer => params => {","  if (!params) {","    throw new BrunchError('OPTIMIZER_INVALID', {optimizer});","  }","  const unoptMap = params.map;","  const path = params.path;","  const sourceFiles = params.sourceFiles;","  debug(`Optimizing ${path} @ ${optimizer.brunchPluginName}`);","","  return processJob('OptimizeJob', {optimizer, params}).then(optimized => {","    const data = optimized.data;","    const map = prepareSourceMap(optimized.map, sourceFiles) || unoptMap;","    return {data, path, map, sourceFiles, code: data};","  }, error => {","    throw formatOptimizerError(error, path);","  });","};","","const optimize = (data, map, path, optimizers, sourceFiles) => {","  const initial = {data, path, map, sourceFiles, code: data};","  return promiseReduce(optimizers, runOptimizer, initial);","};","","const getInlineSourceMapUrl = map => {","  const base64String = new Buffer(JSON.stringify(map)).toString('base64');","  return `data:application/json;charset=utf-8;base64,${base64String}`;","};","","const jsTypes = ['javascript', 'template'];","","const generate = (path, targets, config, optimizers) => {","  const type = targets.some(file => jsTypes.includes(file.type)) ?","    'javascript' : 'stylesheet';","","  const foptim = optimizers.filter(optimizer => optimizer.type === type);","  const joinKey = path.slice(config.paths.public.length + 1);","  const typeConfig = config.files[`${type}s`] || {};","  const joinToValue = typeConfig.joinTo && typeConfig.joinTo[joinKey] || {};","  const sorted = sort(targets, config, joinToValue);","  const norm = config._normalized;","  const definition = type === 'javascript' ? norm.modules.definition : null;","  const cc = concat(","    sorted, path, definition,","    norm.modules.autoRequire[joinKey],","    config","  );","  const code = cc.code;","  const map = cc.map;","  const withMaps = map && config.sourceMaps;","  const mapPath = `${path}.map`;","  return optimize(code, map, path, foptim, targets)","    .then(data => {","      if (withMaps) {","        const mapRoute = config.sourceMaps === 'inline' ?","          getInlineSourceMapUrl(data.map) :","          config.sourceMaps === 'absoluteUrl' ?","          mapPath.replace(config.paths.public, '') :","          sysPath.basename(mapPath);","        const controlChar = config.sourceMaps === 'old' ? '@' : '#';","        const end = `${controlChar} sourceMappingURL=${mapRoute}`;","        data.code += type === 'javascript' ? `\\n//${end}` : `\\n/*${end}*/`;","      }","      return data;","    })","    .then(data => {","      return Promise.all([","        writeFile(path, data.code),","        withMaps && config.sourceMaps !== 'inline' && writeFile(mapPath, data.map.toString()),","      ]).then(() => data);","    });","};","","generate.writeFile = writeFile;","","generate.writeStatics = (toRemove, toWrite) => {","  const removePromise = promiseReduce(toRemove, file => {","    file.dispose();","    return () => unlink(file.destinationPath);","  });","","  const writePromise = promiseReduce(toWrite, file => {","    return () => writeFile(file.destinationPath, file.compiled);","  });","","  return removePromise.then(() => writePromise);","};","","generate.sortByConfig = sortByConfig;","","module.exports = generate;",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"18":1,"19":1,"20":1,"21":1,"29":1,"30":0,"31":0,"32":0,"34":0,"35":0,"43":1,"44":0,"45":0,"50":0,"52":0,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"68":1,"69":0,"70":0,"71":0,"72":0,"74":0,"75":0,"76":0,"79":1,"80":0,"81":0,"83":0,"84":0,"85":0,"87":0,"88":0,"89":0,"90":0,"91":0,"94":0,"95":0,"97":0,"98":0,"100":0,"101":0,"103":0,"104":0,"105":0,"106":0,"108":0,"112":0,"113":0,"114":0,"115":0,"118":0,"119":0,"121":0,"123":0,"125":0,"128":1,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"137":0,"140":1,"141":0,"142":0,"144":0,"145":0,"146":0,"147":0,"149":0,"150":0,"151":0,"152":0,"154":0,"158":1,"159":0,"160":0,"163":1,"164":0,"165":0,"168":1,"170":1,"171":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"186":0,"187":0,"188":0,"189":0,"190":0,"192":0,"193":0,"198":0,"199":0,"200":0,"202":0,"205":0,"208":0,"212":1,"214":1,"215":0,"216":0,"217":0,"220":0,"221":0,"224":0,"227":1,"229":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/hmr.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/hmr.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"1":[0,0],"2":[0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":32}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":79}},"4":{"start":{"line":6,"column":30},"end":{"line":6,"column":78}},"5":{"start":{"line":7,"column":0},"end":{"line":28,"column":2}},"6":{"start":{"line":8,"column":2},"end":{"line":8,"column":59}},"7":{"start":{"line":9,"column":2},"end":{"line":9,"column":69}},"8":{"start":{"line":9,"column":43},"end":{"line":9,"column":67}},"9":{"start":{"line":11,"column":2},"end":{"line":15,"column":3}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":23}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":134}},"12":{"start":{"line":17,"column":2},"end":{"line":17,"column":23}},"13":{"start":{"line":19,"column":2},"end":{"line":19,"column":51}},"14":{"start":{"line":20,"column":2},"end":{"line":20,"column":61}},"15":{"start":{"line":22,"column":2},"end":{"line":22,"column":24}},"16":{"start":{"line":24,"column":2},"end":{"line":24,"column":18}},"17":{"start":{"line":25,"column":2},"end":{"line":25,"column":25}},"18":{"start":{"line":27,"column":2},"end":{"line":27,"column":63}},"19":{"start":{"line":27,"column":29},"end":{"line":27,"column":42}}},"branchMap":{"1":{"line":6,"type":"binary-expr","locations":[{"start":{"line":6,"column":30},"end":{"line":6,"column":40}},{"start":{"line":6,"column":44},"end":{"line":6,"column":78}}]},"2":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":11,"column":2}},{"start":{"line":11,"column":2},"end":{"line":11,"column":2}}]}},"code":["'use strict';","","const sysPath = require('universal-path');","const logger = require('loggy');","","exports.isEnabled = config => config.hot && !config.env.includes('production');","exports.generate = (generateModuleFiles, nonModuleFiles, processor, deppack, definition, path, root) => {","  const hmrPath = sysPath.join('hmr-brunch', 'runtime.js');","  const hmrFile = nonModuleFiles.find(f => f.path.includes(hmrPath));","","  if (hmrFile) {","    processor(hmrFile);","  } else {","    logger.warn(`HMR runtime not found for ${path}. HMR only works if use compile your JS into a single file, could it be the case?`);","  }","","  root.add(definition);","","  const depGraph = JSON.stringify(deppack.graph());","  root.add(`require.hmr(${depGraph}, function(require) {\\n`);","","  generateModuleFiles();","","  root.add('});');","  root.add('// hmr end');","","  nonModuleFiles.filter(f => f !== hmrFile).forEach(processor);","};",""],"l":{"3":1,"4":1,"6":1,"7":1,"8":0,"9":0,"11":0,"12":0,"14":0,"17":0,"19":0,"20":0,"22":0,"24":0,"25":0,"27":0}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/is_ignored.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/is_ignored.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0},"b":{"1":[0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":52}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":42}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"4":{"start":{"line":8,"column":0},"end":{"line":11,"column":2}},"5":{"start":{"line":9,"column":2},"end":{"line":9,"column":30}},"6":{"start":{"line":10,"column":2},"end":{"line":10,"column":54}}},"branchMap":{"1":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":9},"end":{"line":10,"column":28}},{"start":{"line":10,"column":32},"end":{"line":10,"column":53}}]}},"code":["'use strict';","const basename = require('universal-path').basename;","","// RegExps that filter out invalid files (dotfiles, emacs caches etc).","const apacheRe = /\\.(?!htaccess|rewrite)/;","const dotfilesRe = /(^[.#]|(?:__|~)$)/;","","module.exports = path => {","  const name = basename(path);","  return apacheRe.test(name) && dotfilesRe.test(name);","};",""],"l":{"2":1,"5":1,"6":1,"8":1,"9":0,"10":0}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/file_list.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/file_list.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"(anonymous_1)","line":16,"loc":{"start":{"line":16,"column":13},"end":{"line":16,"column":22}}},"2":{"name":"(anonymous_2)","line":48,"loc":{"start":{"line":48,"column":17},"end":{"line":48,"column":20}}},"3":{"name":"(anonymous_3)","line":52,"loc":{"start":{"line":52,"column":14},"end":{"line":52,"column":17}}},"4":{"name":"(anonymous_4)","line":56,"loc":{"start":{"line":56,"column":21},"end":{"line":56,"column":24}}},"5":{"name":"(anonymous_5)","line":60,"loc":{"start":{"line":60,"column":13},"end":{"line":60,"column":20}}},"6":{"name":"(anonymous_6)","line":66,"loc":{"start":{"line":66,"column":21},"end":{"line":66,"column":24}}},"7":{"name":"(anonymous_7)","line":71,"loc":{"start":{"line":71,"column":9},"end":{"line":71,"column":16}}},"8":{"name":"(anonymous_8)","line":89,"loc":{"start":{"line":89,"column":26},"end":{"line":89,"column":33}}},"9":{"name":"(anonymous_9)","line":108,"loc":{"start":{"line":108,"column":11},"end":{"line":108,"column":18}}},"10":{"name":"(anonymous_10)","line":114,"loc":{"start":{"line":114,"column":10},"end":{"line":114,"column":17}}},"11":{"name":"(anonymous_11)","line":120,"loc":{"start":{"line":120,"column":9},"end":{"line":120,"column":16}}},"12":{"name":"(anonymous_12)","line":152,"loc":{"start":{"line":152,"column":9},"end":{"line":152,"column":16}}},"13":{"name":"(anonymous_13)","line":164,"loc":{"start":{"line":164,"column":13},"end":{"line":164,"column":16}}},"14":{"name":"(anonymous_14)","line":177,"loc":{"start":{"line":177,"column":9},"end":{"line":177,"column":12}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":46}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":51}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":60}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":56}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":56}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":33}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":44}},"9":{"start":{"line":10,"column":0},"end":{"line":10,"column":46}},"10":{"start":{"line":11,"column":0},"end":{"line":11,"column":37}},"11":{"start":{"line":17,"column":4},"end":{"line":17,"column":12}},"12":{"start":{"line":21,"column":4},"end":{"line":21,"column":45}},"13":{"start":{"line":23,"column":4},"end":{"line":23,"column":36}},"14":{"start":{"line":26,"column":4},"end":{"line":26,"column":40}},"15":{"start":{"line":27,"column":4},"end":{"line":27,"column":40}},"16":{"start":{"line":28,"column":4},"end":{"line":28,"column":46}},"17":{"start":{"line":30,"column":4},"end":{"line":30,"column":27}},"18":{"start":{"line":31,"column":4},"end":{"line":31,"column":28}},"19":{"start":{"line":33,"column":4},"end":{"line":33,"column":29}},"20":{"start":{"line":34,"column":4},"end":{"line":34,"column":31}},"21":{"start":{"line":35,"column":4},"end":{"line":35,"column":30}},"22":{"start":{"line":37,"column":4},"end":{"line":37,"column":22}},"23":{"start":{"line":38,"column":4},"end":{"line":38,"column":24}},"24":{"start":{"line":39,"column":4},"end":{"line":39,"column":26}},"25":{"start":{"line":41,"column":4},"end":{"line":41,"column":36}},"26":{"start":{"line":42,"column":4},"end":{"line":42,"column":36}},"27":{"start":{"line":45,"column":4},"end":{"line":45,"column":22}},"28":{"start":{"line":49,"column":4},"end":{"line":49,"column":88}},"29":{"start":{"line":49,"column":59},"end":{"line":49,"column":69}},"30":{"start":{"line":53,"column":4},"end":{"line":53,"column":51}},"31":{"start":{"line":57,"column":4},"end":{"line":57,"column":56}},"32":{"start":{"line":61,"column":4},"end":{"line":63,"column":7}},"33":{"start":{"line":62,"column":6},"end":{"line":62,"column":35}},"34":{"start":{"line":67,"column":4},"end":{"line":67,"column":81}},"35":{"start":{"line":67,"column":39},"end":{"line":67,"column":79}},"36":{"start":{"line":68,"column":4},"end":{"line":68,"column":83}},"37":{"start":{"line":68,"column":40},"end":{"line":68,"column":81}},"38":{"start":{"line":72,"column":4},"end":{"line":72,"column":27}},"39":{"start":{"line":73,"column":4},"end":{"line":73,"column":25}},"40":{"start":{"line":74,"column":4},"end":{"line":77,"column":5}},"41":{"start":{"line":75,"column":6},"end":{"line":75,"column":25}},"42":{"start":{"line":76,"column":6},"end":{"line":76,"column":13}},"43":{"start":{"line":79,"column":4},"end":{"line":79,"column":29}},"44":{"start":{"line":80,"column":4},"end":{"line":86,"column":7}},"45":{"start":{"line":81,"column":6},"end":{"line":81,"column":34}},"46":{"start":{"line":82,"column":6},"end":{"line":82,"column":25}},"47":{"start":{"line":84,"column":6},"end":{"line":84,"column":32}},"48":{"start":{"line":85,"column":6},"end":{"line":85,"column":30}},"49":{"start":{"line":90,"column":4},"end":{"line":90,"column":50}},"50":{"start":{"line":91,"column":4},"end":{"line":91,"column":53}},"51":{"start":{"line":92,"column":4},"end":{"line":92,"column":21}},"52":{"start":{"line":93,"column":4},"end":{"line":93,"column":23}},"53":{"start":{"line":95,"column":4},"end":{"line":101,"column":7}},"54":{"start":{"line":96,"column":6},"end":{"line":96,"column":40}},"55":{"start":{"line":97,"column":6},"end":{"line":97,"column":72}},"56":{"start":{"line":98,"column":6},"end":{"line":98,"column":25}},"57":{"start":{"line":98,"column":18},"end":{"line":98,"column":25}},"58":{"start":{"line":99,"column":6},"end":{"line":99,"column":26}},"59":{"start":{"line":100,"column":6},"end":{"line":100,"column":28}},"60":{"start":{"line":103,"column":4},"end":{"line":103,"column":32}},"61":{"start":{"line":103,"column":25},"end":{"line":103,"column":32}},"62":{"start":{"line":104,"column":4},"end":{"line":104,"column":98}},"63":{"start":{"line":105,"column":4},"end":{"line":105,"column":48}},"64":{"start":{"line":105,"column":28},"end":{"line":105,"column":46}},"65":{"start":{"line":109,"column":4},"end":{"line":109,"column":75}},"66":{"start":{"line":110,"column":4},"end":{"line":110,"column":37}},"67":{"start":{"line":111,"column":4},"end":{"line":111,"column":16}},"68":{"start":{"line":115,"column":4},"end":{"line":115,"column":89}},"69":{"start":{"line":116,"column":4},"end":{"line":116,"column":36}},"70":{"start":{"line":117,"column":4},"end":{"line":117,"column":16}},"71":{"start":{"line":121,"column":4},"end":{"line":121,"column":30}},"72":{"start":{"line":121,"column":23},"end":{"line":121,"column":30}},"73":{"start":{"line":122,"column":4},"end":{"line":122,"column":39}},"74":{"start":{"line":122,"column":32},"end":{"line":122,"column":39}},"75":{"start":{"line":124,"column":4},"end":{"line":124,"column":29}},"76":{"start":{"line":125,"column":4},"end":{"line":125,"column":32}},"77":{"start":{"line":126,"column":4},"end":{"line":126,"column":37}},"78":{"start":{"line":128,"column":4},"end":{"line":149,"column":7}},"79":{"start":{"line":129,"column":6},"end":{"line":129,"column":48}},"80":{"start":{"line":130,"column":6},"end":{"line":130,"column":72}},"81":{"start":{"line":130,"column":65},"end":{"line":130,"column":72}},"82":{"start":{"line":131,"column":6},"end":{"line":131,"column":32}},"83":{"start":{"line":133,"column":6},"end":{"line":133,"column":55}},"84":{"start":{"line":134,"column":6},"end":{"line":141,"column":7}},"85":{"start":{"line":135,"column":8},"end":{"line":135,"column":54}},"86":{"start":{"line":136,"column":8},"end":{"line":138,"column":54}},"87":{"start":{"line":140,"column":8},"end":{"line":140,"column":27}},"88":{"start":{"line":143,"column":6},"end":{"line":143,"column":61}},"89":{"start":{"line":143,"column":25},"end":{"line":143,"column":61}},"90":{"start":{"line":144,"column":6},"end":{"line":144,"column":25}},"91":{"start":{"line":146,"column":6},"end":{"line":148,"column":7}},"92":{"start":{"line":147,"column":8},"end":{"line":147,"column":60}},"93":{"start":{"line":153,"column":4},"end":{"line":153,"column":53}},"94":{"start":{"line":154,"column":4},"end":{"line":160,"column":5}},"95":{"start":{"line":155,"column":6},"end":{"line":155,"column":42}},"96":{"start":{"line":157,"column":6},"end":{"line":157,"column":52}},"97":{"start":{"line":158,"column":6},"end":{"line":158,"column":74}},"98":{"start":{"line":159,"column":6},"end":{"line":159,"column":54}},"99":{"start":{"line":159,"column":34},"end":{"line":159,"column":54}},"100":{"start":{"line":161,"column":4},"end":{"line":161,"column":23}},"101":{"start":{"line":165,"column":4},"end":{"line":165,"column":45}},"102":{"start":{"line":165,"column":20},"end":{"line":165,"column":45}},"103":{"start":{"line":166,"column":4},"end":{"line":174,"column":23}},"104":{"start":{"line":167,"column":6},"end":{"line":167,"column":33}},"105":{"start":{"line":168,"column":6},"end":{"line":173,"column":7}},"106":{"start":{"line":169,"column":8},"end":{"line":169,"column":27}},"107":{"start":{"line":171,"column":8},"end":{"line":171,"column":27}},"108":{"start":{"line":172,"column":8},"end":{"line":172,"column":30}},"109":{"start":{"line":178,"column":4},"end":{"line":178,"column":47}},"110":{"start":{"line":178,"column":31},"end":{"line":178,"column":45}},"111":{"start":{"line":179,"column":4},"end":{"line":179,"column":33}},"112":{"start":{"line":180,"column":4},"end":{"line":180,"column":48}},"113":{"start":{"line":180,"column":32},"end":{"line":180,"column":46}},"114":{"start":{"line":181,"column":4},"end":{"line":181,"column":34}},"115":{"start":{"line":183,"column":4},"end":{"line":183,"column":35}},"116":{"start":{"line":184,"column":4},"end":{"line":184,"column":37}},"117":{"start":{"line":185,"column":4},"end":{"line":185,"column":36}},"118":{"start":{"line":187,"column":4},"end":{"line":187,"column":25}},"119":{"start":{"line":188,"column":4},"end":{"line":188,"column":30}},"120":{"start":{"line":189,"column":4},"end":{"line":189,"column":29}},"121":{"start":{"line":192,"column":4},"end":{"line":192,"column":24}},"122":{"start":{"line":196,"column":0},"end":{"line":196,"column":26}}},"branchMap":{"1":{"line":53,"type":"binary-expr","locations":[{"start":{"line":53,"column":14},"end":{"line":53,"column":29}},{"start":{"line":53,"column":33},"end":{"line":53,"column":49}}]},"2":{"line":57,"type":"binary-expr","locations":[{"start":{"line":57,"column":14},"end":{"line":57,"column":31}},{"start":{"line":57,"column":35},"end":{"line":57,"column":54}}]},"3":{"line":67,"type":"binary-expr","locations":[{"start":{"line":67,"column":39},"end":{"line":67,"column":52}},{"start":{"line":67,"column":56},"end":{"line":67,"column":79}}]},"4":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":40},"end":{"line":68,"column":53}},{"start":{"line":68,"column":57},"end":{"line":68,"column":81}}]},"5":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"6":{"line":91,"type":"cond-expr","locations":[{"start":{"line":91,"column":28},"end":{"line":91,"column":39}},{"start":{"line":91,"column":42},"end":{"line":91,"column":52}}]},"7":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":20},"end":{"line":97,"column":40}},{"start":{"line":97,"column":44},"end":{"line":97,"column":71}}]},"8":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":6},"end":{"line":98,"column":6}},{"start":{"line":98,"column":6},"end":{"line":98,"column":6}}]},"9":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"10":{"line":104,"type":"cond-expr","locations":[{"start":{"line":104,"column":33},"end":{"line":104,"column":40}},{"start":{"line":104,"column":43},"end":{"line":104,"column":55}}]},"11":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":4},"end":{"line":121,"column":4}},{"start":{"line":121,"column":4},"end":{"line":121,"column":4}}]},"12":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":4},"end":{"line":122,"column":4}},{"start":{"line":122,"column":4},"end":{"line":122,"column":4}}]},"13":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":6},"end":{"line":130,"column":6}},{"start":{"line":130,"column":6},"end":{"line":130,"column":6}}]},"14":{"line":130,"type":"binary-expr","locations":[{"start":{"line":130,"column":10},"end":{"line":130,"column":23}},{"start":{"line":130,"column":27},"end":{"line":130,"column":38}},{"start":{"line":130,"column":42},"end":{"line":130,"column":63}}]},"15":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":6},"end":{"line":134,"column":6}},{"start":{"line":134,"column":6},"end":{"line":134,"column":6}}]},"16":{"line":136,"type":"cond-expr","locations":[{"start":{"line":137,"column":10},"end":{"line":137,"column":55}},{"start":{"line":138,"column":10},"end":{"line":138,"column":53}}]},"17":{"line":137,"type":"binary-expr","locations":[{"start":{"line":137,"column":10},"end":{"line":137,"column":31}},{"start":{"line":137,"column":35},"end":{"line":137,"column":55}}]},"18":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":10},"end":{"line":138,"column":30}},{"start":{"line":138,"column":34},"end":{"line":138,"column":53}}]},"19":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":6},"end":{"line":143,"column":6}},{"start":{"line":143,"column":6},"end":{"line":143,"column":6}}]},"20":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":6},"end":{"line":146,"column":6}},{"start":{"line":146,"column":6},"end":{"line":146,"column":6}}]},"21":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":4},"end":{"line":154,"column":4}},{"start":{"line":154,"column":4},"end":{"line":154,"column":4}}]},"22":{"line":158,"type":"cond-expr","locations":[{"start":{"line":158,"column":29},"end":{"line":158,"column":50}},{"start":{"line":158,"column":53},"end":{"line":158,"column":73}}]},"23":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":6},"end":{"line":159,"column":6}},{"start":{"line":159,"column":6},"end":{"line":159,"column":6}}]},"24":{"line":159,"type":"binary-expr","locations":[{"start":{"line":159,"column":10},"end":{"line":159,"column":14}},{"start":{"line":159,"column":18},"end":{"line":159,"column":32}}]},"25":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":4},"end":{"line":165,"column":4}},{"start":{"line":165,"column":4},"end":{"line":165,"column":4}}]},"26":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":6},"end":{"line":168,"column":6}},{"start":{"line":168,"column":6},"end":{"line":168,"column":6}}]}},"code":["'use strict';","const debug = require('debug')('brunch:list');","const EventEmitter = require('events');","const readAndCache = require('fcache').updateCache;","const formatError = require('../utils/helpers').formatError;","const FrozenMap = require('../utils/helpers').FrozenMap;","const FrozenSet = require('../utils/helpers').FrozenSet;","const Asset = require('./asset');","const SourceFile = require('./source_file');","const BrunchError = require('../utils/error');","const anymatch = require('anymatch');","","// A list of `fs_utils.SourceFile` or `fs_utils.Asset` that contains *all* file","// from Brunches app with some additional methods used to simplify file reading / removing.","class FileList extends EventEmitter {","  constructor(config) {","    super();","","    // Maximum time between changes of two files that","    // will be considered as a one compilation.","    this.resetTime = config.fileListInterval;","","    const norm = config._normalized;","","    // Grab values from config.","    this.publicPath = norm.paths.public;","    this.conventions = norm.conventions;","    this.moduleWrapper = norm.modules.wrapper;","","    this.files = new Map();","    this.assets = new Map();","","    this.reading = new Map();","    this.compiling = new Set();","    this.compiled = new Set();","","    this.timer = null;","    this.initial = true;","    this.disposed = false;","","    this.on('change', this._change);","    this.on('unlink', this._unlink);","","    // Disallow adding new properties and changing descriptors.","    Object.seal(this);","  }","","  get assetErrors() {","    return Array.from(this.assets.values()).filter(file => file.error).map(formatError);","  }","","  get hasFiles() {","    return !!(this.files.size || this.assets.size);","  }","","  get hasPendingFiles() {","    return !!(this.reading.size || this.compiling.size);","  }","","  copiedAfter(time) {","    return Array.from(this.assets.values()).filter(asset => {","      return asset.copyTime > time;","    });","  }","","  removeDisposedFiles() {","    this.files.forEach((file, path) => file.disposed && this.files.delete(path));","    this.assets.forEach((file, path) => file.disposed && this.assets.delete(path));","  }","","  compile(file) {","    const path = file.path;","    file.removed = false;","    if (this.compiling.has(path)) {","      this._resetTimer();","      return;","    }","","    this.compiling.add(path);","    file.compile().finally(() => {","      this.compiling.delete(path);","      this._resetTimer();","    }).then(() => {","      debug(`Compiled ${path}`);","      this.compiled.add(path);","    });","  }","","  compileDependencyParents(path) {","    const isAsset = this.conventions.assets(path);","    const files = isAsset ? this.assets : this.files;","    const paths = [];","    const parents = [];","","    files.forEach((depFile, depPath) => {","      const deps = depFile.dependencies;","      const isDep = anymatch(deps, path) && !this.compiled.has(depPath);","      if (!isDep) return;","      paths.push(depPath);","      parents.push(depFile);","    });","","    if (!parents.length) return;","    debug(`Compiling ${isAsset ? 'asset' : 'dependency'} ${path} parent(s): ${paths.join(', ')}`);","    parents.forEach(file => this.compile(file));","  }","","  _addAsset(path) {","    const file = new Asset(path, this.publicPath, this.conventions.assets);","    this.assets.set(file.path, file);","    return file;","  }","","  _addFile(path) {","    const file = new SourceFile(path, this.conventions.vendor, this.moduleWrapper, this);","    this.files.set(file.path, file);","    return file;","  }","","  _change(path) {","    if (this.disposed) return;","    if (this.reading.has(path)) return;","","    debug(`Reading ${path}`);","    const readDate = Date.now();","    this.reading.set(path, readDate);","","    readAndCache(path).then(() => {","      const cachedDate = this.reading.get(path);","      if (this.disposed || !cachedDate || cachedDate > readDate) return;","      this.reading.delete(path);","","      const isIgnored = this.conventions.ignored(path);","      if (!isIgnored) {","        const isAsset = this.conventions.assets(path);","        const file = isAsset ?","          this.assets.get(path) || this._addAsset(path) :","          this.files.get(path) || this._addFile(path);","","        this.compile(file);","      }","","      if (!this.initial) this.compileDependencyParents(path);","      this._resetTimer();","    }, error => {","      if (!this.disposed) {","        throw new BrunchError('READ_FAILED', {path, error});","      }","    });","  }","","  _unlink(path) {","    const isIgnored = this.conventions.ignored(path);","    if (isIgnored) {","      this.compileDependencyParents(path);","    } else {","      const isAsset = this.conventions.assets(path);","      const file = isAsset ? this.assets.get(path) : this.files.get(path);","      if (file && !file.disposed) file.removed = true;","    }","    this._resetTimer();","  }","","  _resetTimer() {","    if (this.timer) clearTimeout(this.timer);","    this.timer = setTimeout(() => {","      this.removeDisposedFiles();","      if (this.hasPendingFiles) {","        this._resetTimer();","      } else {","        this.emit('ready');","        this.compiled.clear();","      }","    }, this.resetTime);","  }","","  dispose() {","    this.files.forEach(file => file.dispose());","    this.files = new FrozenMap();","    this.assets.forEach(file => file.dispose());","    this.assets = new FrozenMap();","","    this.reading = new FrozenMap();","    this.compiling = new FrozenSet();","    this.compiled = new FrozenSet();","","    this.disposed = true;","    this.removeAllListeners();","    clearTimeout(this.timer);","","    // You're frozen when your heart's not open.","    Object.freeze(this);","  }","}","","module.exports = FileList;",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"17":0,"21":0,"23":0,"26":0,"27":0,"28":0,"30":0,"31":0,"33":0,"34":0,"35":0,"37":0,"38":0,"39":0,"41":0,"42":0,"45":0,"49":0,"53":0,"57":0,"61":0,"62":0,"67":0,"68":0,"72":0,"73":0,"74":0,"75":0,"76":0,"79":0,"80":0,"81":0,"82":0,"84":0,"85":0,"90":0,"91":0,"92":0,"93":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"103":0,"104":0,"105":0,"109":0,"110":0,"111":0,"115":0,"116":0,"117":0,"121":0,"122":0,"124":0,"125":0,"126":0,"128":0,"129":0,"130":0,"131":0,"133":0,"134":0,"135":0,"136":0,"140":0,"143":0,"144":0,"146":0,"147":0,"153":0,"154":0,"155":0,"157":0,"158":0,"159":0,"161":0,"165":0,"166":0,"167":0,"168":0,"169":0,"171":0,"172":0,"178":0,"179":0,"180":0,"181":0,"183":0,"184":0,"185":0,"187":0,"188":0,"189":0,"192":0,"196":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/asset.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/asset.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":19,"loc":{"start":{"line":19,"column":13},"end":{"line":19,"column":50}}},"2":{"name":"(anonymous_2)","line":39,"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":15}}},"3":{"name":"(anonymous_3)","line":43,"loc":{"start":{"line":43,"column":14},"end":{"line":43,"column":17}}},"4":{"name":"(anonymous_4)","line":47,"loc":{"start":{"line":47,"column":9},"end":{"line":47,"column":12}}},"5":{"name":"(anonymous_5)","line":63,"loc":{"start":{"line":63,"column":18},"end":{"line":63,"column":21}}},"6":{"name":"(anonymous_6)","line":77,"loc":{"start":{"line":77,"column":14},"end":{"line":77,"column":21}}},"7":{"name":"(anonymous_7)","line":93,"loc":{"start":{"line":93,"column":9},"end":{"line":93,"column":12}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":47}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":49}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":56}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":46}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":42}},"7":{"start":{"line":12,"column":0},"end":{"line":16,"column":2}},"8":{"start":{"line":13,"column":2},"end":{"line":15,"column":18}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":60}},"10":{"start":{"line":20,"column":4},"end":{"line":20,"column":32}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":44}},"12":{"start":{"line":23,"column":4},"end":{"line":23,"column":23}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":41}},"14":{"start":{"line":26,"column":4},"end":{"line":26,"column":34}},"15":{"start":{"line":27,"column":4},"end":{"line":27,"column":46}},"16":{"start":{"line":28,"column":4},"end":{"line":28,"column":31}},"17":{"start":{"line":29,"column":4},"end":{"line":29,"column":36}},"18":{"start":{"line":31,"column":4},"end":{"line":31,"column":22}},"19":{"start":{"line":32,"column":4},"end":{"line":32,"column":27}},"20":{"start":{"line":33,"column":4},"end":{"line":33,"column":29}},"21":{"start":{"line":36,"column":4},"end":{"line":36,"column":22}},"22":{"start":{"line":40,"column":4},"end":{"line":40,"column":32}},"23":{"start":{"line":44,"column":4},"end":{"line":44,"column":32}},"24":{"start":{"line":48,"column":4},"end":{"line":48,"column":27}},"25":{"start":{"line":49,"column":4},"end":{"line":51,"column":5}},"26":{"start":{"line":50,"column":6},"end":{"line":50,"column":56}},"27":{"start":{"line":53,"column":4},"end":{"line":53,"column":54}},"28":{"start":{"line":53,"column":25},"end":{"line":53,"column":54}},"29":{"start":{"line":55,"column":4},"end":{"line":74,"column":9}},"30":{"start":{"line":57,"column":8},"end":{"line":57,"column":27}},"31":{"start":{"line":58,"column":8},"end":{"line":58,"column":36}},"32":{"start":{"line":59,"column":8},"end":{"line":59,"column":32}},"33":{"start":{"line":61,"column":8},"end":{"line":67,"column":10}},"34":{"start":{"line":64,"column":12},"end":{"line":64,"column":39}},"35":{"start":{"line":65,"column":12},"end":{"line":65,"column":29}},"36":{"start":{"line":70,"column":20},"end":{"line":70,"column":43}},"37":{"start":{"line":72,"column":8},"end":{"line":72,"column":27}},"38":{"start":{"line":73,"column":8},"end":{"line":73,"column":20}},"39":{"start":{"line":78,"column":4},"end":{"line":78,"column":46}},"40":{"start":{"line":79,"column":4},"end":{"line":79,"column":68}},"41":{"start":{"line":80,"column":4},"end":{"line":82,"column":5}},"42":{"start":{"line":81,"column":6},"end":{"line":81,"column":51}},"43":{"start":{"line":84,"column":4},"end":{"line":84,"column":50}},"44":{"start":{"line":86,"column":4},"end":{"line":86,"column":22}},"45":{"start":{"line":87,"column":4},"end":{"line":87,"column":63}},"46":{"start":{"line":88,"column":4},"end":{"line":88,"column":69}},"47":{"start":{"line":89,"column":4},"end":{"line":89,"column":48}},"48":{"start":{"line":90,"column":4},"end":{"line":90,"column":38}},"49":{"start":{"line":94,"column":4},"end":{"line":94,"column":42}},"50":{"start":{"line":96,"column":4},"end":{"line":96,"column":19}},"51":{"start":{"line":97,"column":4},"end":{"line":97,"column":36}},"52":{"start":{"line":98,"column":4},"end":{"line":98,"column":23}},"53":{"start":{"line":99,"column":4},"end":{"line":99,"column":25}},"54":{"start":{"line":100,"column":4},"end":{"line":100,"column":22}},"55":{"start":{"line":101,"column":4},"end":{"line":101,"column":42}},"56":{"start":{"line":104,"column":4},"end":{"line":104,"column":24}},"57":{"start":{"line":108,"column":0},"end":{"line":108,"column":23}}},"branchMap":{"1":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":49,"column":4}},{"start":{"line":49,"column":4},"end":{"line":49,"column":4}}]},"2":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"3":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":4},"end":{"line":80,"column":4}},{"start":{"line":80,"column":4},"end":{"line":80,"column":4}}]},"4":{"line":88,"type":"cond-expr","locations":[{"start":{"line":88,"column":41},"end":{"line":88,"column":50}},{"start":{"line":88,"column":53},"end":{"line":88,"column":68}}]},"5":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":24},"end":{"line":89,"column":41}},{"start":{"line":89,"column":45},"end":{"line":89,"column":47}}]}},"code":["'use strict';","const debug = require('debug')('brunch:asset');","const sysPath = require('universal-path');","const readFromCache = require('fcache').readFile;","const processAsset = require('./pipeline').processAsset;","const BrunchError = require('../utils/error');","const isIgnored = require('./is_ignored');","","// Returns all parent directories:","// < parentDirs('app/assets/thing/index.html')","// > ['app/', 'app/assets/', 'app/assets/thing/']","const parentDirs = path => {","  return path.split('/').map((part, index, parts) => {","    return parts.slice(0, index).concat(part, '').join('/');","  }).slice(0, -1);","};","","class Asset {","  constructor(path, publicPath, assetsConvention) {","    debug(`Init asset ${path}`);","","    this.destinationPath = this.path = path;","    this.compiled = '';","    this.removed = this.disposed = false;","","    this._publicPath = publicPath;","    this._assetsConvention = assetsConvention;","    this._wasProcessed = false;","    this._rawSource = new Buffer(0);","","    this.error = null;","    this.dependencies = [];","    this.compilationTime = 0;","","    // Disallow adding new properties and changing descriptors.","    Object.seal(this);","  }","","  get source() {","    return `${this._rawSource}`;","  }","","  get copyTime() {","    return this.compilationTime;","  }","","  compile() {","    const path = this.path;","    if (this.disposed) {","      throw new BrunchError('ALREADY_DISPOSED', {path});","    }","","    if (isIgnored(path)) return Promise.resolve(this);","","    return readFromCache(path)","      .then(data => {","        const asset = this;","        asset._wasProcessed = false;","        asset._rawSource = data;","","        return {","          path,","          get data() {","            asset._wasProcessed = true;","            return `${data}`;","          },","        };","      })","      .then(processAsset)","      .then(file => this._updateCache(file))","      .catch(error => {","        this.error = error;","        return this;","      });","  }","","  _updateCache(file) {","    const path = sysPath.normalize(file.path);","    const assetsDir = parentDirs(path).find(this._assetsConvention);","    if (!assetsDir) {","      throw new BrunchError('MOVED_ASSET', {path});","    }","","    const rel = sysPath.relative(assetsDir, path);","","    this.error = null;","    this.destinationPath = sysPath.join(this._publicPath, rel);","    this.compiled = this._wasProcessed ? file.data : this._rawSource;","    this.dependencies = file.dependencies || [];","    this.compilationTime = Date.now();","  }","","  dispose() {","    debug(`Disposing asset ${this.path}`);","","    this.path = '';","    this._rawSource = new Buffer(0);","    this.compiled = '';","    this.disposed = true;","    this.error = null;","    this.dependencies = Object.freeze([]);","","    // You're frozen when your heart's not open.","    Object.freeze(this);","  }","}","","module.exports = Asset;",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"12":1,"13":0,"14":0,"20":0,"22":0,"23":0,"24":0,"26":0,"27":0,"28":0,"29":0,"31":0,"32":0,"33":0,"36":0,"40":0,"44":0,"48":0,"49":0,"50":0,"53":0,"55":0,"57":0,"58":0,"59":0,"61":0,"64":0,"65":0,"70":0,"72":0,"73":0,"78":0,"79":0,"80":0,"81":0,"84":0,"86":0,"87":0,"88":0,"89":0,"90":0,"94":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"104":0,"108":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/pipeline.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/pipeline.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1,"84":0,"85":0,"86":1,"87":1,"88":1,"89":0,"90":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":168,"loc":{"start":{"line":168,"column":12},"end":{"line":168,"column":20}}},"2":{"name":"(anonymous_2)","line":171,"loc":{"start":{"line":171,"column":17},"end":{"line":171,"column":25}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":42}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":50}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":48}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":46}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":46}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":26}},"9":{"start":{"line":14,"column":0},"end":{"line":21,"column":2}},"10":{"start":{"line":14,"column":27},"end":{"line":21,"column":1}},"11":{"start":{"line":15,"column":2},"end":{"line":17,"column":3}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":29}},"13":{"start":{"line":19,"column":2},"end":{"line":19,"column":31}},"14":{"start":{"line":20,"column":2},"end":{"line":20,"column":14}},"15":{"start":{"line":23,"column":0},"end":{"line":39,"column":2}},"16":{"start":{"line":24,"column":2},"end":{"line":24,"column":25}},"17":{"start":{"line":25,"column":2},"end":{"line":30,"column":5}},"18":{"start":{"line":26,"column":4},"end":{"line":26,"column":37}},"19":{"start":{"line":28,"column":4},"end":{"line":28,"column":58}},"20":{"start":{"line":29,"column":4},"end":{"line":29,"column":29}},"21":{"start":{"line":32,"column":2},"end":{"line":38,"column":22}},"22":{"start":{"line":33,"column":4},"end":{"line":37,"column":5}},"23":{"start":{"line":34,"column":6},"end":{"line":34,"column":50}},"24":{"start":{"line":36,"column":6},"end":{"line":36,"column":32}},"25":{"start":{"line":38,"column":16},"end":{"line":38,"column":20}},"26":{"start":{"line":41,"column":0},"end":{"line":66,"column":2}},"27":{"start":{"line":42,"column":2},"end":{"line":42,"column":25}},"28":{"start":{"line":43,"column":2},"end":{"line":43,"column":66}},"29":{"start":{"line":45,"column":2},"end":{"line":65,"column":39}},"30":{"start":{"line":46,"column":4},"end":{"line":46,"column":38}},"31":{"start":{"line":46,"column":26},"end":{"line":46,"column":38}},"32":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"33":{"start":{"line":48,"column":6},"end":{"line":48,"column":57}},"34":{"start":{"line":51,"column":4},"end":{"line":53,"column":38}},"35":{"start":{"line":55,"column":4},"end":{"line":64,"column":7}},"36":{"start":{"line":56,"column":6},"end":{"line":56,"column":46}},"37":{"start":{"line":58,"column":6},"end":{"line":63,"column":9}},"38":{"start":{"line":69,"column":0},"end":{"line":78,"column":2}},"39":{"start":{"line":70,"column":2},"end":{"line":72,"column":3}},"40":{"start":{"line":71,"column":4},"end":{"line":71,"column":29}},"41":{"start":{"line":74,"column":2},"end":{"line":74,"column":77}},"42":{"start":{"line":75,"column":2},"end":{"line":77,"column":42}},"43":{"start":{"line":76,"column":4},"end":{"line":76,"column":67}},"44":{"start":{"line":80,"column":0},"end":{"line":96,"column":3}},"45":{"start":{"line":81,"column":2},"end":{"line":83,"column":5}},"46":{"start":{"line":82,"column":4},"end":{"line":82,"column":40}},"47":{"start":{"line":85,"column":2},"end":{"line":93,"column":4}},"48":{"start":{"line":86,"column":4},"end":{"line":88,"column":7}},"49":{"start":{"line":87,"column":6},"end":{"line":87,"column":52}},"50":{"start":{"line":90,"column":4},"end":{"line":92,"column":11}},"51":{"start":{"line":95,"column":2},"end":{"line":95,"column":28}},"52":{"start":{"line":98,"column":0},"end":{"line":124,"column":2}},"53":{"start":{"line":99,"column":2},"end":{"line":99,"column":25}},"54":{"start":{"line":100,"column":2},"end":{"line":100,"column":60}},"55":{"start":{"line":102,"column":2},"end":{"line":123,"column":33}},"56":{"start":{"line":103,"column":4},"end":{"line":103,"column":38}},"57":{"start":{"line":103,"column":26},"end":{"line":103,"column":38}},"58":{"start":{"line":104,"column":4},"end":{"line":106,"column":5}},"59":{"start":{"line":105,"column":6},"end":{"line":105,"column":57}},"60":{"start":{"line":108,"column":4},"end":{"line":110,"column":38}},"61":{"start":{"line":112,"column":4},"end":{"line":122,"column":7}},"62":{"start":{"line":113,"column":6},"end":{"line":113,"column":46}},"63":{"start":{"line":115,"column":6},"end":{"line":121,"column":9}},"64":{"start":{"line":126,"column":0},"end":{"line":156,"column":3}},"65":{"start":{"line":127,"column":2},"end":{"line":127,"column":25}},"66":{"start":{"line":128,"column":2},"end":{"line":128,"column":36}},"67":{"start":{"line":130,"column":2},"end":{"line":132,"column":15}},"68":{"start":{"line":131,"column":16},"end":{"line":131,"column":64}},"69":{"start":{"line":132,"column":10},"end":{"line":132,"column":14}},"70":{"start":{"line":134,"column":2},"end":{"line":134,"column":59}},"71":{"start":{"line":135,"column":2},"end":{"line":143,"column":4}},"72":{"start":{"line":136,"column":4},"end":{"line":138,"column":7}},"73":{"start":{"line":137,"column":6},"end":{"line":137,"column":46}},"74":{"start":{"line":140,"column":4},"end":{"line":142,"column":11}},"75":{"start":{"line":145,"column":2},"end":{"line":145,"column":49}},"76":{"start":{"line":146,"column":2},"end":{"line":146,"column":30}},"77":{"start":{"line":146,"column":14},"end":{"line":146,"column":30}},"78":{"start":{"line":148,"column":2},"end":{"line":155,"column":5}},"79":{"start":{"line":149,"column":4},"end":{"line":149,"column":42}},"80":{"start":{"line":151,"column":4},"end":{"line":154,"column":7}},"81":{"start":{"line":152,"column":6},"end":{"line":152,"column":26}},"82":{"start":{"line":153,"column":6},"end":{"line":153,"column":18}},"83":{"start":{"line":158,"column":0},"end":{"line":160,"column":3}},"84":{"start":{"line":158,"column":25},"end":{"line":160,"column":2}},"85":{"start":{"line":159,"column":2},"end":{"line":159,"column":43}},"86":{"start":{"line":162,"column":0},"end":{"line":162,"column":17}},"87":{"start":{"line":163,"column":0},"end":{"line":163,"column":22}},"88":{"start":{"line":165,"column":0},"end":{"line":174,"column":2}},"89":{"start":{"line":169,"column":4},"end":{"line":169,"column":20}},"90":{"start":{"line":172,"column":4},"end":{"line":172,"column":25}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":15,"column":2}},{"start":{"line":15,"column":2},"end":{"line":15,"column":2}}]},"2":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"3":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"4":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]},"5":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":6},"end":{"line":52,"column":44}},{"start":{"line":53,"column":6},"end":{"line":53,"column":37}}]},"6":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":19},"end":{"line":56,"column":32}},{"start":{"line":56,"column":36},"end":{"line":56,"column":45}}]},"7":{"line":60,"type":"cond-expr","locations":[{"start":{"line":61,"column":10},"end":{"line":61,"column":61}},{"start":{"line":62,"column":10},"end":{"line":62,"column":14}}]},"8":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":2},"end":{"line":70,"column":2}},{"start":{"line":70,"column":2},"end":{"line":70,"column":2}}]},"9":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":23},"end":{"line":76,"column":36}},{"start":{"line":76,"column":40},"end":{"line":76,"column":42}}]},"10":{"line":90,"type":"cond-expr","locations":[{"start":{"line":91,"column":6},"end":{"line":91,"column":54}},{"start":{"line":92,"column":6},"end":{"line":92,"column":10}}]},"11":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"12":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":104,"column":4}},{"start":{"line":104,"column":4},"end":{"line":104,"column":4}}]},"13":{"line":108,"type":"cond-expr","locations":[{"start":{"line":109,"column":6},"end":{"line":109,"column":44}},{"start":{"line":110,"column":6},"end":{"line":110,"column":37}}]},"14":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":19},"end":{"line":113,"column":32}},{"start":{"line":113,"column":36},"end":{"line":113,"column":45}}]},"15":{"line":118,"type":"cond-expr","locations":[{"start":{"line":119,"column":10},"end":{"line":119,"column":55}},{"start":{"line":120,"column":10},"end":{"line":120,"column":14}}]},"16":{"line":130,"type":"cond-expr","locations":[{"start":{"line":131,"column":4},"end":{"line":131,"column":64}},{"start":{"line":132,"column":4},"end":{"line":132,"column":14}}]},"17":{"line":140,"type":"cond-expr","locations":[{"start":{"line":141,"column":6},"end":{"line":141,"column":48}},{"start":{"line":142,"column":6},"end":{"line":142,"column":10}}]},"18":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":2},"end":{"line":146,"column":2}},{"start":{"line":146,"column":2},"end":{"line":146,"column":2}}]}},"code":["'use strict';","const sysPath = require('universal-path');","const logger = require('loggy');","const debug = require('debug')('brunch:pipeline');","const deppack = require('deppack'); // isNpm","const parallel = require('../workers').parallel;","const BrunchError = require('../utils/error');","const pull = require('../utils/helpers').pull;","","// Pipeline: File -> File.","// Takes file and a) lints b) compiles c) extracts dependencies from it.","","const extRe = /(\\.\\w+)+$/;","const rethrow = message => error => {","  if (!(error instanceof Error)) {","    error = new Error(error);","  }","","  error.pipelineCode = message;","  throw error;","};","","const lint = file => {","  const path = file.path;","  const linters = respondTo('lint').filter(linter => {","    return linter.pattern.test(path);","  }).map(linter => {","    debug(`Linting ${path} @ ${linter.brunchPluginName}`);","    return linter.lint(file);","  });","","  return Promise.all(linters).catch(error => {","    if (/^warn:\\s/i.test(error)) {","      logger.warn(`Linting of ${path}: ${error}`);","    } else {","      rethrow('Linting')(error);","    }","  }).then(() => file);","};","","const compileStatic = (file, compiler) => {","  const path = file.path;","  debug(`Compiling asset ${path} @ ${compiler.brunchPluginName}`);","","  return compiler.compileStatic(file).then(compiled => {","    if (compiled == null) return file;","    if (compiled.data == null) {","      throw new BrunchError('FILE_DATA_INVALID', {path});","    }","","    const deps = Array.isArray(compiled.dependencies) ?","      Promise.resolve(compiled.dependencies) :","      getDependencies(file, compiler);","","    return deps.then(dependencies => {","      const path = compiled.path || file.path;","","      return Object.assign({}, compiled, {","        dependencies,","        path: compiler.staticTargetExtension ?","          path.replace(extRe, compiler.staticTargetExtension) :","          path,","      });","    });","  }).catch(rethrow('Compiling asset'));","};","","// Extract files' paths that depend on current file.","const getDependencies = (file, compiler) => {","  if (typeof compiler.getDependencies !== 'function') {","    return Promise.resolve();","  }","","  debug(`Fetching dependencies ${file.path} @ ${compiler.brunchPluginName}`);","  return compiler.getDependencies(file).then(deps => {","    return deps.concat(deps.patterns || []).map(sysPath.normalize);","  }).catch(rethrow('Dependency parsing'));","};","","const processAsset = parallel('PROCESS_ASSET', file => {","  const compilers = respondTo('compileStatic').filter(compiler => {","    return compiler.type === 'template';","  });","","  const nextCompiler = file => {","    const compiler = pull(compilers, compiler => {","      return compiler.staticPattern.test(file.path);","    });","","    return compiler ?","      compileStatic(file, compiler).then(nextCompiler) :","      file;","  };","","  return nextCompiler(file);","});","","const compile = (file, compiler) => {","  const path = file.path;","  debug(`Compiling ${path} @ ${compiler.brunchPluginName}`);","","  return compiler.compile(file).then(compiled => {","    if (compiled == null) return file;","    if (compiled.data == null) {","      throw new BrunchError('FILE_DATA_INVALID', {path});","    }","","    const deps = Array.isArray(compiled.dependencies) ?","      Promise.resolve(compiled.dependencies) :","      getDependencies(file, compiler);","","    return deps.then(dependencies => {","      const path = compiled.path || file.path;","","      return Object.assign({}, compiled, {","        dependencies,","        type: compiler.type,","        path: compiler.targetExtension ?","          path.replace(extRe, compiler.targetExtension) :","          path,","      });","    });","  }).catch(rethrow('Compiling'));","};","","const processFile = parallel('PROCESS_FILE', file => {","  const path = file.path;","  const isNpm = deppack.isNpm(path);","","  const usePlugin = isNpm ?","    compiler => npmCompilers.includes(compiler.brunchPluginName) :","    () => true;","","  const compilers = respondTo('compile').filter(usePlugin);","  const nextCompiler = file => {","    const compiler = pull(compilers, compiler => {","      return compiler.pattern.test(file.path);","    });","","    return compiler ?","      compile(file, compiler).then(nextCompiler) :","      file;","  };","","  const compiled = lint(file).then(nextCompiler);","  if (!isNpm) return compiled;","","  return compiled.then(file => {","    const absPath = sysPath.resolve(path);","","    return deppack.wrapSourceInModule(file.data, absPath).then(wrapped => {","      file.data = wrapped;","      return file;","    });","  });","});","","const respondTo = key => plugins.filter(plugin => {","  return typeof plugin[key] === 'function';","});","","let plugins = [];","let npmCompilers = [];","","module.exports = {","  processAsset,","  processFile,","  setPlugins(array) {","    plugins = array;","  },","  setNpmCompilers(array) {","    npmCompilers = array;","  },","};",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"13":1,"14":1,"15":0,"16":0,"19":0,"20":0,"23":1,"24":0,"25":0,"26":0,"28":0,"29":0,"32":0,"33":0,"34":0,"36":0,"38":0,"41":1,"42":0,"43":0,"45":0,"46":0,"47":0,"48":0,"51":0,"55":0,"56":0,"58":0,"69":1,"70":0,"71":0,"74":0,"75":0,"76":0,"80":1,"81":0,"82":0,"85":0,"86":0,"87":0,"90":0,"95":0,"98":1,"99":0,"100":0,"102":0,"103":0,"104":0,"105":0,"108":0,"112":0,"113":0,"115":0,"126":1,"127":0,"128":0,"130":0,"131":0,"132":0,"134":0,"135":0,"136":0,"137":0,"140":0,"145":0,"146":0,"148":0,"149":0,"151":0,"152":0,"153":0,"158":1,"159":0,"162":1,"163":1,"165":1,"169":0,"172":0}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/source_file.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/fs_utils/source_file.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"(anonymous_1)","line":50,"loc":{"start":{"line":50,"column":13},"end":{"line":50,"column":63}}},"2":{"name":"(anonymous_2)","line":73,"loc":{"start":{"line":73,"column":22},"end":{"line":73,"column":25}}},"3":{"name":"(anonymous_3)","line":77,"loc":{"start":{"line":77,"column":14},"end":{"line":77,"column":17}}},"4":{"name":"(anonymous_4)","line":81,"loc":{"start":{"line":81,"column":10},"end":{"line":81,"column":13}}},"5":{"name":"(anonymous_5)","line":85,"loc":{"start":{"line":85,"column":14},"end":{"line":85,"column":17}}},"6":{"name":"(anonymous_6)","line":89,"loc":{"start":{"line":89,"column":9},"end":{"line":89,"column":12}}},"7":{"name":"(anonymous_7)","line":119,"loc":{"start":{"line":119,"column":14},"end":{"line":119,"column":21}}},"8":{"name":"(anonymous_8)","line":141,"loc":{"start":{"line":141,"column":7},"end":{"line":141,"column":14}}},"9":{"name":"(anonymous_9)","line":145,"loc":{"start":{"line":145,"column":15},"end":{"line":145,"column":22}}},"10":{"name":"(anonymous_10)","line":155,"loc":{"start":{"line":155,"column":12},"end":{"line":155,"column":34}}},"11":{"name":"(anonymous_11)","line":175,"loc":{"start":{"line":175,"column":9},"end":{"line":175,"column":12}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":46}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":49}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":32}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":54}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":66}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":52}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":46}},"9":{"start":{"line":10,"column":0},"end":{"line":10,"column":52}},"10":{"start":{"line":12,"column":0},"end":{"line":18,"column":2}},"11":{"start":{"line":13,"column":2},"end":{"line":15,"column":5}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":59}},"13":{"start":{"line":17,"column":2},"end":{"line":17,"column":43}},"14":{"start":{"line":20,"column":0},"end":{"line":26,"column":2}},"15":{"start":{"line":21,"column":2},"end":{"line":23,"column":4}},"16":{"start":{"line":25,"column":2},"end":{"line":25,"column":60}},"17":{"start":{"line":28,"column":0},"end":{"line":40,"column":2}},"18":{"start":{"line":29,"column":2},"end":{"line":29,"column":28}},"19":{"start":{"line":30,"column":2},"end":{"line":30,"column":39}},"20":{"start":{"line":31,"column":2},"end":{"line":31,"column":86}},"21":{"start":{"line":33,"column":2},"end":{"line":33,"column":31}},"22":{"start":{"line":34,"column":2},"end":{"line":34,"column":21}},"23":{"start":{"line":35,"column":2},"end":{"line":35,"column":36}},"24":{"start":{"line":36,"column":2},"end":{"line":36,"column":31}},"25":{"start":{"line":37,"column":2},"end":{"line":37,"column":27}},"26":{"start":{"line":39,"column":2},"end":{"line":39,"column":14}},"27":{"start":{"line":42,"column":0},"end":{"line":47,"column":2}},"28":{"start":{"line":43,"column":2},"end":{"line":43,"column":75}},"29":{"start":{"line":43,"column":55},"end":{"line":43,"column":75}},"30":{"start":{"line":44,"column":2},"end":{"line":44,"column":49}},"31":{"start":{"line":44,"column":29},"end":{"line":44,"column":49}},"32":{"start":{"line":46,"column":2},"end":{"line":46,"column":12}},"33":{"start":{"line":51,"column":4},"end":{"line":51,"column":31}},"34":{"start":{"line":53,"column":4},"end":{"line":53,"column":43}},"35":{"start":{"line":54,"column":4},"end":{"line":54,"column":40}},"36":{"start":{"line":55,"column":4},"end":{"line":55,"column":54}},"37":{"start":{"line":57,"column":4},"end":{"line":57,"column":38}},"38":{"start":{"line":58,"column":4},"end":{"line":58,"column":21}},"39":{"start":{"line":59,"column":4},"end":{"line":59,"column":41}},"40":{"start":{"line":61,"column":4},"end":{"line":61,"column":22}},"41":{"start":{"line":62,"column":4},"end":{"line":62,"column":27}},"42":{"start":{"line":63,"column":4},"end":{"line":63,"column":29}},"43":{"start":{"line":66,"column":4},"end":{"line":66,"column":37}},"44":{"start":{"line":67,"column":4},"end":{"line":67,"column":22}},"45":{"start":{"line":70,"column":4},"end":{"line":70,"column":22}},"46":{"start":{"line":74,"column":4},"end":{"line":74,"column":39}},"47":{"start":{"line":78,"column":4},"end":{"line":78,"column":39}},"48":{"start":{"line":82,"column":4},"end":{"line":82,"column":66}},"49":{"start":{"line":86,"column":4},"end":{"line":86,"column":45}},"50":{"start":{"line":90,"column":4},"end":{"line":90,"column":44}},"51":{"start":{"line":91,"column":4},"end":{"line":93,"column":5}},"52":{"start":{"line":92,"column":6},"end":{"line":92,"column":56}},"53":{"start":{"line":95,"column":4},"end":{"line":116,"column":9}},"54":{"start":{"line":97,"column":8},"end":{"line":97,"column":19}},"55":{"start":{"line":98,"column":8},"end":{"line":98,"column":27}},"56":{"start":{"line":99,"column":8},"end":{"line":99,"column":28}},"57":{"start":{"line":103,"column":8},"end":{"line":103,"column":49}},"58":{"start":{"line":104,"column":8},"end":{"line":104,"column":34}},"59":{"start":{"line":105,"column":8},"end":{"line":105,"column":20}},"60":{"start":{"line":109,"column":8},"end":{"line":109,"column":34}},"61":{"start":{"line":110,"column":8},"end":{"line":110,"column":20}},"62":{"start":{"line":112,"column":20},"end":{"line":112,"column":43}},"63":{"start":{"line":114,"column":8},"end":{"line":114,"column":27}},"64":{"start":{"line":115,"column":8},"end":{"line":115,"column":20}},"65":{"start":{"line":120,"column":4},"end":{"line":120,"column":22}},"66":{"start":{"line":121,"column":4},"end":{"line":121,"column":38}},"67":{"start":{"line":122,"column":4},"end":{"line":122,"column":48}},"68":{"start":{"line":124,"column":4},"end":{"line":124,"column":27}},"69":{"start":{"line":126,"column":4},"end":{"line":138,"column":7}},"70":{"start":{"line":127,"column":6},"end":{"line":129,"column":8}},"71":{"start":{"line":131,"column":6},"end":{"line":131,"column":35}},"72":{"start":{"line":132,"column":6},"end":{"line":132,"column":57}},"73":{"start":{"line":132,"column":50},"end":{"line":132,"column":57}},"74":{"start":{"line":134,"column":6},"end":{"line":137,"column":8}},"75":{"start":{"line":142,"column":4},"end":{"line":142,"column":48}},"76":{"start":{"line":146,"column":4},"end":{"line":146,"column":55}},"77":{"start":{"line":146,"column":31},"end":{"line":146,"column":55}},"78":{"start":{"line":148,"column":4},"end":{"line":152,"column":6}},"79":{"start":{"line":156,"column":4},"end":{"line":156,"column":49}},"80":{"start":{"line":157,"column":4},"end":{"line":157,"column":27}},"81":{"start":{"line":158,"column":4},"end":{"line":158,"column":55}},"82":{"start":{"line":160,"column":4},"end":{"line":162,"column":5}},"83":{"start":{"line":161,"column":6},"end":{"line":161,"column":50}},"84":{"start":{"line":165,"column":4},"end":{"line":169,"column":7}},"85":{"start":{"line":165,"column":30},"end":{"line":169,"column":6}},"86":{"start":{"line":166,"column":6},"end":{"line":166,"column":43}},"87":{"start":{"line":168,"column":6},"end":{"line":168,"column":74}},"88":{"start":{"line":171,"column":4},"end":{"line":171,"column":57}},"89":{"start":{"line":172,"column":4},"end":{"line":172,"column":64}},"90":{"start":{"line":172,"column":58},"end":{"line":172,"column":62}},"91":{"start":{"line":176,"column":4},"end":{"line":176,"column":41}},"92":{"start":{"line":178,"column":4},"end":{"line":178,"column":19}},"93":{"start":{"line":179,"column":4},"end":{"line":179,"column":21}},"94":{"start":{"line":180,"column":4},"end":{"line":180,"column":25}},"95":{"start":{"line":181,"column":4},"end":{"line":181,"column":22}},"96":{"start":{"line":183,"column":4},"end":{"line":183,"column":37}},"97":{"start":{"line":184,"column":4},"end":{"line":184,"column":42}},"98":{"start":{"line":187,"column":4},"end":{"line":187,"column":24}},"99":{"start":{"line":191,"column":0},"end":{"line":191,"column":28}}},"branchMap":{"1":{"line":21,"type":"cond-expr","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":25}},{"start":{"line":22,"column":28},"end":{"line":22,"column":37}}]},"2":{"line":31,"type":"cond-expr","locations":[{"start":{"line":31,"column":28},"end":{"line":31,"column":52}},{"start":{"line":31,"column":55},"end":{"line":31,"column":85}}]},"3":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":2},"end":{"line":43,"column":2}},{"start":{"line":43,"column":2},"end":{"line":43,"column":2}}]},"4":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":6},"end":{"line":43,"column":29}},{"start":{"line":43,"column":33},"end":{"line":43,"column":53}}]},"5":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":2},"end":{"line":44,"column":2}},{"start":{"line":44,"column":2},"end":{"line":44,"column":2}}]},"6":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":11},"end":{"line":74,"column":20}},{"start":{"line":74,"column":24},"end":{"line":74,"column":38}}]},"7":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":11},"end":{"line":82,"column":37}},{"start":{"line":82,"column":41},"end":{"line":82,"column":65}}]},"8":{"line":86,"type":"binary-expr","locations":[{"start":{"line":86,"column":13},"end":{"line":86,"column":26}},{"start":{"line":86,"column":30},"end":{"line":86,"column":43}}]},"9":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":4},"end":{"line":91,"column":4}},{"start":{"line":91,"column":4},"end":{"line":91,"column":4}}]},"10":{"line":103,"type":"binary-expr","locations":[{"start":{"line":103,"column":20},"end":{"line":103,"column":29}},{"start":{"line":103,"column":33},"end":{"line":103,"column":42}},{"start":{"line":103,"column":46},"end":{"line":103,"column":48}}]},"11":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":24},"end":{"line":122,"column":41}},{"start":{"line":122,"column":45},"end":{"line":122,"column":47}}]},"12":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":6},"end":{"line":132,"column":6}},{"start":{"line":132,"column":6},"end":{"line":132,"column":6}}]},"13":{"line":132,"type":"binary-expr","locations":[{"start":{"line":132,"column":10},"end":{"line":132,"column":18}},{"start":{"line":132,"column":22},"end":{"line":132,"column":48}}]},"14":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":4},"end":{"line":146,"column":4}},{"start":{"line":146,"column":4},"end":{"line":146,"column":4}}]},"15":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":4},"end":{"line":160,"column":4}},{"start":{"line":160,"column":4},"end":{"line":160,"column":4}}]},"16":{"line":171,"type":"binary-expr","locations":[{"start":{"line":171,"column":20},"end":{"line":171,"column":29}},{"start":{"line":171,"column":33},"end":{"line":171,"column":50}},{"start":{"line":171,"column":54},"end":{"line":171,"column":56}}]}},"code":["'use strict';","const debug = require('debug')('brunch:file');","const readFromCache = require('fcache').readFile;","const logger = require('loggy');","const deppack = require('deppack');","const processFile = require('./pipeline').processFile;","const SourceMapConsumer = require('source-map').SourceMapConsumer;","const SourceNode = require('source-map').SourceNode;","const BrunchError = require('../utils/error');","const helpers = require('../utils/plugins').helpers;","","const identityNode = (code, path) => {","  const lines = code.split('\\n').map((line, index) => {","    return new SourceNode(index + 1, 0, path, `${line}\\n`);","  });","","  return new SourceNode(1, 0, null, lines);","};","","const prepSourceMap = (code, sourceMap) => {","  const consumer = new SourceMapConsumer(typeof sourceMap === 'string' ?","    JSON.parse(sourceMap) : sourceMap","  );","","  return SourceNode.fromStringWithSourceMap(code, consumer);","};","","const wrappedNode = (path, wrapped, sourceMap) => {","  const data = wrapped.data;","  const isIdentity = sourceMap == null;","  const node = isIdentity ? identityNode(data, path) : prepSourceMap(data, sourceMap);","","  node.isIdentity = isIdentity;","  node.source = path;","  node.setSourceContent(path, data);","  node.prepend(wrapped.prefix);","  node.add(wrapped.suffix);","","  return node;","};","","const getInitialType = path => {","  if (deppack.isNpmJSON(path) || path.endsWith('.js')) return 'javascript';","  if (path.endsWith('.css')) return 'stylesheet';","","  return '';","};","","class SourceFile {","  constructor(path, vendorConvention, moduleWrapper, fileList) {","    debug(`Init file ${path}`);","","    this.isVendor = vendorConvention(path);","    this._moduleWrapper = moduleWrapper;","    this._exploreDeps = deppack.exploreDeps(fileList);","","    this._realPath = this.path = path;","    this.source = '';","    this.removed = this.disposed = false;","","    this.error = null;","    this.dependencies = [];","    this.compilationTime = 0;","","    // treat json files from node_modules as js","    this.type = getInitialType(path);","    this.targets = {};","","    // Disallow adding new properties and changing descriptors.","    Object.seal(this);","  }","","  get _shouldBeWrapped() {","    return this.isJS && !this.isVendor;","  }","","  get isHelper() {","    return helpers.includes(this.path);","  }","","  get isJS() {","    return this.type === 'javascript' || this.type === 'template';","  }","","  get isModule() {","    return !(this.isHelper || this.isVendor);","  }","","  compile() {","    const path = this.path = this._realPath;","    if (this.disposed) {","      throw new BrunchError('ALREADY_DISPOSED', {path});","    }","","    return readFromCache(path)","      .then(data => {","        data += '';","        this.source = data;","        return {path, data};","      })","      .then(processFile)","      .then(file => {","        this.type = this.type || file.type || '';","        file.compiled = file.data;","        return file;","      })","      .then(this._exploreDeps)","      .then(file => {","        file.data = file.compiled;","        return file;","      })","      .then(file => this._updateCache(file))","      .catch(error => {","        this.error = error;","        return this;","      });","  }","","  _updateCache(file) {","    this.error = null;","    this.compilationTime = Date.now();","    this.dependencies = file.dependencies || [];","","    const data = file.data;","","    return this._updateMap(data, file.sourceMap).then(node => {","      this.targets = {","        [this.type]: {data, node},","      };","","      const exports = file.exports;","      if (!exports || this.type === 'javascript') return;","","      this.targets.javascript = {","        data: exports,","        node: wrappedNode(this.path, this._wrap(exports)),","      };","    });","  }","","  _wrap(data) {","    return this._moduleWrapper(this.path, data);","  }","","  _checkAndWrap(data) {","    if (this._shouldBeWrapped) return this._wrap(data);","","    return {","      data,","      prefix: '',","      suffix: '',","    };","  }","","  _updateMap(compiled, sourceMap) {","    const wrapped = this._checkAndWrap(compiled);","    const path = this.path;","    const node = wrappedNode(path, wrapped, sourceMap);","","    if (sourceMap) {","      debug(`Generated source map for '${path}'`);","    }","","    // the supplied source map might contain more than one source file","    const addSource = path => readFromCache(path).then(content => {","      node.setSourceContent(path, content);","    }).catch(error => {","      logger.error(`Source map generation failed for '${path}': `, error);","    });","","    const sources = sourceMap && sourceMap.sources || [];","    return Promise.all(sources.map(addSource)).then(() => node);","  }","","  dispose() {","    debug(`Disposing file ${this.path}`);","","    this.path = '';","    this.source = '';","    this.disposed = true;","    this.error = null;","","    this.targets = Object.freeze({});","    this.dependencies = Object.freeze([]);","","    // You're frozen when your heart's not open.","    Object.freeze(this);","  }","}","","module.exports = SourceFile;",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"12":1,"13":0,"14":0,"17":0,"20":1,"21":0,"25":0,"28":1,"29":0,"30":0,"31":0,"33":0,"34":0,"35":0,"36":0,"37":0,"39":0,"42":1,"43":0,"44":0,"46":0,"51":0,"53":0,"54":0,"55":0,"57":0,"58":0,"59":0,"61":0,"62":0,"63":0,"66":0,"67":0,"70":0,"74":0,"78":0,"82":0,"86":0,"90":0,"91":0,"92":0,"95":0,"97":0,"98":0,"99":0,"103":0,"104":0,"105":0,"109":0,"110":0,"112":0,"114":0,"115":0,"120":0,"121":0,"122":0,"124":0,"126":0,"127":0,"131":0,"132":0,"134":0,"142":0,"146":0,"148":0,"156":0,"157":0,"158":0,"160":0,"161":0,"165":0,"166":0,"168":0,"171":0,"172":0,"176":0,"178":0,"179":0,"180":0,"181":0,"183":0,"184":0,"187":0,"191":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/plugins.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/plugins.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1,"95":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":49}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":51}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":45}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":51}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":44}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":42}},"9":{"start":{"line":11,"column":0},"end":{"line":27,"column":2}},"10":{"start":{"line":12,"column":2},"end":{"line":12,"column":29}},"11":{"start":{"line":13,"column":2},"end":{"line":13,"column":57}},"12":{"start":{"line":13,"column":27},"end":{"line":13,"column":56}},"13":{"start":{"line":15,"column":2},"end":{"line":26,"column":3}},"14":{"start":{"line":16,"column":4},"end":{"line":16,"column":17}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":33}},"16":{"start":{"line":18,"column":4},"end":{"line":18,"column":49}},"17":{"start":{"line":18,"column":27},"end":{"line":18,"column":49}},"18":{"start":{"line":19,"column":4},"end":{"line":19,"column":55}},"19":{"start":{"line":19,"column":30},"end":{"line":19,"column":55}},"20":{"start":{"line":21,"column":4},"end":{"line":21,"column":27}},"21":{"start":{"line":23,"column":4},"end":{"line":23,"column":50}},"22":{"start":{"line":25,"column":4},"end":{"line":25,"column":17}},"23":{"start":{"line":29,"column":0},"end":{"line":42,"column":2}},"24":{"start":{"line":30,"column":2},"end":{"line":30,"column":32}},"25":{"start":{"line":31,"column":2},"end":{"line":31,"column":34}},"26":{"start":{"line":33,"column":2},"end":{"line":39,"column":5}},"27":{"start":{"line":34,"column":4},"end":{"line":38,"column":5}},"28":{"start":{"line":35,"column":6},"end":{"line":35,"column":80}},"29":{"start":{"line":37,"column":6},"end":{"line":37,"column":25}},"30":{"start":{"line":41,"column":2},"end":{"line":41,"column":15}},"31":{"start":{"line":50,"column":0},"end":{"line":53,"column":2}},"32":{"start":{"line":55,"column":0},"end":{"line":162,"column":2}},"33":{"start":{"line":56,"column":2},"end":{"line":56,"column":27}},"34":{"start":{"line":58,"column":2},"end":{"line":58,"column":53}},"35":{"start":{"line":59,"column":2},"end":{"line":59,"column":68}},"36":{"start":{"line":60,"column":2},"end":{"line":60,"column":56}},"37":{"start":{"line":62,"column":2},"end":{"line":62,"column":74}},"38":{"start":{"line":64,"column":2},"end":{"line":64,"column":31}},"39":{"start":{"line":65,"column":2},"end":{"line":65,"column":33}},"40":{"start":{"line":66,"column":2},"end":{"line":66,"column":35}},"41":{"start":{"line":68,"column":2},"end":{"line":74,"column":5}},"42":{"start":{"line":69,"column":4},"end":{"line":69,"column":47}},"43":{"start":{"line":69,"column":34},"end":{"line":69,"column":47}},"44":{"start":{"line":70,"column":4},"end":{"line":70,"column":52}},"45":{"start":{"line":70,"column":39},"end":{"line":70,"column":52}},"46":{"start":{"line":71,"column":4},"end":{"line":71,"column":41}},"47":{"start":{"line":71,"column":28},"end":{"line":71,"column":41}},"48":{"start":{"line":72,"column":4},"end":{"line":72,"column":58}},"49":{"start":{"line":72,"column":45},"end":{"line":72,"column":58}},"50":{"start":{"line":73,"column":4},"end":{"line":73,"column":16}},"51":{"start":{"line":76,"column":2},"end":{"line":106,"column":5}},"52":{"start":{"line":77,"column":4},"end":{"line":89,"column":5}},"53":{"start":{"line":78,"column":6},"end":{"line":78,"column":58}},"54":{"start":{"line":79,"column":6},"end":{"line":83,"column":7}},"55":{"start":{"line":80,"column":8},"end":{"line":80,"column":42}},"56":{"start":{"line":81,"column":8},"end":{"line":81,"column":39}},"57":{"start":{"line":82,"column":8},"end":{"line":82,"column":38}},"58":{"start":{"line":85,"column":6},"end":{"line":87,"column":7}},"59":{"start":{"line":86,"column":8},"end":{"line":86,"column":58}},"60":{"start":{"line":88,"column":6},"end":{"line":88,"column":61}},"61":{"start":{"line":90,"column":4},"end":{"line":90,"column":19}},"62":{"start":{"line":94,"column":4},"end":{"line":94,"column":58}},"63":{"start":{"line":94,"column":46},"end":{"line":94,"column":58}},"64":{"start":{"line":98,"column":4},"end":{"line":98,"column":34}},"65":{"start":{"line":99,"column":4},"end":{"line":101,"column":5}},"66":{"start":{"line":100,"column":6},"end":{"line":100,"column":54}},"67":{"start":{"line":105,"column":4},"end":{"line":105,"column":51}},"68":{"start":{"line":108,"column":2},"end":{"line":110,"column":5}},"69":{"start":{"line":108,"column":27},"end":{"line":110,"column":4}},"70":{"start":{"line":109,"column":4},"end":{"line":109,"column":45}},"71":{"start":{"line":112,"column":2},"end":{"line":112,"column":41}},"72":{"start":{"line":113,"column":2},"end":{"line":113,"column":74}},"73":{"start":{"line":113,"column":38},"end":{"line":113,"column":61}},"74":{"start":{"line":114,"column":2},"end":{"line":114,"column":36}},"75":{"start":{"line":116,"column":2},"end":{"line":123,"column":3}},"76":{"start":{"line":117,"column":4},"end":{"line":119,"column":7}},"77":{"start":{"line":118,"column":6},"end":{"line":118,"column":64}},"78":{"start":{"line":121,"column":4},"end":{"line":121,"column":66}},"79":{"start":{"line":121,"column":22},"end":{"line":121,"column":66}},"80":{"start":{"line":122,"column":4},"end":{"line":122,"column":82}},"81":{"start":{"line":122,"column":34},"end":{"line":122,"column":82}},"82":{"start":{"line":128,"column":2},"end":{"line":142,"column":4}},"83":{"start":{"line":129,"column":4},"end":{"line":139,"column":7}},"84":{"start":{"line":130,"column":6},"end":{"line":138,"column":9}},"85":{"start":{"line":131,"column":8},"end":{"line":137,"column":11}},"86":{"start":{"line":132,"column":10},"end":{"line":134,"column":11}},"87":{"start":{"line":133,"column":12},"end":{"line":133,"column":72}},"88":{"start":{"line":136,"column":10},"end":{"line":136,"column":49}},"89":{"start":{"line":141,"column":4},"end":{"line":141,"column":47}},"90":{"start":{"line":144,"column":2},"end":{"line":161,"column":5}},"91":{"start":{"line":145,"column":4},"end":{"line":145,"column":37}},"92":{"start":{"line":146,"column":4},"end":{"line":146,"column":30}},"93":{"start":{"line":148,"column":4},"end":{"line":160,"column":6}},"94":{"start":{"line":164,"column":0},"end":{"line":164,"column":37}},"95":{"start":{"line":165,"column":0},"end":{"line":165,"column":25}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"2":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":4}},{"start":{"line":19,"column":4},"end":{"line":19,"column":4}}]},"3":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"4":{"line":62,"type":"cond-expr","locations":[{"start":{"line":62,"column":27},"end":{"line":62,"column":50}},{"start":{"line":62,"column":53},"end":{"line":62,"column":73}}]},"5":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"6":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"7":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]},"8":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":4},"end":{"line":72,"column":4}},{"start":{"line":72,"column":4},"end":{"line":72,"column":4}}]},"9":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":19}},{"start":{"line":72,"column":23},"end":{"line":72,"column":43}}]},"10":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":6},"end":{"line":79,"column":6}},{"start":{"line":79,"column":6},"end":{"line":79,"column":6}}]},"11":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":10},"end":{"line":79,"column":16}},{"start":{"line":79,"column":20},"end":{"line":79,"column":36}},{"start":{"line":79,"column":40},"end":{"line":79,"column":69}}]},"12":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":6},"end":{"line":85,"column":6}},{"start":{"line":85,"column":6},"end":{"line":85,"column":6}}]},"13":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":10},"end":{"line":85,"column":43}},{"start":{"line":85,"column":47},"end":{"line":85,"column":71}}]},"14":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":4}},{"start":{"line":94,"column":4},"end":{"line":94,"column":4}}]},"15":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":4},"end":{"line":99,"column":4}},{"start":{"line":99,"column":4},"end":{"line":99,"column":4}}]},"16":{"line":100,"type":"cond-expr","locations":[{"start":{"line":100,"column":31},"end":{"line":100,"column":46}},{"start":{"line":100,"column":49},"end":{"line":100,"column":53}}]},"17":{"line":105,"type":"binary-expr","locations":[{"start":{"line":105,"column":11},"end":{"line":105,"column":22}},{"start":{"line":105,"column":26},"end":{"line":105,"column":50}}]},"18":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":2},"end":{"line":116,"column":2}},{"start":{"line":116,"column":2},"end":{"line":116,"column":2}}]},"19":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":4},"end":{"line":121,"column":4}},{"start":{"line":121,"column":4},"end":{"line":121,"column":4}}]},"20":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":4},"end":{"line":122,"column":4}},{"start":{"line":122,"column":4},"end":{"line":122,"column":4}}]},"21":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":10},"end":{"line":132,"column":10}},{"start":{"line":132,"column":10},"end":{"line":132,"column":10}}]}},"code":["'use strict';","const debug = require('debug')('brunch:plugins');","const logger = require('loggy');","const profile = require('since-app-start').profile;","const flatten = require('./helpers').flatten;","const deepFreeze = require('./helpers').deepFreeze;","const BrunchError = require('./error');","const adapter = require('./plugin-adapter');","const sysPath = require('universal-path');","","const loadPackage = pkgPath => {","  profile('Loading plugins');","  const clearCache = () => delete require.cache[pkgPath];","","  try {","    clearCache();","    const pkg = require(pkgPath);","    if (!pkg.dependencies) pkg.dependencies = {};","    if (!pkg.devDependencies) pkg.devDependencies = {};","","    return deepFreeze(pkg);","  } catch (error) {","    throw new BrunchError('CWD_INVALID', {error});","  } finally {","    clearCache();","  }","};","","const uniqueDeps = pkg => {","  const deps = pkg.dependencies;","  const names = Object.keys(deps);","","  Object.keys(pkg.devDependencies).forEach(devDep => {","    if (devDep in deps) {","      logger.warn(`You have declared ${devDep} in package.json more than once`);","    } else {","      names.push(devDep);","    }","  });","","  return names;","};","","/* Load brunch plugins, group them and initialise file watcher."," *"," * configParams - Object. Optional. Params will be set as default config items."," *"," */","","const ignoredPlugins = [","  'javascript-brunch',","  'css-brunch',","];","","const plugins = (config, craDeps) => {","  profile('Loaded config');","","  const absRoot = sysPath.resolve(config.paths.root);","  const pkgPath = sysPath.join(absRoot, config.paths.packageConfig);","  const npmPath = sysPath.join(absRoot, 'node_modules');","","  const pkg = config.cra ? {dependencies: craDeps} : loadPackage(pkgPath);","","  const on = config.plugins.on;","  const off = config.plugins.off;","  const only = config.plugins.only;","","  const deps = uniqueDeps(pkg).filter(name => {","    if (!name.includes('brunch')) return false;","    if (ignoredPlugins.includes(name)) return false;","    if (off.includes(name)) return false;","    if (only.length && !only.includes(name)) return false;","    return true;","  });","","  const plugins = deps.reduce((plugins, name) => {","    try {","      const Plugin = require(sysPath.join(npmPath, name));","      if (Plugin && Plugin.prototype && Plugin.prototype.brunchPlugin) {","        const plugin = new Plugin(config);","        plugin.brunchPluginName = name;","        plugins.push(adapter(plugin));","      }","    } catch (error) {","      if (error.code === 'MODULE_NOT_FOUND' && name in pkg.dependencies) {","        throw new BrunchError('RUN_NPM_INSTALL', {error});","      }","      logger.warn(`Loading of ${name} failed due to`, error);","    }","    return plugins;","  }, [])","  .filter(plugin => {","    // Does the user's config say this plugin should definitely be used?","    if (on.includes(plugin.brunchPluginName)) return true;","","    // If the plugin is an optimizer that doesn't specify a defaultEnv","    // decide based on the config.optimize setting","    const env = plugin.defaultEnv;","    if (!env) {","      return plugin.optimize ? config.optimize : true;","    }","","    // Finally, is it meant for either any environment or","    // an active environment?","    return env === '*' || config.env.includes(env);","  });","","  const respondTo = key => plugins.filter(plugin => {","    return typeof plugin[key] === 'function';","  });","","  const compilers = respondTo('compile');","  const names = plugins.map(plugin => plugin.brunchPluginName).join(', ');","  debug(`Loaded plugins: ${names}`);","","  if (config.hot) {","    const hmrCompiler = compilers.find(compiler => {","      return compiler.brunchPluginName === 'auto-reload-brunch';","    });","","    if (!hmrCompiler) throw new BrunchError('HMR_PLUGIN_MISSING');","    if (!hmrCompiler.supportsHMR) throw new BrunchError('HMR_PLUGIN_UNSUPPORTED');","  }","","  /* Get paths to files that plugins include. E.g. handlebars-brunch includes","   * `../vendor/handlebars-runtime.js` with path relative to plugin.","   */","  const getIncludes = () => {","    const includes = plugins.map(plugin => {","      return plugin.include.then(paths => {","        return paths.map(path => {","          if (!sysPath.isAbsolute(path)) {","            path = sysPath.join(npmPath, plugin.brunchPluginName, path);","          }","","          return sysPath.relative(absRoot, path);","        });","      });","    });","","    return Promise.all(includes).then(flatten);","  };","","  return getIncludes().then(includes => {","    [].push.apply(helpers, includes);","    profile('Loaded plugins');","","    return {","      hooks: {","        preCompile: respondTo('preCompile'),","        onCompile: respondTo('onCompile'),","        teardown: respondTo('teardown'),","      },","      plugins: {","        includes,","        compilers,","        optimizers: respondTo('optimize'),","        all: plugins,","      },","    };","  });","};","","const helpers = plugins.helpers = [];","module.exports = plugins;",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"12":0,"13":0,"15":0,"16":0,"17":0,"18":0,"19":0,"21":0,"23":0,"25":0,"29":1,"30":0,"31":0,"33":0,"34":0,"35":0,"37":0,"41":0,"50":1,"55":1,"56":0,"58":0,"59":0,"60":0,"62":0,"64":0,"65":0,"66":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"85":0,"86":0,"88":0,"90":0,"94":0,"98":0,"99":0,"100":0,"105":0,"108":0,"109":0,"112":0,"113":0,"114":0,"116":0,"117":0,"118":0,"121":0,"122":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"136":0,"141":0,"144":0,"145":0,"146":0,"148":0,"164":1,"165":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/plugin-adapter.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/plugin-adapter.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":50}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"3":{"start":{"line":5,"column":0},"end":{"line":9,"column":2}},"4":{"start":{"line":6,"column":2},"end":{"line":8,"column":8}},"5":{"start":{"line":11,"column":0},"end":{"line":15,"column":2}},"6":{"start":{"line":12,"column":2},"end":{"line":12,"column":19}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":19}},"8":{"start":{"line":13,"column":2},"end":{"line":13,"column":53}},"9":{"start":{"line":14,"column":2},"end":{"line":14,"column":40}},"10":{"start":{"line":18,"column":0},"end":{"line":34,"column":2}},"11":{"start":{"line":19,"column":2},"end":{"line":19,"column":31}},"12":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"13":{"start":{"line":21,"column":4},"end":{"line":21,"column":35}},"14":{"start":{"line":24,"column":2},"end":{"line":26,"column":5}},"15":{"start":{"line":25,"column":4},"end":{"line":25,"column":47}},"16":{"start":{"line":29,"column":2},"end":{"line":33,"column":5}},"17":{"start":{"line":36,"column":0},"end":{"line":52,"column":2}},"18":{"start":{"line":37,"column":2},"end":{"line":37,"column":21}},"19":{"start":{"line":38,"column":2},"end":{"line":38,"column":89}},"20":{"start":{"line":39,"column":2},"end":{"line":39,"column":97}},"21":{"start":{"line":40,"column":2},"end":{"line":40,"column":67}},"22":{"start":{"line":42,"column":2},"end":{"line":51,"column":5}},"23":{"start":{"line":43,"column":4},"end":{"line":43,"column":27}},"24":{"start":{"line":44,"column":4},"end":{"line":44,"column":41}},"25":{"start":{"line":44,"column":34},"end":{"line":44,"column":41}},"26":{"start":{"line":46,"column":4},"end":{"line":46,"column":36}},"27":{"start":{"line":47,"column":4},"end":{"line":47,"column":66}},"28":{"start":{"line":47,"column":39},"end":{"line":47,"column":65}},"29":{"start":{"line":48,"column":4},"end":{"line":48,"column":49}},"30":{"start":{"line":50,"column":4},"end":{"line":50,"column":48}},"31":{"start":{"line":54,"column":0},"end":{"line":54,"column":45}},"32":{"start":{"line":54,"column":29},"end":{"line":54,"column":44}},"33":{"start":{"line":55,"column":0},"end":{"line":70,"column":2}},"34":{"start":{"line":55,"column":33},"end":{"line":70,"column":1}},"35":{"start":{"line":56,"column":2},"end":{"line":69,"column":3}},"36":{"start":{"line":59,"column":6},"end":{"line":59,"column":16}},"37":{"start":{"line":62,"column":6},"end":{"line":64,"column":41}},"38":{"start":{"line":64,"column":16},"end":{"line":64,"column":40}},"39":{"start":{"line":67,"column":6},"end":{"line":67,"column":45}},"40":{"start":{"line":68,"column":6},"end":{"line":68,"column":55}},"41":{"start":{"line":68,"column":21},"end":{"line":68,"column":54}},"42":{"start":{"line":72,"column":0},"end":{"line":74,"column":2}},"43":{"start":{"line":73,"column":2},"end":{"line":73,"column":48}},"44":{"start":{"line":73,"column":17},"end":{"line":73,"column":47}},"45":{"start":{"line":76,"column":0},"end":{"line":80,"column":2}},"46":{"start":{"line":77,"column":2},"end":{"line":79,"column":5}},"47":{"start":{"line":77,"column":17},"end":{"line":79,"column":4}},"48":{"start":{"line":78,"column":4},"end":{"line":78,"column":52}},"49":{"start":{"line":82,"column":0},"end":{"line":95,"column":2}},"50":{"start":{"line":83,"column":2},"end":{"line":83,"column":35}},"51":{"start":{"line":84,"column":2},"end":{"line":84,"column":83}},"52":{"start":{"line":86,"column":2},"end":{"line":94,"column":4}},"53":{"start":{"line":87,"column":4},"end":{"line":89,"column":27}},"54":{"start":{"line":88,"column":6},"end":{"line":88,"column":54}},"55":{"start":{"line":91,"column":4},"end":{"line":93,"column":7}},"56":{"start":{"line":92,"column":6},"end":{"line":92,"column":24}},"57":{"start":{"line":97,"column":0},"end":{"line":119,"column":2}},"58":{"start":{"line":99,"column":2},"end":{"line":101,"column":3}},"59":{"start":{"line":100,"column":4},"end":{"line":100,"column":36}},"60":{"start":{"line":103,"column":2},"end":{"line":103,"column":22}},"61":{"start":{"line":104,"column":2},"end":{"line":104,"column":22}},"62":{"start":{"line":106,"column":2},"end":{"line":106,"column":59}},"63":{"start":{"line":107,"column":2},"end":{"line":109,"column":9}},"64":{"start":{"line":111,"column":2},"end":{"line":116,"column":3}},"65":{"start":{"line":112,"column":4},"end":{"line":112,"column":84}},"66":{"start":{"line":113,"column":4},"end":{"line":115,"column":21}},"67":{"start":{"line":118,"column":2},"end":{"line":118,"column":16}}},"branchMap":{"1":{"line":6,"type":"cond-expr","locations":[{"start":{"line":7,"column":4},"end":{"line":7,"column":28}},{"start":{"line":8,"column":4},"end":{"line":8,"column":7}}]},"2":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]},"3":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"4":{"line":25,"type":"cond-expr","locations":[{"start":{"line":25,"column":26},"end":{"line":25,"column":28}},{"start":{"line":25,"column":31},"end":{"line":25,"column":46}}]},"5":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":44,"column":4}},{"start":{"line":44,"column":4},"end":{"line":44,"column":4}}]},"6":{"line":56,"type":"switch","locations":[{"start":{"line":57,"column":4},"end":{"line":59,"column":16}},{"start":{"line":60,"column":4},"end":{"line":64,"column":41}},{"start":{"line":65,"column":4},"end":{"line":68,"column":55}}]},"7":{"line":62,"type":"cond-expr","locations":[{"start":{"line":63,"column":8},"end":{"line":63,"column":26}},{"start":{"line":64,"column":8},"end":{"line":64,"column":40}}]},"8":{"line":78,"type":"cond-expr","locations":[{"start":{"line":78,"column":38},"end":{"line":78,"column":44}},{"start":{"line":78,"column":47},"end":{"line":78,"column":51}}]},"9":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":2},"end":{"line":99,"column":2}},{"start":{"line":99,"column":2},"end":{"line":99,"column":2}}]},"10":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":6},"end":{"line":99,"column":41}},{"start":{"line":99,"column":45},"end":{"line":99,"column":61}}]},"11":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":19},"end":{"line":107,"column":33}},{"start":{"line":108,"column":4},"end":{"line":108,"column":33}},{"start":{"line":109,"column":4},"end":{"line":109,"column":8}}]},"12":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":2},"end":{"line":111,"column":2}},{"start":{"line":111,"column":2},"end":{"line":111,"column":2}}]},"13":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":6},"end":{"line":111,"column":32}},{"start":{"line":111,"column":36},"end":{"line":111,"column":56}}]},"14":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":35},"end":{"line":112,"column":72}},{"start":{"line":112,"column":76},"end":{"line":112,"column":83}}]},"15":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":27},"end":{"line":113,"column":47}},{"start":{"line":114,"column":6},"end":{"line":114,"column":41}},{"start":{"line":115,"column":6},"end":{"line":115,"column":20}}]}},"code":["'use strict';","const microPromisify = require('micro-promisify');","const logger = require('loggy');","","const normExt = ext => {","  return typeof ext === 'string' ?","    ext.replace(/^\\.*/, '.') :","    ext;","};","","const extToRegExp = ext => {","  if (!ext) return;","  const escaped = normExt(ext).replace(/\\./g, '\\\\.');","  return new RegExp(`${escaped}$`, 'i');","};","","// Normalize includes to promise that resolves to array.","const normInclude = plugin => {","  let include = plugin.include;","  if (typeof include === 'function') {","    include = include.call(plugin);","  }","","  const value = Promise.resolve(include).then(path => {","    return path == null ? [] : [].concat(path);","  });","","  // Don't call setter (it is probably missing)","  Object.defineProperty(plugin, 'include', {","    value,","    writable: true,","    configurable: true,","  });","};","","const normMethods = plugin => {","  const methods = {};","  methods.lint = methods.getDependencies = [bind, promisify(false), thenify, warnIfLong];","  methods.compile = methods.optimize = [bind, promisify(true), thenify, wrapStrings, warnIfLong];","  methods.compileStatic = [bind, thenify, wrapStrings, warnIfLong];","","  Object.keys(methods).forEach(key => {","    const fn = plugin[key];","    if (typeof fn !== 'function') return;","","    const decorators = methods[key];","    const compose = (fn, decorator) => decorator(fn, plugin, key);","    const value = decorators.reduce(compose, fn);","","    Object.defineProperty(plugin, key, {value});","  });","};","","const bind = (fn, plugin) => fn.bind(plugin);","const promisify = returnsFile => fn => {","  switch (fn.length) {","    case 1:","      // Modern API:","      return fn;","    case 2:","      // Legacy API:","      return returnsFile ?","        microPromisify(fn) : // fn(file, callback) => void","        file => fn(file.data, file.path); // fn(data, path) => Promise","    case 3:","      // Legacy API: fn(data, path, callback) => void","      const promisified = microPromisify(fn);","      return file => promisified(file.data, file.path);","  }","};","","const thenify = fn => {","  return file => Promise.resolve(file).then(fn);","};","","const wrapStrings = fn => {","  return file => fn(file).then(data => {","    return typeof data === 'string' ? {data} : data;","  });","};","","const warnIfLong = (fn, plugin, key) => {","  const warningLogInterval = 15000;","  const tooLongMessage = `${plugin.brunchPluginName} is taking too long to ${key}`;","","  return file => {","    const id = setInterval(() => {","      logger.warn(`${tooLongMessage} @ ${file.path}`);","    }, warningLogInterval);","","    return fn(file).finally(() => {","      clearInterval(id);","    });","  };","};","","module.exports = plugin => {","  // Backwards compatibility for legacy optimizers.","  if (typeof plugin.minify === 'function' && !plugin.optimize) {","    plugin.optimize = plugin.minify;","  }","","  normInclude(plugin);","  normMethods(plugin);","","  plugin.targetExtension = normExt(plugin.targetExtension);","  plugin.pattern = plugin.pattern ||","    extToRegExp(plugin.extension) ||","    /.^/; // never matches","","  if (plugin.type === 'template' && plugin.compileStatic) {","    plugin.staticTargetExtension = normExt(plugin.staticTargetExtension) || '.html';","    plugin.staticPattern = plugin.staticPattern ||","      extToRegExp(plugin.staticExtension) ||","      plugin.pattern;","  }","","  return plugin;","};",""],"l":{"2":1,"3":1,"5":1,"6":0,"11":1,"12":0,"13":0,"14":0,"18":1,"19":0,"20":0,"21":0,"24":0,"25":0,"29":0,"36":1,"37":0,"38":0,"39":0,"40":0,"42":0,"43":0,"44":0,"46":0,"47":0,"48":0,"50":0,"54":1,"55":1,"56":0,"59":0,"62":0,"64":0,"67":0,"68":0,"72":1,"73":0,"76":1,"77":0,"78":0,"82":1,"83":0,"84":0,"86":0,"87":0,"88":0,"91":0,"92":0,"97":1,"99":0,"100":0,"103":0,"104":0,"106":0,"107":0,"111":0,"112":0,"113":0,"118":0}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/config.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/config.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":1,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":1,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":1,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":1,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":1,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":1,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":1,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":1,"237":0,"238":0,"239":0,"240":0,"241":1,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":1,"249":1,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":1,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":1,"311":1,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":1,"319":0,"320":1,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":26}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":42}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":37}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":32}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":50}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":48}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":37}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":35}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":38}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":52}},"13":{"start":{"line":15,"column":0},"end":{"line":15,"column":39}},"14":{"start":{"line":16,"column":0},"end":{"line":16,"column":40}},"15":{"start":{"line":17,"column":0},"end":{"line":17,"column":46}},"16":{"start":{"line":19,"column":0},"end":{"line":24,"column":2}},"17":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":62}},"19":{"start":{"line":23,"column":2},"end":{"line":23,"column":16}},"20":{"start":{"line":26,"column":0},"end":{"line":44,"column":2}},"21":{"start":{"line":27,"column":2},"end":{"line":27,"column":38}},"22":{"start":{"line":30,"column":2},"end":{"line":43,"column":4}},"23":{"start":{"line":31,"column":4},"end":{"line":31,"column":52}},"24":{"start":{"line":31,"column":34},"end":{"line":31,"column":52}},"25":{"start":{"line":31,"column":47},"end":{"line":31,"column":51}},"26":{"start":{"line":34,"column":4},"end":{"line":42,"column":6}},"27":{"start":{"line":36,"column":6},"end":{"line":36,"column":98}},"28":{"start":{"line":37,"column":6},"end":{"line":39,"column":7}},"29":{"start":{"line":38,"column":8},"end":{"line":38,"column":32}},"30":{"start":{"line":41,"column":6},"end":{"line":41,"column":19}},"31":{"start":{"line":46,"column":0},"end":{"line":89,"column":2}},"32":{"start":{"line":48,"column":2},"end":{"line":48,"column":19}},"33":{"start":{"line":49,"column":2},"end":{"line":53,"column":3}},"34":{"start":{"line":50,"column":4},"end":{"line":50,"column":40}},"35":{"start":{"line":51,"column":9},"end":{"line":53,"column":3}},"36":{"start":{"line":52,"column":4},"end":{"line":52,"column":38}},"37":{"start":{"line":56,"column":2},"end":{"line":65,"column":3}},"38":{"start":{"line":57,"column":4},"end":{"line":57,"column":35}},"39":{"start":{"line":58,"column":4},"end":{"line":64,"column":7}},"40":{"start":{"line":59,"column":6},"end":{"line":59,"column":73}},"41":{"start":{"line":60,"column":6},"end":{"line":60,"column":52}},"42":{"start":{"line":60,"column":45},"end":{"line":60,"column":52}},"43":{"start":{"line":62,"column":6},"end":{"line":62,"column":60}},"44":{"start":{"line":63,"column":6},"end":{"line":63,"column":49}},"45":{"start":{"line":66,"column":2},"end":{"line":85,"column":5}},"46":{"start":{"line":67,"column":4},"end":{"line":67,"column":32}},"47":{"start":{"line":68,"column":4},"end":{"line":68,"column":79}},"48":{"start":{"line":69,"column":4},"end":{"line":69,"column":44}},"49":{"start":{"line":72,"column":4},"end":{"line":83,"column":7}},"50":{"start":{"line":73,"column":6},"end":{"line":73,"column":28}},"51":{"start":{"line":74,"column":6},"end":{"line":82,"column":7}},"52":{"start":{"line":75,"column":8},"end":{"line":75,"column":70}},"53":{"start":{"line":75,"column":43},"end":{"line":75,"column":70}},"54":{"start":{"line":76,"column":8},"end":{"line":76,"column":52}},"55":{"start":{"line":77,"column":8},"end":{"line":77,"column":46}},"56":{"start":{"line":78,"column":8},"end":{"line":81,"column":12}},"57":{"start":{"line":79,"column":10},"end":{"line":79,"column":48}},"58":{"start":{"line":80,"column":10},"end":{"line":80,"column":48}},"59":{"start":{"line":84,"column":4},"end":{"line":84,"column":71}},"60":{"start":{"line":87,"column":2},"end":{"line":87,"column":49}},"61":{"start":{"line":88,"column":2},"end":{"line":88,"column":16}},"62":{"start":{"line":91,"column":0},"end":{"line":101,"column":2}},"63":{"start":{"line":92,"column":2},"end":{"line":94,"column":17}},"64":{"start":{"line":93,"column":21},"end":{"line":93,"column":25}},"65":{"start":{"line":96,"column":2},"end":{"line":100,"column":9}},"66":{"start":{"line":97,"column":4},"end":{"line":97,"column":33}},"67":{"start":{"line":98,"column":4},"end":{"line":98,"column":37}},"68":{"start":{"line":99,"column":4},"end":{"line":99,"column":18}},"69":{"start":{"line":103,"column":0},"end":{"line":112,"column":2}},"70":{"start":{"line":104,"column":2},"end":{"line":104,"column":37}},"71":{"start":{"line":104,"column":13},"end":{"line":104,"column":37}},"72":{"start":{"line":106,"column":2},"end":{"line":106,"column":40}},"73":{"start":{"line":107,"column":2},"end":{"line":107,"column":69}},"74":{"start":{"line":107,"column":43},"end":{"line":107,"column":67}},"75":{"start":{"line":108,"column":2},"end":{"line":108,"column":36}},"76":{"start":{"line":108,"column":17},"end":{"line":108,"column":36}},"77":{"start":{"line":109,"column":2},"end":{"line":109,"column":65}},"78":{"start":{"line":109,"column":43},"end":{"line":109,"column":63}},"79":{"start":{"line":110,"column":2},"end":{"line":110,"column":36}},"80":{"start":{"line":110,"column":17},"end":{"line":110,"column":36}},"81":{"start":{"line":111,"column":2},"end":{"line":111,"column":24}},"82":{"start":{"line":126,"column":0},"end":{"line":189,"column":2}},"83":{"start":{"line":127,"column":2},"end":{"line":132,"column":3}},"84":{"start":{"line":128,"column":4},"end":{"line":128,"column":53}},"85":{"start":{"line":128,"column":29},"end":{"line":128,"column":53}},"86":{"start":{"line":129,"column":4},"end":{"line":131,"column":5}},"87":{"start":{"line":130,"column":6},"end":{"line":130,"column":62}},"88":{"start":{"line":134,"column":2},"end":{"line":134,"column":38}},"89":{"start":{"line":135,"column":2},"end":{"line":144,"column":9}},"90":{"start":{"line":136,"column":4},"end":{"line":136,"column":35}},"91":{"start":{"line":137,"column":4},"end":{"line":137,"column":55}},"92":{"start":{"line":138,"column":4},"end":{"line":138,"column":30}},"93":{"start":{"line":141,"column":4},"end":{"line":141,"column":42}},"94":{"start":{"line":142,"column":4},"end":{"line":142,"column":67}},"95":{"start":{"line":143,"column":4},"end":{"line":143,"column":22}},"96":{"start":{"line":147,"column":2},"end":{"line":151,"column":9}},"97":{"start":{"line":148,"column":4},"end":{"line":148,"column":41}},"98":{"start":{"line":149,"column":4},"end":{"line":149,"column":58}},"99":{"start":{"line":149,"column":28},"end":{"line":149,"column":58}},"100":{"start":{"line":150,"column":4},"end":{"line":150,"column":23}},"101":{"start":{"line":153,"column":2},"end":{"line":153,"column":22}},"102":{"start":{"line":154,"column":2},"end":{"line":186,"column":5}},"103":{"start":{"line":155,"column":4},"end":{"line":155,"column":35}},"104":{"start":{"line":156,"column":4},"end":{"line":156,"column":37}},"105":{"start":{"line":156,"column":30},"end":{"line":156,"column":37}},"106":{"start":{"line":157,"column":4},"end":{"line":160,"column":5}},"107":{"start":{"line":158,"column":6},"end":{"line":158,"column":84}},"108":{"start":{"line":159,"column":6},"end":{"line":159,"column":13}},"109":{"start":{"line":162,"column":4},"end":{"line":185,"column":7}},"110":{"start":{"line":163,"column":6},"end":{"line":163,"column":88}},"111":{"start":{"line":163,"column":57},"end":{"line":163,"column":86}},"112":{"start":{"line":164,"column":6},"end":{"line":166,"column":7}},"113":{"start":{"line":165,"column":8},"end":{"line":165,"column":184}},"114":{"start":{"line":167,"column":6},"end":{"line":167,"column":51}},"115":{"start":{"line":168,"column":6},"end":{"line":168,"column":88}},"116":{"start":{"line":168,"column":63},"end":{"line":168,"column":86}},"117":{"start":{"line":169,"column":6},"end":{"line":172,"column":7}},"118":{"start":{"line":170,"column":8},"end":{"line":170,"column":112}},"119":{"start":{"line":171,"column":8},"end":{"line":171,"column":15}},"120":{"start":{"line":174,"column":6},"end":{"line":174,"column":63}},"121":{"start":{"line":175,"column":6},"end":{"line":183,"column":9}},"122":{"start":{"line":176,"column":8},"end":{"line":180,"column":9}},"123":{"start":{"line":177,"column":10},"end":{"line":177,"column":140}},"124":{"start":{"line":178,"column":10},"end":{"line":178,"column":42}},"125":{"start":{"line":179,"column":10},"end":{"line":179,"column":17}},"126":{"start":{"line":182,"column":8},"end":{"line":182,"column":28}},"127":{"start":{"line":184,"column":6},"end":{"line":184,"column":53}},"128":{"start":{"line":188,"column":2},"end":{"line":188,"column":36}},"129":{"start":{"line":191,"column":0},"end":{"line":209,"column":2}},"130":{"start":{"line":192,"column":2},"end":{"line":195,"column":3}},"131":{"start":{"line":193,"column":4},"end":{"line":193,"column":33}},"132":{"start":{"line":194,"column":4},"end":{"line":194,"column":11}},"133":{"start":{"line":197,"column":2},"end":{"line":203,"column":3}},"134":{"start":{"line":198,"column":4},"end":{"line":198,"column":114}},"135":{"start":{"line":199,"column":4},"end":{"line":199,"column":16}},"136":{"start":{"line":200,"column":9},"end":{"line":203,"column":3}},"137":{"start":{"line":201,"column":4},"end":{"line":201,"column":106}},"138":{"start":{"line":202,"column":4},"end":{"line":202,"column":30}},"139":{"start":{"line":205,"column":2},"end":{"line":208,"column":13}},"140":{"start":{"line":211,"column":0},"end":{"line":250,"column":2}},"141":{"start":{"line":212,"column":2},"end":{"line":212,"column":40}},"142":{"start":{"line":214,"column":2},"end":{"line":216,"column":4}},"143":{"start":{"line":215,"column":4},"end":{"line":215,"column":86}},"144":{"start":{"line":217,"column":2},"end":{"line":217,"column":46}},"145":{"start":{"line":217,"column":27},"end":{"line":217,"column":45}},"146":{"start":{"line":220,"column":2},"end":{"line":220,"column":29}},"147":{"start":{"line":222,"column":2},"end":{"line":222,"column":40}},"148":{"start":{"line":223,"column":2},"end":{"line":223,"column":46}},"149":{"start":{"line":225,"column":2},"end":{"line":225,"column":76}},"150":{"start":{"line":225,"column":28},"end":{"line":225,"column":76}},"151":{"start":{"line":226,"column":2},"end":{"line":226,"column":54}},"152":{"start":{"line":227,"column":2},"end":{"line":227,"column":50}},"153":{"start":{"line":230,"column":2},"end":{"line":230,"column":41}},"154":{"start":{"line":231,"column":2},"end":{"line":233,"column":3}},"155":{"start":{"line":232,"column":4},"end":{"line":232,"column":40}},"156":{"start":{"line":236,"column":2},"end":{"line":236,"column":31}},"157":{"start":{"line":237,"column":2},"end":{"line":237,"column":35}},"158":{"start":{"line":238,"column":2},"end":{"line":238,"column":45}},"159":{"start":{"line":238,"column":26},"end":{"line":238,"column":45}},"160":{"start":{"line":239,"column":2},"end":{"line":239,"column":45}},"161":{"start":{"line":239,"column":26},"end":{"line":239,"column":45}},"162":{"start":{"line":242,"column":2},"end":{"line":244,"column":3}},"163":{"start":{"line":243,"column":4},"end":{"line":243,"column":46}},"164":{"start":{"line":245,"column":2},"end":{"line":247,"column":3}},"165":{"start":{"line":246,"column":4},"end":{"line":246,"column":48}},"166":{"start":{"line":249,"column":2},"end":{"line":249,"column":16}},"167":{"start":{"line":252,"column":0},"end":{"line":291,"column":2}},"168":{"start":{"line":253,"column":2},"end":{"line":253,"column":29}},"169":{"start":{"line":254,"column":2},"end":{"line":254,"column":33}},"170":{"start":{"line":255,"column":2},"end":{"line":255,"column":33}},"171":{"start":{"line":257,"column":2},"end":{"line":257,"column":86}},"172":{"start":{"line":257,"column":66},"end":{"line":257,"column":84}},"173":{"start":{"line":258,"column":2},"end":{"line":258,"column":87}},"174":{"start":{"line":259,"column":2},"end":{"line":259,"column":25}},"175":{"start":{"line":261,"column":2},"end":{"line":268,"column":5}},"176":{"start":{"line":262,"column":4},"end":{"line":262,"column":60}},"177":{"start":{"line":263,"column":4},"end":{"line":263,"column":60}},"178":{"start":{"line":264,"column":4},"end":{"line":264,"column":33}},"179":{"start":{"line":266,"column":4},"end":{"line":267,"column":47}},"180":{"start":{"line":267,"column":14},"end":{"line":267,"column":46}},"181":{"start":{"line":270,"column":2},"end":{"line":288,"column":4}},"182":{"start":{"line":290,"column":2},"end":{"line":290,"column":16}},"183":{"start":{"line":293,"column":0},"end":{"line":301,"column":2}},"184":{"start":{"line":294,"column":2},"end":{"line":294,"column":29}},"185":{"start":{"line":295,"column":2},"end":{"line":295,"column":47}},"186":{"start":{"line":295,"column":23},"end":{"line":295,"column":46}},"187":{"start":{"line":297,"column":2},"end":{"line":297,"column":36}},"188":{"start":{"line":298,"column":2},"end":{"line":298,"column":42}},"189":{"start":{"line":300,"column":2},"end":{"line":300,"column":16}},"190":{"start":{"line":303,"column":0},"end":{"line":320,"column":2}},"191":{"start":{"line":304,"column":2},"end":{"line":304,"column":40}},"192":{"start":{"line":304,"column":26},"end":{"line":304,"column":40}},"193":{"start":{"line":305,"column":2},"end":{"line":318,"column":3}},"194":{"start":{"line":306,"column":4},"end":{"line":306,"column":50}},"195":{"start":{"line":307,"column":4},"end":{"line":307,"column":77}},"196":{"start":{"line":308,"column":4},"end":{"line":312,"column":5}},"197":{"start":{"line":309,"column":6},"end":{"line":309,"column":24}},"198":{"start":{"line":313,"column":4},"end":{"line":315,"column":5}},"199":{"start":{"line":314,"column":6},"end":{"line":314,"column":36}},"200":{"start":{"line":319,"column":2},"end":{"line":319,"column":16}},"201":{"start":{"line":322,"column":0},"end":{"line":358,"column":2}},"202":{"start":{"line":324,"column":2},"end":{"line":324,"column":37}},"203":{"start":{"line":325,"column":2},"end":{"line":331,"column":5}},"204":{"start":{"line":325,"column":26},"end":{"line":331,"column":4}},"205":{"start":{"line":326,"column":4},"end":{"line":326,"column":50}},"206":{"start":{"line":326,"column":31},"end":{"line":326,"column":50}},"207":{"start":{"line":327,"column":4},"end":{"line":330,"column":7}},"208":{"start":{"line":328,"column":6},"end":{"line":329,"column":37}},"209":{"start":{"line":328,"column":15},"end":{"line":328,"column":27}},"210":{"start":{"line":329,"column":11},"end":{"line":329,"column":37}},"211":{"start":{"line":333,"column":2},"end":{"line":357,"column":5}},"212":{"start":{"line":334,"column":4},"end":{"line":343,"column":13}},"213":{"start":{"line":336,"column":8},"end":{"line":338,"column":9}},"214":{"start":{"line":337,"column":10},"end":{"line":337,"column":50}},"215":{"start":{"line":339,"column":8},"end":{"line":339,"column":47}},"216":{"start":{"line":342,"column":8},"end":{"line":342,"column":45}},"217":{"start":{"line":345,"column":4},"end":{"line":345,"column":31}},"218":{"start":{"line":347,"column":4},"end":{"line":354,"column":5}},"219":{"start":{"line":349,"column":8},"end":{"line":349,"column":82}},"220":{"start":{"line":350,"column":8},"end":{"line":350,"column":69}},"221":{"start":{"line":352,"column":8},"end":{"line":352,"column":28}},"222":{"start":{"line":353,"column":8},"end":{"line":353,"column":14}},"223":{"start":{"line":356,"column":4},"end":{"line":356,"column":39}},"224":{"start":{"line":360,"column":0},"end":{"line":373,"column":3}},"225":{"start":{"line":360,"column":26},"end":{"line":373,"column":2}},"226":{"start":{"line":361,"column":2},"end":{"line":361,"column":29}},"227":{"start":{"line":362,"column":2},"end":{"line":362,"column":47}},"228":{"start":{"line":363,"column":2},"end":{"line":363,"column":66}},"229":{"start":{"line":364,"column":2},"end":{"line":364,"column":33}},"230":{"start":{"line":365,"column":2},"end":{"line":365,"column":42}},"231":{"start":{"line":367,"column":2},"end":{"line":371,"column":3}},"232":{"start":{"line":368,"column":4},"end":{"line":368,"column":46}},"233":{"start":{"line":369,"column":9},"end":{"line":371,"column":3}},"234":{"start":{"line":370,"column":4},"end":{"line":370,"column":55}},"235":{"start":{"line":372,"column":2},"end":{"line":372,"column":14}},"236":{"start":{"line":375,"column":0},"end":{"line":382,"column":2}},"237":{"start":{"line":376,"column":2},"end":{"line":376,"column":68}},"238":{"start":{"line":377,"column":2},"end":{"line":381,"column":5}},"239":{"start":{"line":378,"column":4},"end":{"line":380,"column":5}},"240":{"start":{"line":379,"column":6},"end":{"line":379,"column":190}},"241":{"start":{"line":384,"column":0},"end":{"line":395,"column":2}},"242":{"start":{"line":385,"column":2},"end":{"line":385,"column":26}},"243":{"start":{"line":386,"column":2},"end":{"line":394,"column":5}},"244":{"start":{"line":390,"column":4},"end":{"line":390,"column":48}},"245":{"start":{"line":391,"column":4},"end":{"line":391,"column":29}},"246":{"start":{"line":392,"column":4},"end":{"line":392,"column":31}},"247":{"start":{"line":393,"column":4},"end":{"line":393,"column":18}},"248":{"start":{"line":397,"column":0},"end":{"line":404,"column":4}},"249":{"start":{"line":406,"column":0},"end":{"line":466,"column":2}},"250":{"start":{"line":407,"column":2},"end":{"line":407,"column":15}},"251":{"start":{"line":408,"column":2},"end":{"line":408,"column":28}},"252":{"start":{"line":410,"column":2},"end":{"line":465,"column":5}},"253":{"start":{"line":411,"column":4},"end":{"line":411,"column":42}},"254":{"start":{"line":413,"column":4},"end":{"line":413,"column":43}},"255":{"start":{"line":414,"column":4},"end":{"line":414,"column":41}},"256":{"start":{"line":415,"column":4},"end":{"line":415,"column":35}},"257":{"start":{"line":416,"column":4},"end":{"line":416,"column":39}},"258":{"start":{"line":417,"column":4},"end":{"line":417,"column":42}},"259":{"start":{"line":418,"column":4},"end":{"line":418,"column":22}},"260":{"start":{"line":420,"column":4},"end":{"line":420,"column":44}},"261":{"start":{"line":421,"column":4},"end":{"line":423,"column":5}},"262":{"start":{"line":422,"column":6},"end":{"line":422,"column":58}},"263":{"start":{"line":424,"column":4},"end":{"line":426,"column":5}},"264":{"start":{"line":425,"column":6},"end":{"line":425,"column":71}},"265":{"start":{"line":427,"column":4},"end":{"line":427,"column":18}},"266":{"start":{"line":429,"column":4},"end":{"line":431,"column":5}},"267":{"start":{"line":430,"column":6},"end":{"line":430,"column":56}},"268":{"start":{"line":433,"column":4},"end":{"line":433,"column":69}},"269":{"start":{"line":434,"column":4},"end":{"line":462,"column":5}},"270":{"start":{"line":435,"column":6},"end":{"line":441,"column":7}},"271":{"start":{"line":436,"column":8},"end":{"line":440,"column":10}},"272":{"start":{"line":437,"column":10},"end":{"line":437,"column":185}},"273":{"start":{"line":438,"column":10},"end":{"line":438,"column":98}},"274":{"start":{"line":439,"column":10},"end":{"line":439,"column":26}},"275":{"start":{"line":443,"column":6},"end":{"line":445,"column":7}},"276":{"start":{"line":444,"column":8},"end":{"line":444,"column":52}},"277":{"start":{"line":447,"column":6},"end":{"line":447,"column":24}},"278":{"start":{"line":448,"column":11},"end":{"line":462,"column":5}},"279":{"start":{"line":449,"column":6},"end":{"line":461,"column":7}},"280":{"start":{"line":450,"column":8},"end":{"line":450,"column":66}},"281":{"start":{"line":451,"column":8},"end":{"line":458,"column":9}},"282":{"start":{"line":452,"column":10},"end":{"line":452,"column":52}},"283":{"start":{"line":453,"column":10},"end":{"line":453,"column":80}},"284":{"start":{"line":454,"column":10},"end":{"line":457,"column":11}},"285":{"start":{"line":455,"column":12},"end":{"line":455,"column":132}},"286":{"start":{"line":456,"column":12},"end":{"line":456,"column":83}},"287":{"start":{"line":456,"column":60},"end":{"line":456,"column":81}},"288":{"start":{"line":464,"column":4},"end":{"line":464,"column":16}},"289":{"start":{"line":468,"column":0},"end":{"line":488,"column":2}},"290":{"start":{"line":469,"column":2},"end":{"line":469,"column":39}},"291":{"start":{"line":470,"column":2},"end":{"line":472,"column":40}},"292":{"start":{"line":474,"column":2},"end":{"line":487,"column":24}},"293":{"start":{"line":475,"column":4},"end":{"line":475,"column":31}},"294":{"start":{"line":475,"column":24},"end":{"line":475,"column":31}},"295":{"start":{"line":476,"column":4},"end":{"line":476,"column":85}},"296":{"start":{"line":476,"column":39},"end":{"line":476,"column":54}},"297":{"start":{"line":476,"column":65},"end":{"line":476,"column":83}},"298":{"start":{"line":477,"column":4},"end":{"line":477,"column":15}},"299":{"start":{"line":480,"column":4},"end":{"line":480,"column":73}},"300":{"start":{"line":480,"column":27},"end":{"line":480,"column":72}},"301":{"start":{"line":481,"column":4},"end":{"line":481,"column":78}},"302":{"start":{"line":481,"column":32},"end":{"line":481,"column":77}},"303":{"start":{"line":481,"column":74},"end":{"line":481,"column":76}},"304":{"start":{"line":482,"column":4},"end":{"line":486,"column":7}},"305":{"start":{"line":483,"column":6},"end":{"line":483,"column":36}},"306":{"start":{"line":483,"column":29},"end":{"line":483,"column":36}},"307":{"start":{"line":484,"column":6},"end":{"line":484,"column":121}},"308":{"start":{"line":485,"column":6},"end":{"line":485,"column":65}},"309":{"start":{"line":487,"column":16},"end":{"line":487,"column":22}},"310":{"start":{"line":490,"column":0},"end":{"line":490,"column":43}},"311":{"start":{"line":492,"column":0},"end":{"line":508,"column":2}},"312":{"start":{"line":493,"column":2},"end":{"line":493,"column":61}},"313":{"start":{"line":494,"column":2},"end":{"line":494,"column":49}},"314":{"start":{"line":496,"column":2},"end":{"line":507,"column":42}},"315":{"start":{"line":499,"column":20},"end":{"line":499,"column":57}},"316":{"start":{"line":501,"column":20},"end":{"line":501,"column":54}},"317":{"start":{"line":502,"column":20},"end":{"line":502,"column":54}},"318":{"start":{"line":511,"column":0},"end":{"line":513,"column":2}},"319":{"start":{"line":512,"column":2},"end":{"line":512,"column":47}},"320":{"start":{"line":523,"column":0},"end":{"line":549,"column":2}},"321":{"start":{"line":524,"column":2},"end":{"line":524,"column":26}},"322":{"start":{"line":525,"column":2},"end":{"line":529,"column":4}},"323":{"start":{"line":530,"column":2},"end":{"line":536,"column":3}},"324":{"start":{"line":531,"column":4},"end":{"line":531,"column":65}},"325":{"start":{"line":533,"column":4},"end":{"line":533,"column":40}},"326":{"start":{"line":534,"column":4},"end":{"line":534,"column":31}},"327":{"start":{"line":535,"column":4},"end":{"line":535,"column":37}},"328":{"start":{"line":537,"column":2},"end":{"line":541,"column":3}},"329":{"start":{"line":538,"column":4},"end":{"line":540,"column":6}},"330":{"start":{"line":542,"column":2},"end":{"line":547,"column":3}},"331":{"start":{"line":543,"column":4},"end":{"line":543,"column":38}},"332":{"start":{"line":544,"column":4},"end":{"line":544,"column":42}},"333":{"start":{"line":544,"column":24},"end":{"line":544,"column":42}},"334":{"start":{"line":545,"column":4},"end":{"line":545,"column":53}},"335":{"start":{"line":545,"column":25},"end":{"line":545,"column":53}},"336":{"start":{"line":546,"column":4},"end":{"line":546,"column":49}},"337":{"start":{"line":546,"column":22},"end":{"line":546,"column":49}},"338":{"start":{"line":548,"column":2},"end":{"line":548,"column":16}},"339":{"start":{"line":551,"column":0},"end":{"line":555,"column":2}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"2":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":24}},{"start":{"line":20,"column":28},"end":{"line":20,"column":68}},{"start":{"line":20,"column":72},"end":{"line":20,"column":109}}]},"3":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"4":{"line":36,"type":"cond-expr","locations":[{"start":{"line":36,"column":42},"end":{"line":36,"column":55}},{"start":{"line":36,"column":58},"end":{"line":36,"column":97}}]},"5":{"line":36,"type":"cond-expr","locations":[{"start":{"line":36,"column":82},"end":{"line":36,"column":90}},{"start":{"line":36,"column":93},"end":{"line":36,"column":97}}]},"6":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":6},"end":{"line":37,"column":6}},{"start":{"line":37,"column":6},"end":{"line":37,"column":6}}]},"7":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":10},"end":{"line":37,"column":18}},{"start":{"line":37,"column":22},"end":{"line":37,"column":40}},{"start":{"line":37,"column":44},"end":{"line":37,"column":65}}]},"8":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":2},"end":{"line":49,"column":2}},{"start":{"line":49,"column":2},"end":{"line":49,"column":2}}]},"9":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":9},"end":{"line":51,"column":9}},{"start":{"line":51,"column":9},"end":{"line":51,"column":9}}]},"10":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":2},"end":{"line":56,"column":2}},{"start":{"line":56,"column":2},"end":{"line":56,"column":2}}]},"11":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":6},"end":{"line":56,"column":16}},{"start":{"line":56,"column":20},"end":{"line":56,"column":41}}]},"12":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":6},"end":{"line":60,"column":6}},{"start":{"line":60,"column":6},"end":{"line":60,"column":6}}]},"13":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":10},"end":{"line":60,"column":30}},{"start":{"line":60,"column":34},"end":{"line":60,"column":43}}]},"14":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":26},"end":{"line":68,"column":42}},{"start":{"line":68,"column":46},"end":{"line":68,"column":72}},{"start":{"line":68,"column":76},"end":{"line":68,"column":78}}]},"15":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":6},"end":{"line":74,"column":6}},{"start":{"line":74,"column":6},"end":{"line":74,"column":6}}]},"16":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":10},"end":{"line":74,"column":14}},{"start":{"line":74,"column":18},"end":{"line":74,"column":25}}]},"17":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":8}},{"start":{"line":75,"column":8},"end":{"line":75,"column":8}}]},"18":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":21},"end":{"line":76,"column":45}},{"start":{"line":76,"column":49},"end":{"line":76,"column":51}}]},"19":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":22},"end":{"line":77,"column":39}},{"start":{"line":77,"column":43},"end":{"line":77,"column":45}}]},"20":{"line":80,"type":"binary-expr","locations":[{"start":{"line":80,"column":17},"end":{"line":80,"column":21}},{"start":{"line":80,"column":25},"end":{"line":80,"column":47}}]},"21":{"line":92,"type":"cond-expr","locations":[{"start":{"line":93,"column":4},"end":{"line":93,"column":26}},{"start":{"line":94,"column":4},"end":{"line":94,"column":16}}]},"22":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":10}},{"start":{"line":94,"column":14},"end":{"line":94,"column":16}}]},"23":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":2},"end":{"line":104,"column":2}},{"start":{"line":104,"column":2},"end":{"line":104,"column":2}}]},"24":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":2},"end":{"line":108,"column":2}},{"start":{"line":108,"column":2},"end":{"line":108,"column":2}}]},"25":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":2},"end":{"line":110,"column":2}},{"start":{"line":110,"column":2},"end":{"line":110,"column":2}}]},"26":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":2},"end":{"line":127,"column":2}},{"start":{"line":127,"column":2},"end":{"line":127,"column":2}}]},"27":{"line":127,"type":"binary-expr","locations":[{"start":{"line":127,"column":6},"end":{"line":127,"column":26}},{"start":{"line":127,"column":30},"end":{"line":127,"column":62}}]},"28":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":4},"end":{"line":128,"column":4}},{"start":{"line":128,"column":4},"end":{"line":128,"column":4}}]},"29":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":4},"end":{"line":129,"column":4}},{"start":{"line":129,"column":4},"end":{"line":129,"column":4}}]},"30":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":4},"end":{"line":149,"column":4}},{"start":{"line":149,"column":4},"end":{"line":149,"column":4}}]},"31":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":4},"end":{"line":156,"column":4}},{"start":{"line":156,"column":4},"end":{"line":156,"column":4}}]},"32":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":4},"end":{"line":157,"column":4}},{"start":{"line":157,"column":4},"end":{"line":157,"column":4}}]},"33":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":6},"end":{"line":164,"column":6}},{"start":{"line":164,"column":6},"end":{"line":164,"column":6}}]},"34":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":6},"end":{"line":169,"column":6}},{"start":{"line":169,"column":6},"end":{"line":169,"column":6}}]},"35":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":8},"end":{"line":176,"column":8}},{"start":{"line":176,"column":8},"end":{"line":176,"column":8}}]},"36":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":2},"end":{"line":192,"column":2}},{"start":{"line":192,"column":2},"end":{"line":192,"column":2}}]},"37":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":2},"end":{"line":197,"column":2}},{"start":{"line":197,"column":2},"end":{"line":197,"column":2}}]},"38":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":9},"end":{"line":200,"column":9}},{"start":{"line":200,"column":9},"end":{"line":200,"column":9}}]},"39":{"line":215,"type":"cond-expr","locations":[{"start":{"line":215,"column":38},"end":{"line":215,"column":42}},{"start":{"line":215,"column":45},"end":{"line":215,"column":85}}]},"40":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":2},"end":{"line":225,"column":2}},{"start":{"line":225,"column":2},"end":{"line":225,"column":2}}]},"41":{"line":225,"type":"binary-expr","locations":[{"start":{"line":225,"column":43},"end":{"line":225,"column":53}},{"start":{"line":225,"column":57},"end":{"line":225,"column":75}}]},"42":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":2},"end":{"line":231,"column":2}},{"start":{"line":231,"column":2},"end":{"line":231,"column":2}}]},"43":{"line":238,"type":"if","locations":[{"start":{"line":238,"column":2},"end":{"line":238,"column":2}},{"start":{"line":238,"column":2},"end":{"line":238,"column":2}}]},"44":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":2},"end":{"line":239,"column":2}},{"start":{"line":239,"column":2},"end":{"line":239,"column":2}}]},"45":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":2},"end":{"line":242,"column":2}},{"start":{"line":242,"column":2},"end":{"line":242,"column":2}}]},"46":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":2},"end":{"line":245,"column":2}},{"start":{"line":245,"column":2},"end":{"line":245,"column":2}}]},"47":{"line":262,"type":"cond-expr","locations":[{"start":{"line":262,"column":40},"end":{"line":262,"column":54}},{"start":{"line":262,"column":57},"end":{"line":262,"column":59}}]},"48":{"line":266,"type":"cond-expr","locations":[{"start":{"line":266,"column":42},"end":{"line":266,"column":44}},{"start":{"line":267,"column":6},"end":{"line":267,"column":46}}]},"49":{"line":267,"type":"binary-expr","locations":[{"start":{"line":267,"column":14},"end":{"line":267,"column":34}},{"start":{"line":267,"column":38},"end":{"line":267,"column":46}}]},"50":{"line":279,"type":"cond-expr","locations":[{"start":{"line":280,"column":8},"end":{"line":280,"column":50}},{"start":{"line":281,"column":8},"end":{"line":281,"column":32}}]},"51":{"line":304,"type":"if","locations":[{"start":{"line":304,"column":2},"end":{"line":304,"column":2}},{"start":{"line":304,"column":2},"end":{"line":304,"column":2}}]},"52":{"line":313,"type":"if","locations":[{"start":{"line":313,"column":4},"end":{"line":313,"column":4}},{"start":{"line":313,"column":4},"end":{"line":313,"column":4}}]},"53":{"line":326,"type":"if","locations":[{"start":{"line":326,"column":4},"end":{"line":326,"column":4}},{"start":{"line":326,"column":4},"end":{"line":326,"column":4}}]},"54":{"line":328,"type":"if","locations":[{"start":{"line":328,"column":6},"end":{"line":328,"column":6}},{"start":{"line":328,"column":6},"end":{"line":328,"column":6}}]},"55":{"line":329,"type":"binary-expr","locations":[{"start":{"line":329,"column":19},"end":{"line":329,"column":29}},{"start":{"line":329,"column":33},"end":{"line":329,"column":35}}]},"56":{"line":336,"type":"if","locations":[{"start":{"line":336,"column":8},"end":{"line":336,"column":8}},{"start":{"line":336,"column":8},"end":{"line":336,"column":8}}]},"57":{"line":337,"type":"cond-expr","locations":[{"start":{"line":337,"column":43},"end":{"line":337,"column":45}},{"start":{"line":337,"column":48},"end":{"line":337,"column":49}}]},"58":{"line":347,"type":"switch","locations":[{"start":{"line":348,"column":6},"end":{"line":350,"column":69}},{"start":{"line":351,"column":6},"end":{"line":353,"column":14}}]},"59":{"line":367,"type":"if","locations":[{"start":{"line":367,"column":2},"end":{"line":367,"column":2}},{"start":{"line":367,"column":2},"end":{"line":367,"column":2}}]},"60":{"line":369,"type":"if","locations":[{"start":{"line":369,"column":9},"end":{"line":369,"column":9}},{"start":{"line":369,"column":9},"end":{"line":369,"column":9}}]},"61":{"line":378,"type":"if","locations":[{"start":{"line":378,"column":4},"end":{"line":378,"column":4}},{"start":{"line":378,"column":4},"end":{"line":378,"column":4}}]},"62":{"line":420,"type":"binary-expr","locations":[{"start":{"line":420,"column":19},"end":{"line":420,"column":22}},{"start":{"line":420,"column":26},"end":{"line":420,"column":36}},{"start":{"line":420,"column":40},"end":{"line":420,"column":43}}]},"63":{"line":421,"type":"if","locations":[{"start":{"line":421,"column":4},"end":{"line":421,"column":4}},{"start":{"line":421,"column":4},"end":{"line":421,"column":4}}]},"64":{"line":424,"type":"if","locations":[{"start":{"line":424,"column":4},"end":{"line":424,"column":4}},{"start":{"line":424,"column":4},"end":{"line":424,"column":4}}]},"65":{"line":429,"type":"if","locations":[{"start":{"line":429,"column":4},"end":{"line":429,"column":4}},{"start":{"line":429,"column":4},"end":{"line":429,"column":4}}]},"66":{"line":434,"type":"if","locations":[{"start":{"line":434,"column":4},"end":{"line":434,"column":4}},{"start":{"line":434,"column":4},"end":{"line":434,"column":4}}]},"67":{"line":435,"type":"if","locations":[{"start":{"line":435,"column":6},"end":{"line":435,"column":6}},{"start":{"line":435,"column":6},"end":{"line":435,"column":6}}]},"68":{"line":443,"type":"if","locations":[{"start":{"line":443,"column":6},"end":{"line":443,"column":6}},{"start":{"line":443,"column":6},"end":{"line":443,"column":6}}]},"69":{"line":448,"type":"if","locations":[{"start":{"line":448,"column":11},"end":{"line":448,"column":11}},{"start":{"line":448,"column":11},"end":{"line":448,"column":11}}]},"70":{"line":451,"type":"if","locations":[{"start":{"line":451,"column":8},"end":{"line":451,"column":8}},{"start":{"line":451,"column":8},"end":{"line":451,"column":8}}]},"71":{"line":454,"type":"if","locations":[{"start":{"line":454,"column":10},"end":{"line":454,"column":10}},{"start":{"line":454,"column":10},"end":{"line":454,"column":10}}]},"72":{"line":470,"type":"cond-expr","locations":[{"start":{"line":471,"column":4},"end":{"line":471,"column":20}},{"start":{"line":472,"column":4},"end":{"line":472,"column":39}}]},"73":{"line":475,"type":"if","locations":[{"start":{"line":475,"column":4},"end":{"line":475,"column":4}},{"start":{"line":475,"column":4},"end":{"line":475,"column":4}}]},"74":{"line":483,"type":"if","locations":[{"start":{"line":483,"column":6},"end":{"line":483,"column":6}},{"start":{"line":483,"column":6},"end":{"line":483,"column":6}}]},"75":{"line":493,"type":"binary-expr","locations":[{"start":{"line":493,"column":21},"end":{"line":493,"column":35}},{"start":{"line":493,"column":39},"end":{"line":493,"column":60}}]},"76":{"line":500,"type":"binary-expr","locations":[{"start":{"line":500,"column":10},"end":{"line":500,"column":20}},{"start":{"line":500,"column":24},"end":{"line":500,"column":40}}]},"77":{"line":506,"type":"binary-expr","locations":[{"start":{"line":506,"column":10},"end":{"line":506,"column":20}},{"start":{"line":506,"column":24},"end":{"line":506,"column":42}}]},"78":{"line":528,"type":"cond-expr","locations":[{"start":{"line":528,"column":15},"end":{"line":528,"column":29}},{"start":{"line":528,"column":32},"end":{"line":528,"column":34}}]},"79":{"line":530,"type":"if","locations":[{"start":{"line":530,"column":2},"end":{"line":530,"column":2}},{"start":{"line":530,"column":2},"end":{"line":530,"column":2}}]},"80":{"line":530,"type":"binary-expr","locations":[{"start":{"line":530,"column":6},"end":{"line":530,"column":32}},{"start":{"line":530,"column":36},"end":{"line":530,"column":73}}]},"81":{"line":531,"type":"binary-expr","locations":[{"start":{"line":531,"column":27},"end":{"line":531,"column":47}},{"start":{"line":531,"column":51},"end":{"line":531,"column":64}}]},"82":{"line":537,"type":"if","locations":[{"start":{"line":537,"column":2},"end":{"line":537,"column":2}},{"start":{"line":537,"column":2},"end":{"line":537,"column":2}}]},"83":{"line":542,"type":"if","locations":[{"start":{"line":542,"column":2},"end":{"line":542,"column":2}},{"start":{"line":542,"column":2},"end":{"line":542,"column":2}}]},"84":{"line":544,"type":"if","locations":[{"start":{"line":544,"column":4},"end":{"line":544,"column":4}},{"start":{"line":544,"column":4},"end":{"line":544,"column":4}}]},"85":{"line":545,"type":"if","locations":[{"start":{"line":545,"column":4},"end":{"line":545,"column":4}},{"start":{"line":545,"column":4},"end":{"line":545,"column":4}}]},"86":{"line":546,"type":"if","locations":[{"start":{"line":546,"column":4},"end":{"line":546,"column":4}},{"start":{"line":546,"column":4},"end":{"line":546,"column":4}}]}},"code":["'use strict';","require('micro-es7-shim');","require('coffee-script').register();","","const checkDeps = require('check-dependencies');","const sysPath = require('universal-path');","const anymatch = require('anymatch');","const logger = require('loggy');","const readComponents = require('read-components');","const debug = require('debug')('brunch:config');","const helpers = require('./helpers');","const deppack = require('deppack'); // isNpm, loadInit","const wrappers = require('./modules');","const validateConfig = require('./config-validate');","const BrunchError = require('./error');","const install = require('deps-install');","const defaultConfigFilename = 'brunch-config';","","const checkNpmModules = config => {","  if (config.npm.enabled && config.modules.definition !== 'commonjs' && config.modules.wrapper !== 'commonjs') {","    throw new BrunchError('NPM_NOT_COMMONJS', config.modules);","  }","  return config;","};","","const dontMerge = files => {","  const values = Object.values(files);","","  // this fn will be called on every nested object that will be merged","  return (target, source) => {","    if (!values.includes(target)) return () => true;","","    // this fn will be called on every enumerable entry in source","    return key => {","      // if either joinTo or entryPoints is overriden but not both, reset the other, as they are supposed to go hand-in-hand","      const otherKey = key === 'joinTo' ? 'entryPoints' : key === 'entryPoints' ? 'joinTo' : null;","      if (otherKey && otherKey in target && !(otherKey in source)) {","        delete target[otherKey];","      }","","      return false;","    };","  };","};","","const applyOverrides = (config, env) => {","  // Allow the environment to be set from environment variable.","  config.env = env;","  if ('BRUNCH_ENV' in process.env) {","    env.unshift(process.env.BRUNCH_ENV);","  } else if ('NODE_ENV' in process.env) {","    env.unshift(process.env.NODE_ENV);","  }","","  // Preserve default config before overriding.","  if (env.length && 'overrides' in config) {","    config.overrides._default = {};","    Object.keys(config).forEach(prop => {","      const isObject = toString.call(config[prop]) === '[object Object]';","      if (prop === 'overrides' || !isObject) return;","","      const override = config.overrides._default[prop] = {};","      helpers.deepAssign(override, config[prop]);","    });","  }","  env.forEach(override => {","    const plug = config.plugins;","    const overrideProps = config.overrides && config.overrides[override] || {};","    const specials = {on: 'off', off: 'on'};","","    // Special override handling for plugins.on|off arrays (gh-826).","    Object.keys(specials).forEach(k => {","      const v = specials[k];","      if (plug && plug[v]) {","        if (overrideProps.plugins == null) overrideProps.plugins = {};","        const item = overrideProps.plugins[v] || [];","        const cItem = config.plugins[v] || [];","        overrideProps.plugins[v] = item.concat(cItem.filter(plugin => {","          const list = overrideProps.plugins[k];","          return list && !list.includes(plugin);","        }));","      }","    });","    helpers.deepAssign(config, overrideProps, dontMerge(config.files));","  });","  // ensure server's public path takes overrides into account","  config.server.publicPath = config.paths.public;","  return config;","};","","const normalizeJoinConfig = joinTo => {","  const object = typeof joinTo === 'string' ?","    {[joinTo]: () => true} :","    joinTo || {};","","  return Object.keys(object).reduce((subCfg, path) => {","    const checker = object[path];","    subCfg[path] = anymatch(checker);","    return subCfg;","  }, {});","};","","const normalizePluginHelpers = (items, subCfg) => {","  if (items) return [].concat(items);","","  const destFiles = Object.keys(subCfg);","  const joinMatch = destFiles.find(file => subCfg[file]('vendor/.'));","  if (joinMatch) return [joinMatch];","  const nameMatch = destFiles.find(file => /vendor/i.test(file));","  if (nameMatch) return [nameMatch];","  return [destFiles[0]];","};","","/* Converts `config.files[...].joinTo` to one format."," * config.files[type].joinTo can be a string, a map of {str: regexp} or a map"," * of {str: function}."," * Also includes `config.files.javascripts.entryPoints`."," *"," * Example output:"," *"," * {"," *   javascripts: {'*': {'javascripts/app.js': checker}, 'app/init.js': {'javascripts/bundle.js': 'app/init.js'}},"," *   templates: {'*': {'javascripts/app.js': checker2}}"," * }"," */","const createJoinConfig = (cfgFiles, paths) => {","  if (cfgFiles.javascripts && 'joinTo' in cfgFiles.javascripts) {","    if (!cfgFiles.templates) cfgFiles.templates = {};","    if (!('joinTo' in cfgFiles.templates)) {","      cfgFiles.templates.joinTo = cfgFiles.javascripts.joinTo;","    }","  }","","  const types = Object.keys(cfgFiles);","  const joinConfig = types.reduce((joinConfig, type) => {","    const fileCfg = cfgFiles[type];","    const subCfg = normalizeJoinConfig(fileCfg.joinTo);","    joinConfig[type] = subCfg;","","    // special matching for plugin helpers","    const helpers = fileCfg.pluginHelpers;","    subCfg.pluginHelpers = normalizePluginHelpers(helpers, subCfg);","    return joinConfig;","  }, {});","","  // the joinTo is just a special case of entryPoints","  const entryPoints = types.reduce((entryPoints, type) => {","    const point = entryPoints[type] = {};","    if (type in joinConfig) point['*'] = joinConfig[type];","    return entryPoints;","  }, {});","","  const outPaths = [];","  types.forEach(type => {","    const fileCfg = cfgFiles[type];","    if (!fileCfg.entryPoints) return;","    if (type !== 'javascripts') {","      logger.warn(`entryPoints can only be used with 'javascripts', not '${type}'`);","      return;","    }","","    Object.keys(fileCfg.entryPoints).forEach(target => {","      const isTargetWatched = paths.watched.some(path => target.startsWith(`${path}/`));","      if (!isTargetWatched) {","        logger.warn(`The correct use of entry points is: \\`'entryFile.js': 'outputFile.js'\\`. You are trying to use '${target}' as an entry point, but it is probably an output file.`);","      }","      const entryCfg = fileCfg.entryPoints[target];","      const alreadyDefined = Object.keys(entryCfg).some(out => out in joinConfig[type]);","      if (alreadyDefined) {","        logger.warn(`config.files.${type}.joinTo is already defined for '${target}', can't add an entry point`);","        return;","      }","","      const normalizedEntryCfg = normalizeJoinConfig(entryCfg);","      Object.keys(normalizedEntryCfg).forEach(path => {","        if (outPaths.includes(path)) {","          logger.warn(`'${path}' is already used by another entry point, can't add it to config.files.${type}.entryPoints for '${target}'`);","          delete normalizedEntryCfg[path];","          return;","        }","","        outPaths.push(path);","      });","      entryPoints[type][target] = normalizedEntryCfg;","    });","  });","","  return Object.freeze(entryPoints);","};","","const setLoggyOptions = config => {","  if (config === false) {","    logger.notifications = false;","    return;","  }","","  if (config === true) {","    logger.warn('`config.notifications: true` is deprecated. Notifications are on by default. Remove the option');","    config = {};","  } else if (Array.isArray(config)) {","    logger.warn('`config.notifications` array is deprecated. Use `config.notifications.levels` instead.');","    config = {levels: config};","  }","","  Object.assign(logger.notifications, {","    app: 'Brunch',","    icon: sysPath.resolve(__dirname, '..', 'logo.png'),","  }, config);","};","","const setConfigDefaults = (config, configPath) => {","  setLoggyOptions(config.notifications);","","  const join = (parent, name) => {","    return sysPath.isAbsolute(name) ? name : sysPath.join(config.paths[parent], name);","  };","  const joinRoot = name => join('root', name);","","  // Paths.","  const paths = config.paths;","","  paths.public = joinRoot(paths.public);","  paths.watched = paths.watched.map(joinRoot);","","  if (paths.config == null) paths.config = configPath || joinRoot('config');","  paths.packageConfig = joinRoot(paths.packageConfig);","  paths.bowerConfig = joinRoot(paths.bowerConfig);","","  // Conventions.","  const conventions = config.conventions;","  if (paths.ignored) {","    conventions.ignored = paths.ignored;","  }","","  // Server.","  const server = config.server;","  server.publicPath = paths.public;","  if (server.run == null) server.run = false;","  if (!config.persistent) server.run = false;","","  // Hooks.","  if (config.onCompile) {","    config.hooks.onCompile = config.onCompile;","  }","  if (config.preCompile) {","    config.hooks.preCompile = config.preCompile;","  }","","  return config;","};","","const normalizeConfig = config => {","  const paths = config.paths;","  const modules = config.modules;","  const watcher = config.watcher;","","  const maybeConfigs = Object.keys(require.extensions).map(ext => paths.config + ext);","  const allConfigFiles = [paths.packageConfig, paths.bowerConfig].concat(maybeConfigs);","  const conventions = {};","","  Object.keys(config.conventions).forEach(key => {","    const include = key === 'ignored' ? allConfigFiles : [];","    const checker = include.concat(config.conventions[key]);","    const fn = anymatch(checker);","","    conventions[key] = key === 'vendor' ? fn :","      path => !deppack.isNpm(path) && fn(path);","  });","","  config._normalized = {","    join: createJoinConfig(config.files, paths),","    paths: Object.assign({allConfigFiles}, paths),","    conventions,","    packageInfo: {},","    persistent: config.persistent,","    isProduction: !!config.isProduction,","    watcher: {","      usePolling: watcher.usePolling,","      awaitWriteFinish: watcher.awaitWriteFinish === true ?","        {stabilityThreshold: 50, pollInterval: 10} :","        watcher.awaitWriteFinish,","    },","    modules: {","      wrapper: wrappers.normalizeWrapper(modules.wrapper, modules.nameCleaner),","      definition: wrappers.normalizeDefinition(modules.definition),","      autoRequire: modules.autoRequire,","    },","  };","","  return config;","};","","const trimTrailingSlashes = config => {","  const paths = config.paths;","  const trim = path => path.replace(/\\/$/, '');","","  paths.public = trim(paths.public);","  paths.watched = paths.watched.map(trim);","","  return config;","};","","const addDefaultServer = config => {","  if (config.server.path) return config;","  try {","    const defaultServerFilename = 'brunch-server';","    const resolved = require.resolve(sysPath.resolve(defaultServerFilename));","    try {","      require(resolved);","    } catch (error) {","      // Do nothing.","    }","    if (config.server.path == null) {","      config.server.path = resolved;","    }","  } catch (error) {","    // Do nothing.","  }","  return config;","};","","const loadBower = config => {","  // Since readComponents call its callback with many arguments, we hate to wrap it manually","  const rootPath = config.paths.root;","  const readBower = () => new Promise((resolve, reject) => {","    if (!config.bower.enabled) return resolve([]);","    readComponents(rootPath, 'bower', (err, components) => {","      if (err) reject(err);","      else resolve(components || []);","    });","  });","","  return readBower().then(components => {","    const order = components","      .sort((a, b) => {","        if (a.sortingLevel === b.sortingLevel) {","          return a.files[0] < b.files[0] ? -1 : 1;","        }","        return b.sortingLevel - a.sortingLevel;","      })","      .reduce((files, component) => {","        return files.concat(component.files);","      }, []);","","    return {components, order};","  }, error => {","    switch (error.code) {","      case 'NO_BOWER_JSON':","        logger.error('You probably need to execute `bower install` here.', error);","        return install({rootPath, pkgType: 'bower'}).then(readBower);","      case 'ENOENT':","        logger.error(error);","        break;","    }","","    return {components: [], order: []}; // Default values","  });","};","","const loadNpm = config => new Promise(resolve => {","  const paths = config.paths;","  const rootPath = sysPath.resolve(paths.root);","  const jsonPath = sysPath.resolve(rootPath, paths.packageConfig);","  const json = require(jsonPath);","  resolve(deppack.loadInit(config, json));","}).catch(error => {","  if (error.code === 'MODULE_NOT_FOUND') {","    throw new BrunchError('PKG_JSON_MISSING');","  } else if (error instanceof SyntaxError) {","    throw new BrunchError('PKG_JSON_INVALID', {error});","  }","  throw error;","});","","const checkComponents = config => {","  const path = sysPath.resolve(config.paths.root, 'component.json');","  helpers.fsExists(path).then(exists => {","    if (exists) {","      logger.warn('Detected component.json in project root. Component.json is no longer supported. You could switch to keeping dependencies in NPM (package.json), or revert to Brunch 2.2.');","    }","  });","};","","const addPackageManagers = config => {","  checkComponents(config);","  return Promise.all([","    loadNpm(config),","    loadBower(config),","  ]).then(components => {","    const norm = config._normalized.packageInfo;","    norm.npm = components[0];","    norm.bower = components[1];","    return config;","  });","};","","const minimalConfig = `","module.exports = {","  files: {","    javascripts: {","      joinTo: 'app.js'","    }","  }","};`;","","const tryToLoad = (configPath, fallbackHandler) => {","  let fullPath;","  let basename = configPath;","","  return new Promise(resolve => {","    debug(`Trying to load ${configPath}`);","    // Assign fullPath in two steps in case require.resolve throws.","    fullPath = sysPath.resolve(configPath);","    fullPath = require.resolve(fullPath);","    delete require.cache[fullPath];","    const resolved = require(fullPath);","    basename = sysPath.basename(fullPath);","    resolve(resolved);","  }).then(obj => {","    const config = obj && obj.config || obj;","    if (config !== Object(config)) {","      throw new BrunchError('CFG_NOT_OBJECT', {basename});","    }","    if (!config.files) {","      throw new BrunchError('CFG_NO_FILES', {basename, minimalConfig});","    }","    return config;","  }).catch(error => {","    if (error.code !== 'MODULE_NOT_FOUND') {","      throw new BrunchError('CFG_LOAD_FAILED', {error});","    }","","    const path = /^Cannot find module '(.+)'/.exec(error.message)[1];","    if (path.includes(fullPath)) {","      if (!fallbackHandler) {","        fallbackHandler = () => {","          logger.error(`The directory does not seem to be a Brunch project. Create ${basename}.js or run brunch from the correct directory. ${error.toString().replace('Error: ', '')}`);","          logger.error(`Here's a minimal brunch-config.js to get you started:\\n${minimalConfig}`);","          process.exit(1);","        };","      }","","      if (configPath === defaultConfigFilename) {","        return tryToLoad('config', fallbackHandler);","      }","","      fallbackHandler();","    } else if (!path.startsWith('.')) {","      try {","        const pkg = require(sysPath.resolve('.', 'package.json'));","        if (pkg) {","          const topLevelMod = path.split('/', 1)[0];","          const deps = Object.assign({}, pkg.dependencies, pkg.devDependencies);","          if (topLevelMod in deps) {","            logger.warn(`Config requires '${topLevelMod}' which is in package.json but wasn't yet installed. Trying to install...`);","            return install({pkgType: 'package'}).then(() => tryToLoad(configPath));","          }","        }","      } catch (e) {","        // error","      }","    }","","    throw error;","  });","};","","const checkProjectDependencies = config => {","  const packageDir = config.paths.root;","  const scopeList = config._normalized.isProduction ?","    ['dependencies'] :","    ['dependencies', 'devDependencies'];","","  return checkDeps({packageDir, scopeList}).then(out => {","    if (out.depsWereOk) return;","    const pkgs = out.error.filter(x => x.includes(':')).map(x => x.split(':', 1)[0]);","    throw pkgs;","  }).catch(pkgs => {","    // filter out symlinked packages","    const pkgPath = pkg => sysPath.join(packageDir, 'node_modules', pkg);","    const isNotSymlink = pkg => helpers.isSymlink(pkgPath(pkg)).then(x => !x);","    return helpers.asyncFilter(pkgs, isNotSymlink).then(unmetPkgs => {","      if (!unmetPkgs.length) return;","      logger.info(`Using outdated versions of ${unmetPkgs.join(', ')}, trying to update to match package.json versions`);","      return install({rootPath: packageDir, pkgType: 'package'});","    });","  }).then(() => config);","};","","const dontFreeze = ['static', 'overrides'];","","const loadConfig = (persistent, options, fromWorker) => {","  const configPath = options.config || defaultConfigFilename;","  const params = initParams(persistent, options);","","  return tryToLoad(configPath)","    .then(validateConfig)","    .then(checkNpmModules)","    .then(config => setConfigDefaults(config, configPath))","    .then(fromWorker || addDefaultServer)","    .then(config => applyOverrides(config, params.env))","    .then(config => helpers.deepAssign(config, params))","    .then(trimTrailingSlashes)","    .then(normalizeConfig)","    .then(checkProjectDependencies)","    .then(fromWorker || addPackageManagers)","    .then(helpers.deepFreeze(dontFreeze));","};","","// worker don't need default server, deprecation warnings, or package manager support","const loadConfigWorker = (persistent, options) => {","  return loadConfig(persistent, options, true);","};","","/* Generate params that will be used as default config values."," *"," * persistent - Boolean. Determines if brunch should run a web server."," * options    - Object. {optimize, publicPath, server, port}."," *"," * Returns Object."," */","","const initParams = (persistent, options) => {","  const env = options.env;","  const params = {","    persistent,","    stdin: options.stdin != null,","    env: env ? env.split(',') : [],","  };","  if (options.production == null && process.env.NODE_ENV !== 'production') {","    process.env.NODE_ENV = process.env.NODE_ENV || 'development';","  } else {","    process.env.NODE_ENV = 'production';","    params.isProduction = true;","    params.env.unshift('production');","  }","  if (options.publicPath) {","    params.paths = {","      public: options.publicPath,","    };","  }","  if (persistent) {","    const server = params.server = {};","    if (options.server) server.run = true;","    if (options.network) server.hostname = '0.0.0.0';","    if (options.port) server.port = options.port;","  }","  return params;","};","","module.exports = {","  setConfigDefaults,","  loadConfig,","  loadConfigWorker,","};",""],"l":{"2":1,"3":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"19":1,"20":0,"21":0,"23":0,"26":1,"27":0,"30":0,"31":0,"34":0,"36":0,"37":0,"38":0,"41":0,"46":1,"48":0,"49":0,"50":0,"51":0,"52":0,"56":0,"57":0,"58":0,"59":0,"60":0,"62":0,"63":0,"66":0,"67":0,"68":0,"69":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"84":0,"87":0,"88":0,"91":1,"92":0,"93":0,"96":0,"97":0,"98":0,"99":0,"103":1,"104":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"126":1,"127":0,"128":0,"129":0,"130":0,"134":0,"135":0,"136":0,"137":0,"138":0,"141":0,"142":0,"143":0,"147":0,"148":0,"149":0,"150":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"162":0,"163":0,"164":0,"165":0,"167":0,"168":0,"169":0,"170":0,"171":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"182":0,"184":0,"188":0,"191":1,"192":0,"193":0,"194":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"205":0,"211":1,"212":0,"214":0,"215":0,"217":0,"220":0,"222":0,"223":0,"225":0,"226":0,"227":0,"230":0,"231":0,"232":0,"236":0,"237":0,"238":0,"239":0,"242":0,"243":0,"245":0,"246":0,"249":0,"252":1,"253":0,"254":0,"255":0,"257":0,"258":0,"259":0,"261":0,"262":0,"263":0,"264":0,"266":0,"267":0,"270":0,"290":0,"293":1,"294":0,"295":0,"297":0,"298":0,"300":0,"303":1,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"313":0,"314":0,"319":0,"322":1,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"333":0,"334":0,"336":0,"337":0,"339":0,"342":0,"345":0,"347":0,"349":0,"350":0,"352":0,"353":0,"356":0,"360":1,"361":0,"362":0,"363":0,"364":0,"365":0,"367":0,"368":0,"369":0,"370":0,"372":0,"375":1,"376":0,"377":0,"378":0,"379":0,"384":1,"385":0,"386":0,"390":0,"391":0,"392":0,"393":0,"397":1,"406":1,"407":0,"408":0,"410":0,"411":0,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"420":0,"421":0,"422":0,"424":0,"425":0,"427":0,"429":0,"430":0,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"443":0,"444":0,"447":0,"448":0,"449":0,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"464":0,"468":1,"469":0,"470":0,"474":0,"475":0,"476":0,"477":0,"480":0,"481":0,"482":0,"483":0,"484":0,"485":0,"487":0,"490":1,"492":1,"493":0,"494":0,"496":0,"499":0,"501":0,"502":0,"511":1,"512":0,"523":1,"524":0,"525":0,"530":0,"531":0,"533":0,"534":0,"535":0,"537":0,"538":0,"542":0,"543":0,"544":0,"545":0,"546":0,"548":0,"551":1}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/modules.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/modules.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},"b":{"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":42}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":71}},"3":{"start":{"line":5,"column":0},"end":{"line":23,"column":2}},"4":{"start":{"line":6,"column":2},"end":{"line":20,"column":3}},"5":{"start":{"line":8,"column":6},"end":{"line":11,"column":9}},"6":{"start":{"line":8,"column":22},"end":{"line":11,"column":7}},"7":{"start":{"line":14,"column":6},"end":{"line":16,"column":9}},"8":{"start":{"line":14,"column":30},"end":{"line":16,"column":7}},"9":{"start":{"line":19,"column":6},"end":{"line":19,"column":34}},"10":{"start":{"line":19,"column":29},"end":{"line":19,"column":33}},"11":{"start":{"line":22,"column":2},"end":{"line":22,"column":17}},"12":{"start":{"line":25,"column":0},"end":{"line":42,"column":2}},"13":{"start":{"line":25,"column":35},"end":{"line":42,"column":1}},"14":{"start":{"line":26,"column":2},"end":{"line":26,"column":38}},"15":{"start":{"line":27,"column":2},"end":{"line":35,"column":3}},"16":{"start":{"line":28,"column":4},"end":{"line":28,"column":43}},"17":{"start":{"line":30,"column":4},"end":{"line":34,"column":6}},"18":{"start":{"line":37,"column":2},"end":{"line":41,"column":4}},"19":{"start":{"line":44,"column":0},"end":{"line":51,"column":2}},"20":{"start":{"line":45,"column":2},"end":{"line":45,"column":59}},"21":{"start":{"line":47,"column":2},"end":{"line":50,"column":4}},"22":{"start":{"line":48,"column":4},"end":{"line":48,"column":67}},"23":{"start":{"line":49,"column":4},"end":{"line":49,"column":50}},"24":{"start":{"line":53,"column":0},"end":{"line":63,"column":2}},"25":{"start":{"line":54,"column":2},"end":{"line":60,"column":3}},"26":{"start":{"line":56,"column":6},"end":{"line":56,"column":43}},"27":{"start":{"line":56,"column":19},"end":{"line":56,"column":42}},"28":{"start":{"line":59,"column":6},"end":{"line":59,"column":22}},"29":{"start":{"line":59,"column":19},"end":{"line":59,"column":21}},"30":{"start":{"line":62,"column":2},"end":{"line":62,"column":20}}},"branchMap":{"1":{"line":6,"type":"switch","locations":[{"start":{"line":7,"column":4},"end":{"line":11,"column":9}},{"start":{"line":13,"column":4},"end":{"line":16,"column":9}},{"start":{"line":18,"column":4},"end":{"line":19,"column":34}}]},"2":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":2},"end":{"line":27,"column":2}},{"start":{"line":27,"column":2},"end":{"line":27,"column":2}}]},"3":{"line":32,"type":"cond-expr","locations":[{"start":{"line":32,"column":27},"end":{"line":32,"column":31}},{"start":{"line":32,"column":34},"end":{"line":32,"column":41}}]},"4":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":12},"end":{"line":38,"column":26}},{"start":{"line":38,"column":30},"end":{"line":38,"column":32}}]},"5":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":10},"end":{"line":39,"column":22}},{"start":{"line":39,"column":26},"end":{"line":39,"column":30}}]},"6":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":12},"end":{"line":40,"column":26}},{"start":{"line":40,"column":30},"end":{"line":40,"column":32}}]},"7":{"line":54,"type":"switch","locations":[{"start":{"line":55,"column":4},"end":{"line":56,"column":43}},{"start":{"line":57,"column":4},"end":{"line":57,"column":15}},{"start":{"line":58,"column":4},"end":{"line":59,"column":22}}]}},"code":["'use strict';","const sysPath = require('universal-path');","const commonRequireDefinition = require('commonjs-require-definition');","","const getWrapperFn = wrapper => {","  switch (wrapper) {","    case 'commonjs':","      return name => ({","        prefix: `require.register(\"${name}\", function(exports, require, module) {\\n`,","        suffix: '});\\n\\n',","      });","","    case 'amd':","      return (name, data) => ({","        data: data.replace(/define\\s*\\(/, `$&\"${name}\", `),","      });","","    case false:","      return (name, data) => data;","  }","","  return wrapper;","};","","const normalizeResult = wrapper => (name, data) => {","  const wrapped = wrapper(name, data);","  if (typeof wrapped === 'string') {","    const srcIndex = wrapped.indexOf(data);","","    return {","      prefix: wrapped.slice(0, srcIndex),","      data: srcIndex > 0 ? data : wrapped,","      suffix: wrapped.slice(srcIndex + data.length),","    };","  }","","  return {","    prefix: wrapped.prefix || '',","    data: wrapped.data || data,","    suffix: wrapped.suffix || '',","  };","};","","exports.normalizeWrapper = (wrapper, nameCleaner) => {","  const wrapperFn = normalizeResult(getWrapperFn(wrapper));","","  return (path, compiled) => {","    const name = sysPath.normalize(path).replace(/^(\\.\\.\\/)+/, '');","    return wrapperFn(nameCleaner(name), compiled);","  };","};","","exports.normalizeDefinition = definition => {","  switch (definition) {","    case 'commonjs':","      return () => commonRequireDefinition;","    case 'amd':","    case false:","      return () => '';","  }","","  return definition;","};",""],"l":{"2":1,"3":1,"5":1,"6":0,"8":0,"14":0,"19":0,"22":0,"25":1,"26":0,"27":0,"28":0,"30":0,"37":0,"44":1,"45":0,"47":0,"48":0,"49":0,"53":1,"54":0,"56":0,"59":0,"62":0}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/config-validate.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/utils/config-validate.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":10},"end":{"line":26,"column":16}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":39}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":20}},"5":{"start":{"line":7,"column":0},"end":{"line":132,"column":3}},"6":{"start":{"line":27,"column":6},"end":{"line":29,"column":7}},"7":{"start":{"line":28,"column":8},"end":{"line":28,"column":65}},"8":{"start":{"line":82,"column":44},"end":{"line":82,"column":70}},"9":{"start":{"line":134,"column":0},"end":{"line":138,"column":2}},"10":{"start":{"line":140,"column":0},"end":{"line":154,"column":14}},"11":{"start":{"line":156,"column":0},"end":{"line":164,"column":2}},"12":{"start":{"line":166,"column":0},"end":{"line":179,"column":2}},"13":{"start":{"line":167,"column":2},"end":{"line":167,"column":38}},"14":{"start":{"line":168,"column":2},"end":{"line":168,"column":59}},"15":{"start":{"line":169,"column":2},"end":{"line":171,"column":5}},"16":{"start":{"line":170,"column":4},"end":{"line":170,"column":51}},"17":{"start":{"line":172,"column":2},"end":{"line":174,"column":5}},"18":{"start":{"line":173,"column":4},"end":{"line":173,"column":49}},"19":{"start":{"line":175,"column":2},"end":{"line":177,"column":3}},"20":{"start":{"line":176,"column":4},"end":{"line":176,"column":41}},"21":{"start":{"line":178,"column":2},"end":{"line":178,"column":16}}},"branchMap":{"1":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":6},"end":{"line":27,"column":6}},{"start":{"line":27,"column":6},"end":{"line":27,"column":6}}]},"2":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":2},"end":{"line":175,"column":2}},{"start":{"line":175,"column":2},"end":{"line":175,"column":2}}]}},"code":["'use strict';","const skemata = require('skemata');","const logger = require('loggy');","const BrunchError = require('./error');","","const v = skemata.v;","const configBaseSchema = v.object({","  paths: v.object({","    root: v.string.default('.'),","    public: v.string.default('public'),","    watched: v.array(v.string).default(['app', 'test', 'vendor']),","    ignored: v.deprecated(v.noop, 'moved to `config.conventions.ignored`'),","    assets: v.deprecated(v.noop, 'moved to `config.conventions.assets`'),","    test: v.deprecated(v.noop, 'moved to `config.conventions.test`'),","    vendor: v.deprecated(v.noop, 'moved to `config.conventions.vendor`'),","    config: v.string,","    packageConfig: v.string.default('package.json'),","    bowerConfig: v.string.default('bower.json'),","  }).default({}),","","  rootPath: v.deprecated(v.noop, 'moved to `config.paths.root`'),","  buildPath: v.deprecated(v.noop, 'moved to `config.paths.public`'),","","  files: v.objects({","    keys: ['javascripts', 'templates', 'stylesheets'],","    warner(key) {","      if (['app', 'test', 'vendor', 'assets'].includes(key)) {","        return 'was removed, use `config.paths.watched` instead';","      }","    },","  }, v.object({","    joinTo: v.either(","      v.string,","      v.objects({}, v.anymatch)","    ),","    entryPoints: v.objects({}, v.either(","      v.string,","      v.objects({}, v.anymatch)","    )),","    order: v.object({","      before: v.anymatch,","      after: v.anymatch,","    }),","    pluginHelpers: v.either(v.string, v.array(v.string)),","    defaultPaths: v.deprecated(v.noop, 'was removed'),","    defaultExtensions: v.deprecated(v.noop, 'was removed'),","  })),","","  npm: v.object({","    enabled: v.bool.default(true),","    globals: v.objects({}, v.string),","    aliases: v.objects({}, v.string),","    styles: v.objects({}, v.array(v.string)),","    static: v.array(v.string).default([]),","    compilers: v.array(v.string).default([]),","    detectProcess: v.bool.default(true),","  }).default({}),","","  bower: v.object({","    enabled: v.bool.default(true),","  }).default({}),","","  cra: v.bool.default(false),","","  plugins: v.object({","    on: v.array(v.string).default([]),","    off: v.array(v.string).default([]),","    only: v.array(v.string).default([]),","    npm: v.deprecated(v.array(v.string).default([]), 'use `config.npm.compilers` instead'),","  }, false).default({}),","","  conventions: v.object({","    ignored: v.anymatch.default([/\\/_/, /vendor\\/(node|j?ruby-.+|bundle)\\//]),","    assets: v.anymatch.default(/assets\\//),","    vendor: v.anymatch.default(/(^bower_components|node_modules|vendor)\\//),","  }).default({}),","","  modules: v.object({","    wrapper: v.either(v.enum('commonjs', 'amd', false), v.function).default('commonjs'),","    definition: v.either(v.enum('commonjs', 'amd', false), v.function).default('commonjs'),","    autoRequire: v.objects({}, v.array(v.string)).default({}),","    nameCleaner: v.function.default(path => path.replace(/^app\\//, '')),","  }).default({}),","","  notificationsTitle: v.deprecated(v.string, 'use `config.notifications.app` instead'),","  notifications: v.either(","    v.bool,","    v.array(v.string),","    v.object({","      app: v.string,","      icon: v.string,","      levels: v.array(v.string),","      notify: v.function,","    })","  ),","","  optimize: v.bool.default(false),","  sourceMaps: v.either(v.bool, v.enum('old', 'absoluteUrl', 'inline')).default(true),","","  server: v.object({","    base: v.string.default(''),","    port: v.int.default(3333),","    run: v.bool.default(false),","    hostname: v.string.default('localhost'),","    indexPath: v.string.default('index.html'),","    startupLogging: v.bool.default(true),","    noPushState: v.bool.default(false),","    noCors: v.bool.default(false),","    stripSlashes: v.bool.default(false),","    path: v.string,","    command: v.string,","    config: v.object({}).default({}),","  }).default({}),","","  fileListInterval: v.int.default(65),","","  watcher: v.object({","    usePolling: v.bool.default(false),","    awaitWriteFinish: v.either(v.bool, v.object({})),","  }).default({}),","","  hooks: v.object({","    preCompile: v.function.default(v.noop),","    onCompile: v.function.default(v.noop),","    teardown: v.function.default(v.noop),","  }).default({}),","","  hot: v.bool.default(false),","","  preCompile: v.deprecated(v.function, 'use `config.hooks.preCompile` instead'),","  onCompile: v.deprecated(v.function, 'use `config.hooks.onCompile` instead'),","});","","const overrideSchema = v.merge(","  configBaseSchema,","  v.object({}),","  {ignoreFirstDefaults: true}",");","","const productionOverrideSchema = v.merge(","  configBaseSchema,","  v.object({","    optimize: v.bool.default(true),","    sourceMaps: v.either(v.bool, v.enum('old', 'absoluteUrl', 'inline')).default(false),","    overrides: v.deprecated(v.noop, 'can not define `overrides` inside an override'),","","    plugins: v.object({","      autoReload: v.object({","        enabled: v.bool.default(false),","      }).default({}),","    }).default({}),","  }),","  {ignoreFirstDefaults: true}",").default({});","","const configSchema = v.merge(","  configBaseSchema,","  v.object({","    overrides: v.objects(","      {specifics: {production: productionOverrideSchema}},","      overrideSchema","    ).default({}),","  })",");","","module.exports = config => {","  const schema = configSchema(config);","  const formatted = skemata.formatObject(schema, 'config');","  formatted.errors.forEach(error => {","    logger.error(`${error.path}: ${error.result}`);","  });","  formatted.warnings.forEach(warn => {","    logger.warn(`${warn.path}: ${warn.warning}`);","  });","  if (!schema.ok) {","    throw new BrunchError('CFG_INVALID');","  }","  return config;","};",""],"l":{"2":1,"3":1,"4":1,"6":1,"7":1,"27":0,"28":0,"82":0,"134":1,"140":1,"156":1,"166":1,"167":0,"168":0,"169":0,"170":0,"172":0,"173":0,"175":0,"176":0,"178":0}},"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/workers/job-processor.js":{"path":"/home/travis/build/npmtest/node-npmtest-brunch/node_modules/brunch/lib/workers/job-processor.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"b":{"1":[0,0],"2":[0,0]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":26}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":69}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":48}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":17}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":55}},"7":{"start":{"line":10,"column":0},"end":{"line":16,"column":3}},"8":{"start":{"line":11,"column":2},"end":{"line":11,"column":13}},"9":{"start":{"line":12,"column":2},"end":{"line":15,"column":5}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":31}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":26}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":31}},"13":{"start":{"line":20,"column":0},"end":{"line":34,"column":3}},"14":{"start":{"line":21,"column":2},"end":{"line":21,"column":24}},"15":{"start":{"line":22,"column":2},"end":{"line":22,"column":24}},"16":{"start":{"line":24,"column":2},"end":{"line":24,"column":25}},"17":{"start":{"line":25,"column":2},"end":{"line":25,"column":52}},"18":{"start":{"line":25,"column":12},"end":{"line":25,"column":52}},"19":{"start":{"line":26,"column":2},"end":{"line":26,"column":53}},"20":{"start":{"line":27,"column":2},"end":{"line":33,"column":5}},"21":{"start":{"line":28,"column":4},"end":{"line":28,"column":27}},"22":{"start":{"line":30,"column":4},"end":{"line":30,"column":69}},"23":{"start":{"line":31,"column":4},"end":{"line":31,"column":56}},"24":{"start":{"line":32,"column":4},"end":{"line":32,"column":23}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":2},"end":{"line":25,"column":2}},{"start":{"line":25,"column":2},"end":{"line":25,"column":2}}]},"2":{"line":30,"type":"cond-expr","locations":[{"start":{"line":30,"column":44},"end":{"line":30,"column":60}},{"start":{"line":30,"column":63},"end":{"line":30,"column":68}}]}},"code":["'use strict';","require('micro-es7-shim');","require('promise.prototype.finally').shim();","const loadConfigWorker = require('../utils/config').loadConfigWorker;","const initPlugins = require('../utils/plugins');","","let cfg, plugins; // eslint-disable-line prefer-const","","const options = JSON.parse(process.env.BRUNCH_OPTIONS);","loadConfigWorker(false, options).then(_cfg => {","  cfg = _cfg;","  return initPlugins(cfg).then(_plugins => {","    plugins = _plugins.plugins;","    process.send('ready');","  });","});","","const jobs = require('./jobs');","","process.on('message', msg => {","  const type = msg.type;","  const data = msg.data;","","  const job = jobs[type];","  if (!job) console.error('INVALID_JOB_TYPE', type);","  const hash = job.deserialize({plugins}, data.hash);","  job.work(hash).then(result => {","    process.send({result});","  }, error => {","    const err = typeof error === 'string' ? new Error(error) : error;","    const data = {error: err.message, stack: err.stack};","    process.send(data);","  });","});",""],"l":{"2":2,"3":2,"4":2,"5":2,"7":2,"9":2,"10":0,"11":0,"12":0,"13":0,"14":0,"18":0,"20":0,"21":0,"22":0,"24":0,"25":0,"26":0,"27":0,"28":0,"30":0,"31":0,"32":0}}}